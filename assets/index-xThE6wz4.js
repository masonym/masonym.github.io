var e6=Object.defineProperty;var Hb=n=>{throw TypeError(n)};var n6=(n,t,e)=>t in n?e6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var mt=(n,t,e)=>n6(n,typeof t!="symbol"?t+"":t,e),w_=(n,t,e)=>t.has(n)||Hb("Cannot "+e);var h=(n,t,e)=>(w_(n,t,"read from private field"),e?e.call(n):t.get(n)),x=(n,t,e)=>t.has(n)?Hb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),b=(n,t,e,i)=>(w_(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),C=(n,t,e)=>(w_(n,t,"access private method"),e);var li=(n,t,e,i)=>({set _(s){b(n,t,s,e)},get _(){return h(n,t,i)}});function i6(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function xR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var PR={exports:{}},s0={},RR={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=Symbol.for("react.element"),s6=Symbol.for("react.portal"),r6=Symbol.for("react.fragment"),o6=Symbol.for("react.strict_mode"),a6=Symbol.for("react.profiler"),l6=Symbol.for("react.provider"),c6=Symbol.for("react.context"),u6=Symbol.for("react.forward_ref"),h6=Symbol.for("react.suspense"),d6=Symbol.for("react.memo"),f6=Symbol.for("react.lazy"),Wb=Symbol.iterator;function p6(n){return n===null||typeof n!="object"?null:(n=Wb&&n[Wb]||n["@@iterator"],typeof n=="function"?n:null)}var IR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kR=Object.assign,DR={};function kh(n,t,e){this.props=n,this.context=t,this.refs=DR,this.updater=e||IR}kh.prototype.isReactComponent={};kh.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};kh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function LR(){}LR.prototype=kh.prototype;function AA(n,t,e){this.props=n,this.context=t,this.refs=DR,this.updater=e||IR}var TA=AA.prototype=new LR;TA.constructor=AA;kR(TA,kh.prototype);TA.isPureReactComponent=!0;var Gb=Array.isArray,MR=Object.prototype.hasOwnProperty,SA={current:null},NR={key:!0,ref:!0,__self:!0,__source:!0};function FR(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)MR.call(t,i)&&!NR.hasOwnProperty(i)&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=e;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Sm,type:n,key:r,ref:o,props:s,_owner:SA.current}}function m6(n,t){return{$$typeof:Sm,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function bA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Sm}function g6(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var qb=/\/+/g;function E_(n,t){return typeof n=="object"&&n!==null&&n.key!=null?g6(""+n.key):t.toString(36)}function Ug(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Sm:case s6:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+E_(o,0):i,Gb(s)?(e="",n!=null&&(e=n.replace(qb,"$&/")+"/"),Ug(s,t,e,"",function(c){return c})):s!=null&&(bA(s)&&(s=m6(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qb,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",Gb(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+E_(r,a);o+=Ug(r,t,e,l,s)}else if(l=p6(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+E_(r,a++),o+=Ug(r,t,e,l,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cg(n,t,e){if(n==null)return n;var i=[],s=0;return Ug(n,i,"","",function(r){return t.call(e,r,s++)}),i}function y6(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var $n={current:null},zg={transition:null},v6={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:zg,ReactCurrentOwner:SA};function OR(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:cg,forEach:function(n,t,e){cg(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return cg(n,function(){t++}),t},toArray:function(n){return cg(n,function(t){return t})||[]},only:function(n){if(!bA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Et.Component=kh;Et.Fragment=r6;Et.Profiler=a6;Et.PureComponent=AA;Et.StrictMode=o6;Et.Suspense=h6;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v6;Et.act=OR;Et.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=kR({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=SA.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in t)MR.call(t,l)&&!NR.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Sm,type:n.type,key:s,ref:r,props:i,_owner:o}};Et.createContext=function(n){return n={$$typeof:c6,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:l6,_context:n},n.Consumer=n};Et.createElement=FR;Et.createFactory=function(n){var t=FR.bind(null,n);return t.type=n,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(n){return{$$typeof:u6,render:n}};Et.isValidElement=bA;Et.lazy=function(n){return{$$typeof:f6,_payload:{_status:-1,_result:n},_init:y6}};Et.memo=function(n,t){return{$$typeof:d6,type:n,compare:t===void 0?null:t}};Et.startTransition=function(n){var t=zg.transition;zg.transition={};try{n()}finally{zg.transition=t}};Et.unstable_act=OR;Et.useCallback=function(n,t){return $n.current.useCallback(n,t)};Et.useContext=function(n){return $n.current.useContext(n)};Et.useDebugValue=function(){};Et.useDeferredValue=function(n){return $n.current.useDeferredValue(n)};Et.useEffect=function(n,t){return $n.current.useEffect(n,t)};Et.useId=function(){return $n.current.useId()};Et.useImperativeHandle=function(n,t,e){return $n.current.useImperativeHandle(n,t,e)};Et.useInsertionEffect=function(n,t){return $n.current.useInsertionEffect(n,t)};Et.useLayoutEffect=function(n,t){return $n.current.useLayoutEffect(n,t)};Et.useMemo=function(n,t){return $n.current.useMemo(n,t)};Et.useReducer=function(n,t,e){return $n.current.useReducer(n,t,e)};Et.useRef=function(n){return $n.current.useRef(n)};Et.useState=function(n){return $n.current.useState(n)};Et.useSyncExternalStore=function(n,t,e){return $n.current.useSyncExternalStore(n,t,e)};Et.useTransition=function(){return $n.current.useTransition()};Et.version="18.3.1";RR.exports=Et;var j=RR.exports;const Hr=xR(j),_6=i6({__proto__:null,default:Hr},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6=j,E6=Symbol.for("react.element"),A6=Symbol.for("react.fragment"),T6=Object.prototype.hasOwnProperty,S6=w6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b6={key:!0,ref:!0,__self:!0,__source:!0};function VR(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)T6.call(t,i)&&!b6.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:E6,type:n,key:r,ref:o,props:s,_owner:S6.current}}s0.Fragment=A6;s0.jsx=VR;s0.jsxs=VR;PR.exports=s0;var N=PR.exports,E1={},jR={exports:{}},xi={},BR={exports:{}},UR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(z,tt){var it=z.length;z.push(tt);t:for(;0<it;){var It=it-1>>>1,at=z[It];if(0<s(at,tt))z[It]=tt,z[it]=at,it=It;else break t}}function e(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var tt=z[0],it=z.pop();if(it!==tt){z[0]=it;t:for(var It=0,at=z.length,ht=at>>>1;It<ht;){var de=2*(It+1)-1,se=z[de],Yt=de+1,Tt=z[Yt];if(0>s(se,it))Yt<at&&0>s(Tt,se)?(z[It]=Tt,z[Yt]=it,It=Yt):(z[It]=se,z[de]=it,It=de);else if(Yt<at&&0>s(Tt,it))z[It]=Tt,z[Yt]=it,It=Yt;else break t}}return tt}function s(z,tt){var it=z.sortIndex-tt.sortIndex;return it!==0?it:z.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var tt=e(c);tt!==null;){if(tt.callback===null)i(c);else if(tt.startTime<=z)i(c),tt.sortIndex=tt.expirationTime,t(l,tt);else break;tt=e(c)}}function D(z){if(_=!1,T(z),!g)if(e(l)!==null)g=!0,gt(F);else{var tt=e(c);tt!==null&&G(D,tt.startTime-z)}}function F(z,tt){g=!1,_&&(_=!1,v(S),S=-1),m=!0;var it=p;try{for(T(tt),f=e(l);f!==null&&(!(f.expirationTime>tt)||z&&!M());){var It=f.callback;if(typeof It=="function"){f.callback=null,p=f.priorityLevel;var at=It(f.expirationTime<=tt);tt=n.unstable_now(),typeof at=="function"?f.callback=at:f===e(l)&&i(l),T(tt)}else i(l);f=e(l)}if(f!==null)var ht=!0;else{var de=e(c);de!==null&&G(D,de.startTime-tt),ht=!1}return ht}finally{f=null,p=it,m=!1}}var O=!1,P=null,S=-1,R=5,k=-1;function M(){return!(n.unstable_now()-k<R)}function V(){if(P!==null){var z=n.unstable_now();k=z;var tt=!0;try{tt=P(!0,z)}finally{tt?L():(O=!1,P=null)}}else O=!1}var L;if(typeof w=="function")L=function(){w(V)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ct=Z.port2;Z.port1.onmessage=V,L=function(){ct.postMessage(null)}}else L=function(){A(V,0)};function gt(z){P=z,O||(O=!0,L())}function G(z,tt){S=A(function(){z(n.unstable_now())},tt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,gt(F))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var tt=3;break;default:tt=p}var it=p;p=tt;try{return z()}finally{p=it}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,tt){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var it=p;p=z;try{return tt()}finally{p=it}},n.unstable_scheduleCallback=function(z,tt,it){var It=n.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?It+it:It):it=It,z){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=it+at,z={id:u++,callback:tt,priorityLevel:z,startTime:it,expirationTime:at,sortIndex:-1},it>It?(z.sortIndex=it,t(c,z),e(l)===null&&z===e(c)&&(_?(v(S),S=-1):_=!0,G(D,it-It))):(z.sortIndex=at,t(l,z),g||m||(g=!0,gt(F))),z},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(z){var tt=p;return function(){var it=p;p=tt;try{return z.apply(this,arguments)}finally{p=it}}}})(UR);BR.exports=UR;var C6=BR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6=j,bi=C6;function W(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zR=new Set,df={};function fc(n,t){ph(n,t),ph(n+"Capture",t)}function ph(n,t){for(df[n]=t,n=0;n<t.length;n++)zR.add(t[n])}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A1=Object.prototype.hasOwnProperty,P6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kb={},Xb={};function R6(n){return A1.call(Xb,n)?!0:A1.call(Kb,n)?!1:P6.test(n)?Xb[n]=!0:(Kb[n]=!0,!1)}function I6(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k6(n,t,e,i){if(t===null||typeof t>"u"||I6(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hn(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){pn[n]=new Hn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];pn[t]=new Hn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){pn[n]=new Hn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){pn[n]=new Hn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){pn[n]=new Hn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){pn[n]=new Hn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){pn[n]=new Hn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){pn[n]=new Hn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){pn[n]=new Hn(n,5,!1,n.toLowerCase(),null,!1,!1)});var CA=/[\-:]([a-z])/g;function xA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(CA,xA);pn[t]=new Hn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(CA,xA);pn[t]=new Hn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(CA,xA);pn[t]=new Hn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){pn[n]=new Hn(n,1,!1,n.toLowerCase(),null,!1,!1)});pn.xlinkHref=new Hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){pn[n]=new Hn(n,1,!1,n.toLowerCase(),null,!0,!0)});function PA(n,t,e,i){var s=pn.hasOwnProperty(t)?pn[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k6(t,e,s,i)&&(e=null),i||s===null?R6(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var lo=x6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ug=Symbol.for("react.element"),zc=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),RA=Symbol.for("react.strict_mode"),T1=Symbol.for("react.profiler"),$R=Symbol.for("react.provider"),HR=Symbol.for("react.context"),IA=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),b1=Symbol.for("react.suspense_list"),kA=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),WR=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function sd(n){return n===null||typeof n!="object"?null:(n=Yb&&n[Yb]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,A_;function yd(n){if(A_===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);A_=t&&t[1]||""}return`
`+A_+n}var T_=!1;function S_(n,t){if(!n||T_)return"";T_=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(n,[],t)}else{try{t.call()}catch(c){i=c}n.call(t.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{T_=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?yd(n):""}function D6(n){switch(n.tag){case 5:return yd(n.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return n=S_(n.type,!1),n;case 11:return n=S_(n.type.render,!1),n;case 1:return n=S_(n.type,!0),n;default:return""}}function C1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $c:return"Fragment";case zc:return"Portal";case T1:return"Profiler";case RA:return"StrictMode";case S1:return"Suspense";case b1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case HR:return(n.displayName||"Context")+".Consumer";case $R:return(n._context.displayName||"Context")+".Provider";case IA:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case kA:return t=n.displayName||null,t!==null?t:C1(n.type)||"Memo";case _o:t=n._payload,n=n._init;try{return C1(n(t))}catch{}}return null}function L6(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C1(t);case 8:return t===RA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ca(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function GR(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M6(n){var t=GR(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function hg(n){n._valueTracker||(n._valueTracker=M6(n))}function qR(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=GR(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function Ny(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function x1(n,t){var e=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function Qb(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=ca(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KR(n,t){t=t.checked,t!=null&&PA(n,"checked",t,!1)}function P1(n,t){KR(n,t);var e=ca(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?R1(n,t.type,e):t.hasOwnProperty("defaultValue")&&R1(n,t.type,ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function Jb(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function R1(n,t,e){(t!=="number"||Ny(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var vd=Array.isArray;function ou(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+ca(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function I1(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zb(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(W(92));if(vd(e)){if(1<e.length)throw Error(W(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:ca(e)}}function XR(n,t){var e=ca(t.value),i=ca(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function tC(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function YR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k1(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?YR(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dg,QR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(dg=dg||document.createElement("div"),dg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function ff(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N6=["Webkit","ms","Moz","O"];Object.keys(Hd).forEach(function(n){N6.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Hd[t]=Hd[n]})});function JR(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Hd.hasOwnProperty(n)&&Hd[n]?(""+t).trim():t+"px"}function ZR(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=JR(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var F6=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D1(n,t){if(t){if(F6[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function L1(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M1=null;function DA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var N1=null,au=null,lu=null;function eC(n){if(n=xm(n)){if(typeof N1!="function")throw Error(W(280));var t=n.stateNode;t&&(t=c0(t),N1(n.stateNode,n.type,t))}}function tI(n){au?lu?lu.push(n):lu=[n]:au=n}function eI(){if(au){var n=au,t=lu;if(lu=au=null,eC(n),t)for(n=0;n<t.length;n++)eC(t[n])}}function nI(n,t){return n(t)}function iI(){}var b_=!1;function sI(n,t,e){if(b_)return n(t,e);b_=!0;try{return nI(n,t,e)}finally{b_=!1,(au!==null||lu!==null)&&(iI(),eI())}}function pf(n,t){var e=n.stateNode;if(e===null)return null;var i=c0(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(W(231,t,typeof e));return e}var F1=!1;if(Jr)try{var rd={};Object.defineProperty(rd,"passive",{get:function(){F1=!0}}),window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{F1=!1}function O6(n,t,e,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(e,c)}catch(u){this.onError(u)}}var Wd=!1,Fy=null,Oy=!1,O1=null,V6={onError:function(n){Wd=!0,Fy=n}};function j6(n,t,e,i,s,r,o,a,l){Wd=!1,Fy=null,O6.apply(V6,arguments)}function B6(n,t,e,i,s,r,o,a,l){if(j6.apply(this,arguments),Wd){if(Wd){var c=Fy;Wd=!1,Fy=null}else throw Error(W(198));Oy||(Oy=!0,O1=c)}}function pc(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function rI(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function nC(n){if(pc(n)!==n)throw Error(W(188))}function U6(n){var t=n.alternate;if(!t){if(t=pc(n),t===null)throw Error(W(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return nC(s),n;if(r===i)return nC(s),t;r=r.sibling}throw Error(W(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===e){o=!0,e=s,i=r;break}if(a===i){o=!0,i=s,e=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===e){o=!0,e=r,i=s;break}if(a===i){o=!0,i=r,e=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(e.alternate!==i)throw Error(W(190))}if(e.tag!==3)throw Error(W(188));return e.stateNode.current===e?n:t}function oI(n){return n=U6(n),n!==null?aI(n):null}function aI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=aI(n);if(t!==null)return t;n=n.sibling}return null}var lI=bi.unstable_scheduleCallback,iC=bi.unstable_cancelCallback,z6=bi.unstable_shouldYield,$6=bi.unstable_requestPaint,Te=bi.unstable_now,H6=bi.unstable_getCurrentPriorityLevel,LA=bi.unstable_ImmediatePriority,cI=bi.unstable_UserBlockingPriority,Vy=bi.unstable_NormalPriority,W6=bi.unstable_LowPriority,uI=bi.unstable_IdlePriority,r0=null,Gs=null;function G6(n){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(r0,n,void 0,(n.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:X6,q6=Math.log,K6=Math.LN2;function X6(n){return n>>>=0,n===0?32:31-(q6(n)/K6|0)|0}var fg=64,pg=4194304;function _d(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jy(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var a=o&~s;a!==0?i=_d(a):(r&=o,r!==0&&(i=_d(r)))}else o=e&~s,o!==0?i=_d(o):r!==0&&(i=_d(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-gs(t),s=1<<e,i|=n[e],t&=~s;return i}function Y6(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q6(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-gs(r),a=1<<o,l=s[o];l===-1?(!(a&e)||a&i)&&(s[o]=Y6(a,t)):l<=t&&(n.expiredLanes|=a),r&=~a}}function V1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hI(){var n=fg;return fg<<=1,!(fg&4194240)&&(fg=64),n}function C_(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function bm(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-gs(t),n[t]=e}function J6(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-gs(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function MA(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-gs(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var Vt=0;function dI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fI,NA,pI,mI,gI,j1=!1,mg=[],Xo=null,Yo=null,Qo=null,mf=new Map,gf=new Map,Eo=[],Z6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sC(n,t){switch(n){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":mf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function od(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=xm(t),t!==null&&NA(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function t5(n,t,e,i,s){switch(t){case"focusin":return Xo=od(Xo,n,t,e,i,s),!0;case"dragenter":return Yo=od(Yo,n,t,e,i,s),!0;case"mouseover":return Qo=od(Qo,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return mf.set(r,od(mf.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,gf.set(r,od(gf.get(r)||null,n,t,e,i,s)),!0}return!1}function yI(n){var t=Xa(n.target);if(t!==null){var e=pc(t);if(e!==null){if(t=e.tag,t===13){if(t=rI(e),t!==null){n.blockedOn=t,gI(n.priority,function(){pI(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $g(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=B1(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);M1=i,e.target.dispatchEvent(i),M1=null}else return t=xm(e),t!==null&&NA(t),n.blockedOn=e,!1;t.shift()}return!0}function rC(n,t,e){$g(n)&&e.delete(t)}function e5(){j1=!1,Xo!==null&&$g(Xo)&&(Xo=null),Yo!==null&&$g(Yo)&&(Yo=null),Qo!==null&&$g(Qo)&&(Qo=null),mf.forEach(rC),gf.forEach(rC)}function ad(n,t){n.blockedOn===t&&(n.blockedOn=null,j1||(j1=!0,bi.unstable_scheduleCallback(bi.unstable_NormalPriority,e5)))}function yf(n){function t(s){return ad(s,n)}if(0<mg.length){ad(mg[0],n);for(var e=1;e<mg.length;e++){var i=mg[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Xo!==null&&ad(Xo,n),Yo!==null&&ad(Yo,n),Qo!==null&&ad(Qo,n),mf.forEach(t),gf.forEach(t),e=0;e<Eo.length;e++)i=Eo[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<Eo.length&&(e=Eo[0],e.blockedOn===null);)yI(e),e.blockedOn===null&&Eo.shift()}var cu=lo.ReactCurrentBatchConfig,By=!0;function n5(n,t,e,i){var s=Vt,r=cu.transition;cu.transition=null;try{Vt=1,FA(n,t,e,i)}finally{Vt=s,cu.transition=r}}function i5(n,t,e,i){var s=Vt,r=cu.transition;cu.transition=null;try{Vt=4,FA(n,t,e,i)}finally{Vt=s,cu.transition=r}}function FA(n,t,e,i){if(By){var s=B1(n,t,e,i);if(s===null)F_(n,t,i,Uy,e),sC(n,i);else if(t5(s,n,t,e,i))i.stopPropagation();else if(sC(n,i),t&4&&-1<Z6.indexOf(n)){for(;s!==null;){var r=xm(s);if(r!==null&&fI(r),r=B1(n,t,e,i),r===null&&F_(n,t,i,Uy,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else F_(n,t,i,null,e)}}var Uy=null;function B1(n,t,e,i){if(Uy=null,n=DA(i),n=Xa(n),n!==null)if(t=pc(n),t===null)n=null;else if(e=t.tag,e===13){if(n=rI(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Uy=n,null}function vI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H6()){case LA:return 1;case cI:return 4;case Vy:case W6:return 16;case uI:return 536870912;default:return 16}default:return 16}}var Wo=null,OA=null,Hg=null;function _I(){if(Hg)return Hg;var n,t=OA,e=t.length,i,s="value"in Wo?Wo.value:Wo.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return Hg=s.slice(n,1<i?1-i:void 0)}function Wg(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function gg(){return!0}function oC(){return!1}function Pi(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?gg:oC,this.isPropagationStopped=oC,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),t}var Dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VA=Pi(Dh),Cm=ue({},Dh,{view:0,detail:0}),s5=Pi(Cm),x_,P_,ld,o0=ue({},Cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ld&&(ld&&n.type==="mousemove"?(x_=n.screenX-ld.screenX,P_=n.screenY-ld.screenY):P_=x_=0,ld=n),x_)},movementY:function(n){return"movementY"in n?n.movementY:P_}}),aC=Pi(o0),r5=ue({},o0,{dataTransfer:0}),o5=Pi(r5),a5=ue({},Cm,{relatedTarget:0}),R_=Pi(a5),l5=ue({},Dh,{animationName:0,elapsedTime:0,pseudoElement:0}),c5=Pi(l5),u5=ue({},Dh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h5=Pi(u5),d5=ue({},Dh,{data:0}),lC=Pi(d5),f5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g5(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=m5[n])?!!t[n]:!1}function jA(){return g5}var y5=ue({},Cm,{key:function(n){if(n.key){var t=f5[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Wg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?p5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jA,charCode:function(n){return n.type==="keypress"?Wg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v5=Pi(y5),_5=ue({},o0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cC=Pi(_5),w5=ue({},Cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jA}),E5=Pi(w5),A5=ue({},Dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),T5=Pi(A5),S5=ue({},o0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),b5=Pi(S5),C5=[9,13,27,32],BA=Jr&&"CompositionEvent"in window,Gd=null;Jr&&"documentMode"in document&&(Gd=document.documentMode);var x5=Jr&&"TextEvent"in window&&!Gd,wI=Jr&&(!BA||Gd&&8<Gd&&11>=Gd),uC=" ",hC=!1;function EI(n,t){switch(n){case"keyup":return C5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Hc=!1;function P5(n,t){switch(n){case"compositionend":return AI(t);case"keypress":return t.which!==32?null:(hC=!0,uC);case"textInput":return n=t.data,n===uC&&hC?null:n;default:return null}}function R5(n,t){if(Hc)return n==="compositionend"||!BA&&EI(n,t)?(n=_I(),Hg=OA=Wo=null,Hc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wI&&t.locale!=="ko"?null:t.data;default:return null}}var I5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dC(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!I5[n.type]:t==="textarea"}function TI(n,t,e,i){tI(i),t=zy(t,"onChange"),0<t.length&&(e=new VA("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var qd=null,vf=null;function k5(n){MI(n,0)}function a0(n){var t=qc(n);if(qR(t))return n}function D5(n,t){if(n==="change")return t}var SI=!1;if(Jr){var I_;if(Jr){var k_="oninput"in document;if(!k_){var fC=document.createElement("div");fC.setAttribute("oninput","return;"),k_=typeof fC.oninput=="function"}I_=k_}else I_=!1;SI=I_&&(!document.documentMode||9<document.documentMode)}function pC(){qd&&(qd.detachEvent("onpropertychange",bI),vf=qd=null)}function bI(n){if(n.propertyName==="value"&&a0(vf)){var t=[];TI(t,vf,n,DA(n)),sI(k5,t)}}function L5(n,t,e){n==="focusin"?(pC(),qd=t,vf=e,qd.attachEvent("onpropertychange",bI)):n==="focusout"&&pC()}function M5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return a0(vf)}function N5(n,t){if(n==="click")return a0(t)}function F5(n,t){if(n==="input"||n==="change")return a0(t)}function O5(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var _s=typeof Object.is=="function"?Object.is:O5;function _f(n,t){if(_s(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!A1.call(t,s)||!_s(n[s],t[s]))return!1}return!0}function mC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gC(n,t){var e=mC(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=mC(e)}}function CI(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?CI(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function xI(){for(var n=window,t=Ny();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=Ny(n.document)}return t}function UA(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function V5(n){var t=xI(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&CI(e.ownerDocument.documentElement,e)){if(i!==null&&UA(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=gC(e,r);var o=gC(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var j5=Jr&&"documentMode"in document&&11>=document.documentMode,Wc=null,U1=null,Kd=null,z1=!1;function yC(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;z1||Wc==null||Wc!==Ny(i)||(i=Wc,"selectionStart"in i&&UA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kd&&_f(Kd,i)||(Kd=i,i=zy(U1,"onSelect"),0<i.length&&(t=new VA("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Wc)))}function yg(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Gc={animationend:yg("Animation","AnimationEnd"),animationiteration:yg("Animation","AnimationIteration"),animationstart:yg("Animation","AnimationStart"),transitionend:yg("Transition","TransitionEnd")},D_={},PI={};Jr&&(PI=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function l0(n){if(D_[n])return D_[n];if(!Gc[n])return n;var t=Gc[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in PI)return D_[n]=t[e];return n}var RI=l0("animationend"),II=l0("animationiteration"),kI=l0("animationstart"),DI=l0("transitionend"),LI=new Map,vC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(n,t){LI.set(n,t),fc(t,[n])}for(var L_=0;L_<vC.length;L_++){var M_=vC[L_],B5=M_.toLowerCase(),U5=M_[0].toUpperCase()+M_.slice(1);Ta(B5,"on"+U5)}Ta(RI,"onAnimationEnd");Ta(II,"onAnimationIteration");Ta(kI,"onAnimationStart");Ta("dblclick","onDoubleClick");Ta("focusin","onFocus");Ta("focusout","onBlur");Ta(DI,"onTransitionEnd");ph("onMouseEnter",["mouseout","mouseover"]);ph("onMouseLeave",["mouseout","mouseover"]);ph("onPointerEnter",["pointerout","pointerover"]);ph("onPointerLeave",["pointerout","pointerover"]);fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z5=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function _C(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,B6(i,t,void 0,n),n.currentTarget=null}function MI(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;_C(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;_C(s,a,c),r=l}}}if(Oy)throw n=O1,Oy=!1,O1=null,n}function Jt(n,t){var e=t[q1];e===void 0&&(e=t[q1]=new Set);var i=n+"__bubble";e.has(i)||(NI(t,n,2,!1),e.add(i))}function N_(n,t,e){var i=0;t&&(i|=4),NI(e,n,i,t)}var vg="_reactListening"+Math.random().toString(36).slice(2);function wf(n){if(!n[vg]){n[vg]=!0,zR.forEach(function(e){e!=="selectionchange"&&(z5.has(e)||N_(e,!1,n),N_(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[vg]||(t[vg]=!0,N_("selectionchange",!1,t))}}function NI(n,t,e,i){switch(vI(t)){case 1:var s=n5;break;case 4:s=i5;break;default:s=FA}e=s.bind(null,t,e,n),s=void 0,!F1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function F_(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xa(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}sI(function(){var c=r,u=DA(e),f=[];t:{var p=LI.get(n);if(p!==void 0){var m=VA,g=n;switch(n){case"keypress":if(Wg(e)===0)break t;case"keydown":case"keyup":m=v5;break;case"focusin":g="focus",m=R_;break;case"focusout":g="blur",m=R_;break;case"beforeblur":case"afterblur":m=R_;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=aC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=o5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=E5;break;case RI:case II:case kI:m=c5;break;case DI:m=T5;break;case"scroll":m=s5;break;case"wheel":m=b5;break;case"copy":case"cut":case"paste":m=h5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cC}var _=(t&4)!==0,A=!_&&n==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,T;w!==null;){T=w;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,v!==null&&(D=pf(w,v),D!=null&&_.push(Ef(w,D,T)))),A)break;w=w.return}0<_.length&&(p=new m(p,g,null,e,u),f.push({event:p,listeners:_}))}}if(!(t&7)){t:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&e!==M1&&(g=e.relatedTarget||e.fromElement)&&(Xa(g)||g[Zr]))break t;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=e.relatedTarget||e.toElement,m=c,g=g?Xa(g):null,g!==null&&(A=pc(g),g!==A||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(_=aC,D="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(_=cC,D="onPointerLeave",v="onPointerEnter",w="pointer"),A=m==null?p:qc(m),T=g==null?p:qc(g),p=new _(D,w+"leave",m,e,u),p.target=A,p.relatedTarget=T,D=null,Xa(u)===c&&(_=new _(v,w+"enter",g,e,u),_.target=T,_.relatedTarget=A,D=_),A=D,m&&g)e:{for(_=m,v=g,w=0,T=_;T;T=Ic(T))w++;for(T=0,D=v;D;D=Ic(D))T++;for(;0<w-T;)_=Ic(_),w--;for(;0<T-w;)v=Ic(v),T--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break e;_=Ic(_),v=Ic(v)}_=null}else _=null;m!==null&&wC(f,p,m,_,!1),g!==null&&A!==null&&wC(f,A,g,_,!0)}}t:{if(p=c?qc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var F=D5;else if(dC(p))if(SI)F=F5;else{F=M5;var O=L5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=N5);if(F&&(F=F(n,c))){TI(f,F,e,u);break t}O&&O(n,p,c),n==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&R1(p,"number",p.value)}switch(O=c?qc(c):window,n){case"focusin":(dC(O)||O.contentEditable==="true")&&(Wc=O,U1=c,Kd=null);break;case"focusout":Kd=U1=Wc=null;break;case"mousedown":z1=!0;break;case"contextmenu":case"mouseup":case"dragend":z1=!1,yC(f,e,u);break;case"selectionchange":if(j5)break;case"keydown":case"keyup":yC(f,e,u)}var P;if(BA)t:{switch(n){case"compositionstart":var S="onCompositionStart";break t;case"compositionend":S="onCompositionEnd";break t;case"compositionupdate":S="onCompositionUpdate";break t}S=void 0}else Hc?EI(n,e)&&(S="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(S="onCompositionStart");S&&(wI&&e.locale!=="ko"&&(Hc||S!=="onCompositionStart"?S==="onCompositionEnd"&&Hc&&(P=_I()):(Wo=u,OA="value"in Wo?Wo.value:Wo.textContent,Hc=!0)),O=zy(c,S),0<O.length&&(S=new lC(S,n,null,e,u),f.push({event:S,listeners:O}),P?S.data=P:(P=AI(e),P!==null&&(S.data=P)))),(P=x5?P5(n,e):R5(n,e))&&(c=zy(c,"onBeforeInput"),0<c.length&&(u=new lC("onBeforeInput","beforeinput",null,e,u),f.push({event:u,listeners:c}),u.data=P))}MI(f,t)})}function Ef(n,t,e){return{instance:n,listener:t,currentTarget:e}}function zy(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=pf(n,e),r!=null&&i.unshift(Ef(n,r,s)),r=pf(n,t),r!=null&&i.push(Ef(n,r,s))),n=n.return}return i}function Ic(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wC(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var a=e,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=pf(e,r),l!=null&&o.unshift(Ef(e,l,a))):s||(l=pf(e,r),l!=null&&o.push(Ef(e,l,a)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var $5=/\r\n?/g,H5=/\u0000|\uFFFD/g;function EC(n){return(typeof n=="string"?n:""+n).replace($5,`
`).replace(H5,"")}function _g(n,t,e){if(t=EC(t),EC(n)!==t&&e)throw Error(W(425))}function $y(){}var $1=null,H1=null;function W1(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var G1=typeof setTimeout=="function"?setTimeout:void 0,W5=typeof clearTimeout=="function"?clearTimeout:void 0,AC=typeof Promise=="function"?Promise:void 0,G5=typeof queueMicrotask=="function"?queueMicrotask:typeof AC<"u"?function(n){return AC.resolve(null).then(n).catch(q5)}:G1;function q5(n){setTimeout(function(){throw n})}function O_(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),yf(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);yf(t)}function Jo(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function TC(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Lh=Math.random().toString(36).slice(2),Hs="__reactFiber$"+Lh,Af="__reactProps$"+Lh,Zr="__reactContainer$"+Lh,q1="__reactEvents$"+Lh,K5="__reactListeners$"+Lh,X5="__reactHandles$"+Lh;function Xa(n){var t=n[Hs];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Zr]||e[Hs]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=TC(n);n!==null;){if(e=n[Hs])return e;n=TC(n)}return t}n=e,e=n.parentNode}return null}function xm(n){return n=n[Hs]||n[Zr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function c0(n){return n[Af]||null}var K1=[],Kc=-1;function Sa(n){return{current:n}}function te(n){0>Kc||(n.current=K1[Kc],K1[Kc]=null,Kc--)}function Xt(n,t){Kc++,K1[Kc]=n.current,n.current=t}var ua={},Ln=Sa(ua),ni=Sa(!1),tc=ua;function mh(n,t){var e=n.type.contextTypes;if(!e)return ua;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function ii(n){return n=n.childContextTypes,n!=null}function Hy(){te(ni),te(Ln)}function SC(n,t,e){if(Ln.current!==ua)throw Error(W(168));Xt(Ln,t),Xt(ni,e)}function FI(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(W(108,L6(n)||"Unknown",s));return ue({},e,i)}function Wy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ua,tc=Ln.current,Xt(Ln,n),Xt(ni,ni.current),!0}function bC(n,t,e){var i=n.stateNode;if(!i)throw Error(W(169));e?(n=FI(n,t,tc),i.__reactInternalMemoizedMergedChildContext=n,te(ni),te(Ln),Xt(Ln,n)):te(ni),Xt(ni,e)}var gr=null,u0=!1,V_=!1;function OI(n){gr===null?gr=[n]:gr.push(n)}function Y5(n){u0=!0,OI(n)}function ba(){if(!V_&&gr!==null){V_=!0;var n=0,t=Vt;try{var e=gr;for(Vt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}gr=null,u0=!1}catch(s){throw gr!==null&&(gr=gr.slice(n+1)),lI(LA,ba),s}finally{Vt=t,V_=!1}}return null}var Xc=[],Yc=0,Gy=null,qy=0,Vi=[],ji=0,ec=null,zr=1,$r="";function Va(n,t){Xc[Yc++]=qy,Xc[Yc++]=Gy,Gy=n,qy=t}function VI(n,t,e){Vi[ji++]=zr,Vi[ji++]=$r,Vi[ji++]=ec,ec=n;var i=zr;n=$r;var s=32-gs(i)-1;i&=~(1<<s),e+=1;var r=32-gs(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,zr=1<<32-gs(t)+s|e<<s|i,$r=r+n}else zr=1<<r|e<<s|i,$r=n}function zA(n){n.return!==null&&(Va(n,1),VI(n,1,0))}function $A(n){for(;n===Gy;)Gy=Xc[--Yc],Xc[Yc]=null,qy=Xc[--Yc],Xc[Yc]=null;for(;n===ec;)ec=Vi[--ji],Vi[ji]=null,$r=Vi[--ji],Vi[ji]=null,zr=Vi[--ji],Vi[ji]=null}var Ti=null,Ei=null,ie=!1,ms=null;function jI(n,t){var e=$i(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function CC(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,Ti=n,Ei=Jo(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,Ti=n,Ei=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=ec!==null?{id:zr,overflow:$r}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=$i(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,Ti=n,Ei=null,!0):!1;default:return!1}}function X1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Y1(n){if(ie){var t=Ei;if(t){var e=t;if(!CC(n,t)){if(X1(n))throw Error(W(418));t=Jo(e.nextSibling);var i=Ti;t&&CC(n,t)?jI(i,e):(n.flags=n.flags&-4097|2,ie=!1,Ti=n)}}else{if(X1(n))throw Error(W(418));n.flags=n.flags&-4097|2,ie=!1,Ti=n}}}function xC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ti=n}function wg(n){if(n!==Ti)return!1;if(!ie)return xC(n),ie=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!W1(n.type,n.memoizedProps)),t&&(t=Ei)){if(X1(n))throw BI(),Error(W(418));for(;t;)jI(n,t),t=Jo(t.nextSibling)}if(xC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Ei=Jo(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Ei=null}}else Ei=Ti?Jo(n.stateNode.nextSibling):null;return!0}function BI(){for(var n=Ei;n;)n=Jo(n.nextSibling)}function gh(){Ei=Ti=null,ie=!1}function HA(n){ms===null?ms=[n]:ms.push(n)}var Q5=lo.ReactCurrentBatchConfig;function cd(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(W(309));var i=e.stateNode}if(!i)throw Error(W(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(W(284));if(!e._owner)throw Error(W(290,n))}return n}function Eg(n,t){throw n=Object.prototype.toString.call(t),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function PC(n){var t=n._init;return t(n._payload)}function UI(n){function t(v,w){if(n){var T=v.deletions;T===null?(v.deletions=[w],v.flags|=16):T.push(w)}}function e(v,w){if(!n)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=na(v,w),v.index=0,v.sibling=null,v}function r(v,w,T){return v.index=T,n?(T=v.alternate,T!==null?(T=T.index,T<w?(v.flags|=2,w):T):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,w,T,D){return w===null||w.tag!==6?(w=W_(T,v.mode,D),w.return=v,w):(w=s(w,T),w.return=v,w)}function l(v,w,T,D){var F=T.type;return F===$c?u(v,w,T.props.children,D,T.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===_o&&PC(F)===w.type)?(D=s(w,T.props),D.ref=cd(v,w,T),D.return=v,D):(D=Jg(T.type,T.key,T.props,null,v.mode,D),D.ref=cd(v,w,T),D.return=v,D)}function c(v,w,T,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=G_(T,v.mode,D),w.return=v,w):(w=s(w,T.children||[]),w.return=v,w)}function u(v,w,T,D,F){return w===null||w.tag!==7?(w=Yl(T,v.mode,D,F),w.return=v,w):(w=s(w,T),w.return=v,w)}function f(v,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=W_(""+w,v.mode,T),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ug:return T=Jg(w.type,w.key,w.props,null,v.mode,T),T.ref=cd(v,null,w),T.return=v,T;case zc:return w=G_(w,v.mode,T),w.return=v,w;case _o:var D=w._init;return f(v,D(w._payload),T)}if(vd(w)||sd(w))return w=Yl(w,v.mode,T,null),w.return=v,w;Eg(v,w)}return null}function p(v,w,T,D){var F=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:a(v,w,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ug:return T.key===F?l(v,w,T,D):null;case zc:return T.key===F?c(v,w,T,D):null;case _o:return F=T._init,p(v,w,F(T._payload),D)}if(vd(T)||sd(T))return F!==null?null:u(v,w,T,D,null);Eg(v,T)}return null}function m(v,w,T,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return v=v.get(T)||null,a(w,v,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ug:return v=v.get(D.key===null?T:D.key)||null,l(w,v,D,F);case zc:return v=v.get(D.key===null?T:D.key)||null,c(w,v,D,F);case _o:var O=D._init;return m(v,w,T,O(D._payload),F)}if(vd(D)||sd(D))return v=v.get(T)||null,u(w,v,D,F,null);Eg(w,D)}return null}function g(v,w,T,D){for(var F=null,O=null,P=w,S=w=0,R=null;P!==null&&S<T.length;S++){P.index>S?(R=P,P=null):R=P.sibling;var k=p(v,P,T[S],D);if(k===null){P===null&&(P=R);break}n&&P&&k.alternate===null&&t(v,P),w=r(k,w,S),O===null?F=k:O.sibling=k,O=k,P=R}if(S===T.length)return e(v,P),ie&&Va(v,S),F;if(P===null){for(;S<T.length;S++)P=f(v,T[S],D),P!==null&&(w=r(P,w,S),O===null?F=P:O.sibling=P,O=P);return ie&&Va(v,S),F}for(P=i(v,P);S<T.length;S++)R=m(P,v,S,T[S],D),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?S:R.key),w=r(R,w,S),O===null?F=R:O.sibling=R,O=R);return n&&P.forEach(function(M){return t(v,M)}),ie&&Va(v,S),F}function _(v,w,T,D){var F=sd(T);if(typeof F!="function")throw Error(W(150));if(T=F.call(T),T==null)throw Error(W(151));for(var O=F=null,P=w,S=w=0,R=null,k=T.next();P!==null&&!k.done;S++,k=T.next()){P.index>S?(R=P,P=null):R=P.sibling;var M=p(v,P,k.value,D);if(M===null){P===null&&(P=R);break}n&&P&&M.alternate===null&&t(v,P),w=r(M,w,S),O===null?F=M:O.sibling=M,O=M,P=R}if(k.done)return e(v,P),ie&&Va(v,S),F;if(P===null){for(;!k.done;S++,k=T.next())k=f(v,k.value,D),k!==null&&(w=r(k,w,S),O===null?F=k:O.sibling=k,O=k);return ie&&Va(v,S),F}for(P=i(v,P);!k.done;S++,k=T.next())k=m(P,v,S,k.value,D),k!==null&&(n&&k.alternate!==null&&P.delete(k.key===null?S:k.key),w=r(k,w,S),O===null?F=k:O.sibling=k,O=k);return n&&P.forEach(function(V){return t(v,V)}),ie&&Va(v,S),F}function A(v,w,T,D){if(typeof T=="object"&&T!==null&&T.type===$c&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ug:t:{for(var F=T.key,O=w;O!==null;){if(O.key===F){if(F=T.type,F===$c){if(O.tag===7){e(v,O.sibling),w=s(O,T.props.children),w.return=v,v=w;break t}}else if(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===_o&&PC(F)===O.type){e(v,O.sibling),w=s(O,T.props),w.ref=cd(v,O,T),w.return=v,v=w;break t}e(v,O);break}else t(v,O);O=O.sibling}T.type===$c?(w=Yl(T.props.children,v.mode,D,T.key),w.return=v,v=w):(D=Jg(T.type,T.key,T.props,null,v.mode,D),D.ref=cd(v,w,T),D.return=v,v=D)}return o(v);case zc:t:{for(O=T.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){e(v,w.sibling),w=s(w,T.children||[]),w.return=v,v=w;break t}else{e(v,w);break}else t(v,w);w=w.sibling}w=G_(T,v.mode,D),w.return=v,v=w}return o(v);case _o:return O=T._init,A(v,w,O(T._payload),D)}if(vd(T))return g(v,w,T,D);if(sd(T))return _(v,w,T,D);Eg(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(e(v,w.sibling),w=s(w,T),w.return=v,v=w):(e(v,w),w=W_(T,v.mode,D),w.return=v,v=w),o(v)):e(v,w)}return A}var yh=UI(!0),zI=UI(!1),Ky=Sa(null),Xy=null,Qc=null,WA=null;function GA(){WA=Qc=Xy=null}function qA(n){var t=Ky.current;te(Ky),n._currentValue=t}function Q1(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function uu(n,t){Xy=n,WA=Qc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Zn=!0),n.firstContext=null)}function Wi(n){var t=n._currentValue;if(WA!==n)if(n={context:n,memoizedValue:t,next:null},Qc===null){if(Xy===null)throw Error(W(308));Qc=n,Xy.dependencies={lanes:0,firstContext:n}}else Qc=Qc.next=n;return t}var Ya=null;function KA(n){Ya===null?Ya=[n]:Ya.push(n)}function $I(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,KA(t)):(e.next=s.next,s.next=e),t.interleaved=e,to(n,i)}function to(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var wo=!1;function XA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HI(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Zo(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Rt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,to(n,e)}return s=i.interleaved,s===null?(t.next=t,KA(i)):(t.next=s.next,s.next=t),i.interleaved=t,to(n,e)}function Gg(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,MA(n,e)}}function RC(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function Yy(n,t,e,i){var s=n.updateQueue;wo=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var f=s.baseState;o=0,u=c=l=null,a=r;do{var p=a.lane,m=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=n,_=a;switch(p=t,m=e,_.tag){case 1:if(g=_.payload,typeof g=="function"){f=g.call(m,f,p);break t}f=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break t;f=ue({},f,p);break t;case 2:wo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);ic|=o,n.lanes=o,n.memoizedState=f}}function IC(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(W(191,s));s.call(i)}}}var Pm={},qs=Sa(Pm),Tf=Sa(Pm),Sf=Sa(Pm);function Qa(n){if(n===Pm)throw Error(W(174));return n}function YA(n,t){switch(Xt(Sf,t),Xt(Tf,n),Xt(qs,Pm),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:k1(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=k1(t,n)}te(qs),Xt(qs,t)}function vh(){te(qs),te(Tf),te(Sf)}function WI(n){Qa(Sf.current);var t=Qa(qs.current),e=k1(t,n.type);t!==e&&(Xt(Tf,n),Xt(qs,e))}function QA(n){Tf.current===n&&(te(qs),te(Tf))}var ae=Sa(0);function Qy(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j_=[];function JA(){for(var n=0;n<j_.length;n++)j_[n]._workInProgressVersionPrimary=null;j_.length=0}var qg=lo.ReactCurrentDispatcher,B_=lo.ReactCurrentBatchConfig,nc=0,ce=null,Ue=null,Ye=null,Jy=!1,Xd=!1,bf=0,J5=0;function _n(){throw Error(W(321))}function ZA(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!_s(n[e],t[e]))return!1;return!0}function tT(n,t,e,i,s,r){if(nc=r,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qg.current=n===null||n.memoizedState===null?nF:iF,n=e(i,s),Xd){r=0;do{if(Xd=!1,bf=0,25<=r)throw Error(W(301));r+=1,Ye=Ue=null,t.updateQueue=null,qg.current=sF,n=e(i,s)}while(Xd)}if(qg.current=Zy,t=Ue!==null&&Ue.next!==null,nc=0,Ye=Ue=ce=null,Jy=!1,t)throw Error(W(300));return n}function eT(){var n=bf!==0;return bf=0,n}function Cs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?ce.memoizedState=Ye=n:Ye=Ye.next=n,Ye}function Gi(){if(Ue===null){var n=ce.alternate;n=n!==null?n.memoizedState:null}else n=Ue.next;var t=Ye===null?ce.memoizedState:Ye.next;if(t!==null)Ye=t,Ue=n;else{if(n===null)throw Error(W(310));Ue=n,n={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ye===null?ce.memoizedState=Ye=n:Ye=Ye.next=n}return Ye}function Cf(n,t){return typeof t=="function"?t(n):t}function U_(n){var t=Gi(),e=t.queue;if(e===null)throw Error(W(311));e.lastRenderedReducer=n;var i=Ue,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((nc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,ce.lanes|=u,ic|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,_s(i,t.memoizedState)||(Zn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,ce.lanes|=r,ic|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function z_(n){var t=Gi(),e=t.queue;if(e===null)throw Error(W(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);_s(r,t.memoizedState)||(Zn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function GI(){}function qI(n,t){var e=ce,i=Gi(),s=t(),r=!_s(i.memoizedState,s);if(r&&(i.memoizedState=s,Zn=!0),i=i.queue,nT(YI.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||Ye!==null&&Ye.memoizedState.tag&1){if(e.flags|=2048,xf(9,XI.bind(null,e,i,s,t),void 0,null),Qe===null)throw Error(W(349));nc&30||KI(e,t,s)}return s}function KI(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function XI(n,t,e,i){t.value=e,t.getSnapshot=i,QI(t)&&JI(n)}function YI(n,t,e){return e(function(){QI(t)&&JI(n)})}function QI(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!_s(n,e)}catch{return!0}}function JI(n){var t=to(n,1);t!==null&&ys(t,n,1,-1)}function kC(n){var t=Cs();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:n},t.queue=n,n=n.dispatch=eF.bind(null,ce,n),[t.memoizedState,n]}function xf(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function ZI(){return Gi().memoizedState}function Kg(n,t,e,i){var s=Cs();ce.flags|=n,s.memoizedState=xf(1|t,e,void 0,i===void 0?null:i)}function h0(n,t,e,i){var s=Gi();i=i===void 0?null:i;var r=void 0;if(Ue!==null){var o=Ue.memoizedState;if(r=o.destroy,i!==null&&ZA(i,o.deps)){s.memoizedState=xf(t,e,r,i);return}}ce.flags|=n,s.memoizedState=xf(1|t,e,r,i)}function DC(n,t){return Kg(8390656,8,n,t)}function nT(n,t){return h0(2048,8,n,t)}function tk(n,t){return h0(4,2,n,t)}function ek(n,t){return h0(4,4,n,t)}function nk(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function ik(n,t,e){return e=e!=null?e.concat([n]):null,h0(4,4,nk.bind(null,t,n),e)}function iT(){}function sk(n,t){var e=Gi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&ZA(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function rk(n,t){var e=Gi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&ZA(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function ok(n,t,e){return nc&21?(_s(e,t)||(e=hI(),ce.lanes|=e,ic|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Zn=!0),n.memoizedState=e)}function Z5(n,t){var e=Vt;Vt=e!==0&&4>e?e:4,n(!0);var i=B_.transition;B_.transition={};try{n(!1),t()}finally{Vt=e,B_.transition=i}}function ak(){return Gi().memoizedState}function tF(n,t,e){var i=ea(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},lk(n))ck(t,e);else if(e=$I(n,t,e,i),e!==null){var s=Bn();ys(e,n,i,s),uk(e,t,i)}}function eF(n,t,e){var i=ea(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(lk(n))ck(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,e);if(s.hasEagerState=!0,s.eagerState=a,_s(a,o)){var l=t.interleaved;l===null?(s.next=s,KA(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}e=$I(n,t,s,i),e!==null&&(s=Bn(),ys(e,n,i,s),uk(e,t,i))}}function lk(n){var t=n.alternate;return n===ce||t!==null&&t===ce}function ck(n,t){Xd=Jy=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function uk(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,MA(n,e)}}var Zy={readContext:Wi,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},nF={readContext:Wi,useCallback:function(n,t){return Cs().memoizedState=[n,t===void 0?null:t],n},useContext:Wi,useEffect:DC,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Kg(4194308,4,nk.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Kg(4194308,4,n,t)},useInsertionEffect:function(n,t){return Kg(4,2,n,t)},useMemo:function(n,t){var e=Cs();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Cs();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=tF.bind(null,ce,n),[i.memoizedState,n]},useRef:function(n){var t=Cs();return n={current:n},t.memoizedState=n},useState:kC,useDebugValue:iT,useDeferredValue:function(n){return Cs().memoizedState=n},useTransition:function(){var n=kC(!1),t=n[0];return n=Z5.bind(null,n[1]),Cs().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=ce,s=Cs();if(ie){if(e===void 0)throw Error(W(407));e=e()}else{if(e=t(),Qe===null)throw Error(W(349));nc&30||KI(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,DC(YI.bind(null,i,r,n),[n]),i.flags|=2048,xf(9,XI.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Cs(),t=Qe.identifierPrefix;if(ie){var e=$r,i=zr;e=(i&~(1<<32-gs(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=bf++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=J5++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},iF={readContext:Wi,useCallback:sk,useContext:Wi,useEffect:nT,useImperativeHandle:ik,useInsertionEffect:tk,useLayoutEffect:ek,useMemo:rk,useReducer:U_,useRef:ZI,useState:function(){return U_(Cf)},useDebugValue:iT,useDeferredValue:function(n){var t=Gi();return ok(t,Ue.memoizedState,n)},useTransition:function(){var n=U_(Cf)[0],t=Gi().memoizedState;return[n,t]},useMutableSource:GI,useSyncExternalStore:qI,useId:ak,unstable_isNewReconciler:!1},sF={readContext:Wi,useCallback:sk,useContext:Wi,useEffect:nT,useImperativeHandle:ik,useInsertionEffect:tk,useLayoutEffect:ek,useMemo:rk,useReducer:z_,useRef:ZI,useState:function(){return z_(Cf)},useDebugValue:iT,useDeferredValue:function(n){var t=Gi();return Ue===null?t.memoizedState=n:ok(t,Ue.memoizedState,n)},useTransition:function(){var n=z_(Cf)[0],t=Gi().memoizedState;return[n,t]},useMutableSource:GI,useSyncExternalStore:qI,useId:ak,unstable_isNewReconciler:!1};function Zi(n,t){if(n&&n.defaultProps){t=ue({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function J1(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:ue({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var d0={isMounted:function(n){return(n=n._reactInternals)?pc(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Bn(),s=ea(n),r=Wr(i,s);r.payload=t,e!=null&&(r.callback=e),t=Zo(n,r,s),t!==null&&(ys(t,n,s,i),Gg(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Bn(),s=ea(n),r=Wr(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Zo(n,r,s),t!==null&&(ys(t,n,s,i),Gg(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Bn(),i=ea(n),s=Wr(e,i);s.tag=2,t!=null&&(s.callback=t),t=Zo(n,s,i),t!==null&&(ys(t,n,i,e),Gg(t,n,i))}};function LC(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!_f(e,i)||!_f(s,r):!0}function hk(n,t,e){var i=!1,s=ua,r=t.contextType;return typeof r=="object"&&r!==null?r=Wi(r):(s=ii(t)?tc:Ln.current,i=t.contextTypes,r=(i=i!=null)?mh(n,s):ua),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=d0,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function MC(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&d0.enqueueReplaceState(t,t.state,null)}function Z1(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},XA(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Wi(r):(r=ii(t)?tc:Ln.current,s.context=mh(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(J1(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&d0.enqueueReplaceState(s,s.state,null),Yy(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function _h(n,t){try{var e="",i=t;do e+=D6(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function $_(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function tw(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var rF=typeof WeakMap=="function"?WeakMap:Map;function dk(n,t,e){e=Wr(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){ev||(ev=!0,uw=i),tw(n,t)},e}function fk(n,t,e){e=Wr(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){tw(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){tw(n,t),typeof i!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function NC(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new rF;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=_F.bind(null,n,t,e),t.then(n,n))}function FC(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function OC(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Wr(-1,1),t.tag=2,Zo(e,t,1))),e.lanes|=1),n)}var oF=lo.ReactCurrentOwner,Zn=!1;function Vn(n,t,e,i){t.child=n===null?zI(t,null,e,i):yh(t,n.child,e,i)}function VC(n,t,e,i,s){e=e.render;var r=t.ref;return uu(t,s),i=tT(n,t,e,i,r,s),e=eT(),n!==null&&!Zn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(ie&&e&&zA(t),t.flags|=1,Vn(n,t,i,s),t.child)}function jC(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!hT(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,pk(n,t,r,i,s)):(n=Jg(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:_f,e(o,i)&&n.ref===t.ref)return eo(n,t,s)}return t.flags|=1,n=na(r,i),n.ref=t.ref,n.return=t,t.child=n}function pk(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(_f(r,i)&&n.ref===t.ref)if(Zn=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Zn=!0);else return t.lanes=n.lanes,eo(n,t,s)}return ew(n,t,e,i,s)}function mk(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Zc,_i),_i|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Xt(Zc,_i),_i|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,Xt(Zc,_i),_i|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,Xt(Zc,_i),_i|=i;return Vn(n,t,s,e),t.child}function gk(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function ew(n,t,e,i,s){var r=ii(e)?tc:Ln.current;return r=mh(t,r),uu(t,s),e=tT(n,t,e,i,r,s),i=eT(),n!==null&&!Zn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(ie&&i&&zA(t),t.flags|=1,Vn(n,t,e,s),t.child)}function BC(n,t,e,i,s){if(ii(e)){var r=!0;Wy(t)}else r=!1;if(uu(t,s),t.stateNode===null)Xg(n,t),hk(t,e,i),Z1(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=e.contextType;typeof c=="object"&&c!==null?c=Wi(c):(c=ii(e)?tc:Ln.current,c=mh(t,c));var u=e.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&MC(t,o,i,c),wo=!1;var p=t.memoizedState;o.state=p,Yy(t,i,o,s),l=t.memoizedState,a!==i||p!==l||ni.current||wo?(typeof u=="function"&&(J1(t,e,u,i),l=t.memoizedState),(a=wo||LC(t,e,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,HI(n,t),a=t.memoizedProps,c=t.type===t.elementType?a:Zi(t.type,a),o.props=c,f=t.pendingProps,p=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=Wi(l):(l=ii(e)?tc:Ln.current,l=mh(t,l));var m=e.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&MC(t,o,i,l),wo=!1,p=t.memoizedState,o.state=p,Yy(t,i,o,s);var g=t.memoizedState;a!==f||p!==g||ni.current||wo?(typeof m=="function"&&(J1(t,e,m,i),g=t.memoizedState),(c=wo||LC(t,e,c,i,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(t.flags|=1024),i=!1)}return nw(n,t,e,i,r,s)}function nw(n,t,e,i,s,r){gk(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&bC(t,e,!1),eo(n,t,r);i=t.stateNode,oF.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=yh(t,n.child,null,r),t.child=yh(t,null,a,r)):Vn(n,t,a,r),t.memoizedState=i.state,s&&bC(t,e,!0),t.child}function yk(n){var t=n.stateNode;t.pendingContext?SC(n,t.pendingContext,t.pendingContext!==t.context):t.context&&SC(n,t.context,!1),YA(n,t.containerInfo)}function UC(n,t,e,i,s){return gh(),HA(s),t.flags|=256,Vn(n,t,e,i),t.child}var iw={dehydrated:null,treeContext:null,retryLane:0};function sw(n){return{baseLanes:n,cachePool:null,transitions:null}}function vk(n,t,e){var i=t.pendingProps,s=ae.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Xt(ae,s&1),n===null)return Y1(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=m0(o,i,0,null),n=Yl(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=sw(e),t.memoizedState=iw,n):sT(t,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return aF(n,t,o,i,a,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=na(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=na(a,r):(r=Yl(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?sw(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=iw,i}return r=n.child,n=r.sibling,i=na(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function sT(n,t){return t=m0({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function Ag(n,t,e,i){return i!==null&&HA(i),yh(t,n.child,null,e),n=sT(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function aF(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=$_(Error(W(422))),Ag(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=m0({mode:"visible",children:i.children},s,0,null),r=Yl(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&yh(t,n.child,null,o),t.child.memoizedState=sw(o),t.memoizedState=iw,r);if(!(t.mode&1))return Ag(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(W(419)),i=$_(r,i,void 0),Ag(n,t,o,i)}if(a=(o&n.childLanes)!==0,Zn||a){if(i=Qe,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,to(n,s),ys(i,n,s,-1))}return uT(),i=$_(Error(W(421))),Ag(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=wF.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,Ei=Jo(s.nextSibling),Ti=t,ie=!0,ms=null,n!==null&&(Vi[ji++]=zr,Vi[ji++]=$r,Vi[ji++]=ec,zr=n.id,$r=n.overflow,ec=t),t=sT(t,i.children),t.flags|=4096,t)}function zC(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Q1(n.return,t,e)}function H_(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function _k(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Vn(n,t,i.children,e),i=ae.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zC(n,e,t);else if(n.tag===19)zC(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Xt(ae,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&Qy(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),H_(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&Qy(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}H_(t,!0,e,null,r);break;case"together":H_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xg(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function eo(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),ic|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(W(153));if(t.child!==null){for(n=t.child,e=na(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=na(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function lF(n,t,e){switch(t.tag){case 3:yk(t),gh();break;case 5:WI(t);break;case 1:ii(t.type)&&Wy(t);break;case 4:YA(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Xt(Ky,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Xt(ae,ae.current&1),t.flags|=128,null):e&t.child.childLanes?vk(n,t,e):(Xt(ae,ae.current&1),n=eo(n,t,e),n!==null?n.sibling:null);Xt(ae,ae.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return _k(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xt(ae,ae.current),i)break;return null;case 22:case 23:return t.lanes=0,mk(n,t,e)}return eo(n,t,e)}var wk,rw,Ek,Ak;wk=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};rw=function(){};Ek=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,Qa(qs.current);var r=null;switch(e){case"input":s=x1(n,s),i=x1(n,i),r=[];break;case"select":s=ue({},s,{value:void 0}),i=ue({},i,{value:void 0}),r=[];break;case"textarea":s=I1(n,s),i=I1(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=$y)}D1(e,i);var o;e=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(df.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(r||(r=[]),r.push(c,e)),e=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(df.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Jt("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}e&&(r=r||[]).push("style",e);var c=r;(t.updateQueue=c)&&(t.flags|=4)}};Ak=function(n,t,e,i){e!==i&&(t.flags|=4)};function ud(n,t){if(!ie)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function wn(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function cF(n,t,e){var i=t.pendingProps;switch($A(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return ii(t.type)&&Hy(),wn(t),null;case 3:return i=t.stateNode,vh(),te(ni),te(Ln),JA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(wg(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ms!==null&&(fw(ms),ms=null))),rw(n,t),wn(t),null;case 5:QA(t);var s=Qa(Sf.current);if(e=t.type,n!==null&&t.stateNode!=null)Ek(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(W(166));return wn(t),null}if(n=Qa(qs.current),wg(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Hs]=t,i[Af]=r,n=(t.mode&1)!==0,e){case"dialog":Jt("cancel",i),Jt("close",i);break;case"iframe":case"object":case"embed":Jt("load",i);break;case"video":case"audio":for(s=0;s<wd.length;s++)Jt(wd[s],i);break;case"source":Jt("error",i);break;case"img":case"image":case"link":Jt("error",i),Jt("load",i);break;case"details":Jt("toggle",i);break;case"input":Qb(i,r),Jt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Jt("invalid",i);break;case"textarea":Zb(i,r),Jt("invalid",i)}D1(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&_g(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&_g(i.textContent,a,n),s=["children",""+a]):df.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jt("scroll",i)}switch(e){case"input":hg(i),Jb(i,r,!0);break;case"textarea":hg(i),tC(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=$y)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=YR(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Hs]=t,n[Af]=i,wk(n,t,!1,!1),t.stateNode=n;t:{switch(o=L1(e,i),e){case"dialog":Jt("cancel",n),Jt("close",n),s=i;break;case"iframe":case"object":case"embed":Jt("load",n),s=i;break;case"video":case"audio":for(s=0;s<wd.length;s++)Jt(wd[s],n);s=i;break;case"source":Jt("error",n),s=i;break;case"img":case"image":case"link":Jt("error",n),Jt("load",n),s=i;break;case"details":Jt("toggle",n),s=i;break;case"input":Qb(n,i),s=x1(n,i),Jt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=ue({},i,{value:void 0}),Jt("invalid",n);break;case"textarea":Zb(n,i),s=I1(n,i),Jt("invalid",n);break;default:s=i}D1(e,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?ZR(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QR(n,l)):r==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&ff(n,l):typeof l=="number"&&ff(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(df.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Jt("scroll",n):l!=null&&PA(n,r,l,o))}switch(e){case"input":hg(n),Jb(n,i,!1);break;case"textarea":hg(n),tC(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ca(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ou(n,!!i.multiple,r,!1):i.defaultValue!=null&&ou(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=$y)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wn(t),null;case 6:if(n&&t.stateNode!=null)Ak(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(W(166));if(e=Qa(Sf.current),Qa(qs.current),wg(t)){if(i=t.stateNode,e=t.memoizedProps,i[Hs]=t,(r=i.nodeValue!==e)&&(n=Ti,n!==null))switch(n.tag){case 3:_g(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_g(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Hs]=t,t.stateNode=i}return wn(t),null;case 13:if(te(ae),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ie&&Ei!==null&&t.mode&1&&!(t.flags&128))BI(),gh(),t.flags|=98560,r=!1;else if(r=wg(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(W(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(W(317));r[Hs]=t}else gh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wn(t),r=!1}else ms!==null&&(fw(ms),ms=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||ae.current&1?$e===0&&($e=3):uT())),t.updateQueue!==null&&(t.flags|=4),wn(t),null);case 4:return vh(),rw(n,t),n===null&&wf(t.stateNode.containerInfo),wn(t),null;case 10:return qA(t.type._context),wn(t),null;case 17:return ii(t.type)&&Hy(),wn(t),null;case 19:if(te(ae),r=t.memoizedState,r===null)return wn(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)ud(r,!1);else{if($e!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=Qy(n),o!==null){for(t.flags|=128,ud(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Xt(ae,ae.current&1|2),t.child}n=n.sibling}r.tail!==null&&Te()>wh&&(t.flags|=128,i=!0,ud(r,!1),t.lanes=4194304)}else{if(!i)if(n=Qy(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),ud(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ie)return wn(t),null}else 2*Te()-r.renderingStartTime>wh&&e!==1073741824&&(t.flags|=128,i=!0,ud(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Te(),t.sibling=null,e=ae.current,Xt(ae,i?e&1|2:e&1),t):(wn(t),null);case 22:case 23:return cT(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?_i&1073741824&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function uF(n,t){switch($A(t),t.tag){case 1:return ii(t.type)&&Hy(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return vh(),te(ni),te(Ln),JA(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return QA(t),null;case 13:if(te(ae),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(W(340));gh()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return te(ae),null;case 4:return vh(),null;case 10:return qA(t.type._context),null;case 22:case 23:return cT(),null;case 24:return null;default:return null}}var Tg=!1,Pn=!1,hF=typeof WeakSet=="function"?WeakSet:Set,J=null;function Jc(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){ve(n,t,i)}else e.current=null}function ow(n,t,e){try{e()}catch(i){ve(n,t,i)}}var $C=!1;function dF(n,t){if($1=By,n=xI(),UA(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;e:for(;;){for(var m;f!==e||s!==0&&f.nodeType!==3||(a=o+s),f!==r||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break e;if(p===e&&++c===s&&(a=o),p===r&&++u===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(H1={focusedElem:n,selectionRange:e},By=!1,J=t;J!==null;)if(t=J,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,J=n;else for(;J!==null;){t=J;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,A=g.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?_:Zi(t.type,_),A);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){ve(t,t.return,D)}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}return g=$C,$C=!1,g}function Yd(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ow(t,e,r)}s=s.next}while(s!==i)}}function f0(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function aw(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function Tk(n){var t=n.alternate;t!==null&&(n.alternate=null,Tk(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Hs],delete t[Af],delete t[q1],delete t[K5],delete t[X5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Sk(n){return n.tag===5||n.tag===3||n.tag===4}function HC(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Sk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lw(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=$y));else if(i!==4&&(n=n.child,n!==null))for(lw(n,t,e),n=n.sibling;n!==null;)lw(n,t,e),n=n.sibling}function cw(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(cw(n,t,e),n=n.sibling;n!==null;)cw(n,t,e),n=n.sibling}var ln=null,ps=!1;function fo(n,t,e){for(e=e.child;e!==null;)bk(n,t,e),e=e.sibling}function bk(n,t,e){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(r0,e)}catch{}switch(e.tag){case 5:Pn||Jc(e,t);case 6:var i=ln,s=ps;ln=null,fo(n,t,e),ln=i,ps=s,ln!==null&&(ps?(n=ln,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):ln.removeChild(e.stateNode));break;case 18:ln!==null&&(ps?(n=ln,e=e.stateNode,n.nodeType===8?O_(n.parentNode,e):n.nodeType===1&&O_(n,e),yf(n)):O_(ln,e.stateNode));break;case 4:i=ln,s=ps,ln=e.stateNode.containerInfo,ps=!0,fo(n,t,e),ln=i,ps=s;break;case 0:case 11:case 14:case 15:if(!Pn&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ow(e,t,o),s=s.next}while(s!==i)}fo(n,t,e);break;case 1:if(!Pn&&(Jc(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(a){ve(e,t,a)}fo(n,t,e);break;case 21:fo(n,t,e);break;case 22:e.mode&1?(Pn=(i=Pn)||e.memoizedState!==null,fo(n,t,e),Pn=i):fo(n,t,e);break;default:fo(n,t,e)}}function WC(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new hF),t.forEach(function(i){var s=EF.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function Ki(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:ln=a.stateNode,ps=!1;break t;case 3:ln=a.stateNode.containerInfo,ps=!0;break t;case 4:ln=a.stateNode.containerInfo,ps=!0;break t}a=a.return}if(ln===null)throw Error(W(160));bk(r,o,s),ln=null,ps=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ve(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ck(t,n),t=t.sibling}function Ck(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ki(t,n),Ts(n),i&4){try{Yd(3,n,n.return),f0(3,n)}catch(_){ve(n,n.return,_)}try{Yd(5,n,n.return)}catch(_){ve(n,n.return,_)}}break;case 1:Ki(t,n),Ts(n),i&512&&e!==null&&Jc(e,e.return);break;case 5:if(Ki(t,n),Ts(n),i&512&&e!==null&&Jc(e,e.return),n.flags&32){var s=n.stateNode;try{ff(s,"")}catch(_){ve(n,n.return,_)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&KR(s,r),L1(a,o);var c=L1(a,r);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?ZR(s,f):u==="dangerouslySetInnerHTML"?QR(s,f):u==="children"?ff(s,f):PA(s,u,f,c)}switch(a){case"input":P1(s,r);break;case"textarea":XR(s,r);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?ou(s,!!r.multiple,m,!1):p!==!!r.multiple&&(r.defaultValue!=null?ou(s,!!r.multiple,r.defaultValue,!0):ou(s,!!r.multiple,r.multiple?[]:"",!1))}s[Af]=r}catch(_){ve(n,n.return,_)}}break;case 6:if(Ki(t,n),Ts(n),i&4){if(n.stateNode===null)throw Error(W(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(_){ve(n,n.return,_)}}break;case 3:if(Ki(t,n),Ts(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{yf(t.containerInfo)}catch(_){ve(n,n.return,_)}break;case 4:Ki(t,n),Ts(n);break;case 13:Ki(t,n),Ts(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(aT=Te())),i&4&&WC(n);break;case 22:if(u=e!==null&&e.memoizedState!==null,n.mode&1?(Pn=(c=Pn)||u,Ki(t,n),Pn=c):Ki(t,n),Ts(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(J=n,u=n.child;u!==null;){for(f=J=u;J!==null;){switch(p=J,m=p.child,p.tag){case 0:case 11:case 14:case 15:Yd(4,p,p.return);break;case 1:Jc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,e=p.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(_){ve(i,e,_)}}break;case 5:Jc(p,p.return);break;case 22:if(p.memoizedState!==null){qC(f);continue}}m!==null?(m.return=p,J=m):qC(f)}u=u.sibling}t:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=JR("display",o))}catch(_){ve(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){ve(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break t;for(;f.sibling===null;){if(f.return===null||f.return===n)break t;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ki(t,n),Ts(n),i&4&&WC(n);break;case 21:break;default:Ki(t,n),Ts(n)}}function Ts(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(Sk(e)){var i=e;break t}e=e.return}throw Error(W(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ff(s,""),i.flags&=-33);var r=HC(n);cw(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=HC(n);lw(n,a,o);break;default:throw Error(W(161))}}catch(l){ve(n,n.return,l)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function fF(n,t,e){J=n,xk(n)}function xk(n,t,e){for(var i=(n.mode&1)!==0;J!==null;){var s=J,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Tg;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Pn;a=Tg;var c=Pn;if(Tg=o,(Pn=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?KC(s):l!==null?(l.return=o,J=l):KC(s);for(;r!==null;)J=r,xk(r),r=r.sibling;J=s,Tg=a,Pn=c}GC(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,J=r):GC(n)}}function GC(n){for(;J!==null;){var t=J;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pn||f0(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Pn)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:Zi(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&IC(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}IC(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&yf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Pn||t.flags&512&&aw(t)}catch(p){ve(t,t.return,p)}}if(t===n){J=null;break}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}}function qC(n){for(;J!==null;){var t=J;if(t===n){J=null;break}var e=t.sibling;if(e!==null){e.return=t.return,J=e;break}J=t.return}}function KC(n){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{f0(4,t)}catch(l){ve(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(l){ve(t,s,l)}}var r=t.return;try{aw(t)}catch(l){ve(t,r,l)}break;case 5:var o=t.return;try{aw(t)}catch(l){ve(t,o,l)}}}catch(l){ve(t,t.return,l)}if(t===n){J=null;break}var a=t.sibling;if(a!==null){a.return=t.return,J=a;break}J=t.return}}var pF=Math.ceil,tv=lo.ReactCurrentDispatcher,rT=lo.ReactCurrentOwner,Hi=lo.ReactCurrentBatchConfig,Rt=0,Qe=null,Re=null,dn=0,_i=0,Zc=Sa(0),$e=0,Pf=null,ic=0,p0=0,oT=0,Qd=null,Qn=null,aT=0,wh=1/0,dr=null,ev=!1,uw=null,ta=null,Sg=!1,Go=null,nv=0,Jd=0,hw=null,Yg=-1,Qg=0;function Bn(){return Rt&6?Te():Yg!==-1?Yg:Yg=Te()}function ea(n){return n.mode&1?Rt&2&&dn!==0?dn&-dn:Q5.transition!==null?(Qg===0&&(Qg=hI()),Qg):(n=Vt,n!==0||(n=window.event,n=n===void 0?16:vI(n.type)),n):1}function ys(n,t,e,i){if(50<Jd)throw Jd=0,hw=null,Error(W(185));bm(n,e,i),(!(Rt&2)||n!==Qe)&&(n===Qe&&(!(Rt&2)&&(p0|=e),$e===4&&Ao(n,dn)),si(n,i),e===1&&Rt===0&&!(t.mode&1)&&(wh=Te()+500,u0&&ba()))}function si(n,t){var e=n.callbackNode;Q6(n,t);var i=jy(n,n===Qe?dn:0);if(i===0)e!==null&&iC(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&iC(e),t===1)n.tag===0?Y5(XC.bind(null,n)):OI(XC.bind(null,n)),G5(function(){!(Rt&6)&&ba()}),e=null;else{switch(dI(i)){case 1:e=LA;break;case 4:e=cI;break;case 16:e=Vy;break;case 536870912:e=uI;break;default:e=Vy}e=Nk(e,Pk.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function Pk(n,t){if(Yg=-1,Qg=0,Rt&6)throw Error(W(327));var e=n.callbackNode;if(hu()&&n.callbackNode!==e)return null;var i=jy(n,n===Qe?dn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=iv(n,i);else{t=i;var s=Rt;Rt|=2;var r=Ik();(Qe!==n||dn!==t)&&(dr=null,wh=Te()+500,Xl(n,t));do try{yF();break}catch(a){Rk(n,a)}while(!0);GA(),tv.current=r,Rt=s,Re!==null?t=0:(Qe=null,dn=0,t=$e)}if(t!==0){if(t===2&&(s=V1(n),s!==0&&(i=s,t=dw(n,s))),t===1)throw e=Pf,Xl(n,0),Ao(n,i),si(n,Te()),e;if(t===6)Ao(n,i);else{if(s=n.current.alternate,!(i&30)&&!mF(s)&&(t=iv(n,i),t===2&&(r=V1(n),r!==0&&(i=r,t=dw(n,r))),t===1))throw e=Pf,Xl(n,0),Ao(n,i),si(n,Te()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(W(345));case 2:ja(n,Qn,dr);break;case 3:if(Ao(n,i),(i&130023424)===i&&(t=aT+500-Te(),10<t)){if(jy(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Bn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=G1(ja.bind(null,n,Qn,dr),t);break}ja(n,Qn,dr);break;case 4:if(Ao(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-gs(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=Te()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*pF(i/1960))-i,10<i){n.timeoutHandle=G1(ja.bind(null,n,Qn,dr),i);break}ja(n,Qn,dr);break;case 5:ja(n,Qn,dr);break;default:throw Error(W(329))}}}return si(n,Te()),n.callbackNode===e?Pk.bind(null,n):null}function dw(n,t){var e=Qd;return n.current.memoizedState.isDehydrated&&(Xl(n,t).flags|=256),n=iv(n,t),n!==2&&(t=Qn,Qn=e,t!==null&&fw(t)),n}function fw(n){Qn===null?Qn=n:Qn.push.apply(Qn,n)}function mF(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!_s(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ao(n,t){for(t&=~oT,t&=~p0,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-gs(t),i=1<<e;n[e]=-1,t&=~i}}function XC(n){if(Rt&6)throw Error(W(327));hu();var t=jy(n,0);if(!(t&1))return si(n,Te()),null;var e=iv(n,t);if(n.tag!==0&&e===2){var i=V1(n);i!==0&&(t=i,e=dw(n,i))}if(e===1)throw e=Pf,Xl(n,0),Ao(n,t),si(n,Te()),e;if(e===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,ja(n,Qn,dr),si(n,Te()),null}function lT(n,t){var e=Rt;Rt|=1;try{return n(t)}finally{Rt=e,Rt===0&&(wh=Te()+500,u0&&ba())}}function sc(n){Go!==null&&Go.tag===0&&!(Rt&6)&&hu();var t=Rt;Rt|=1;var e=Hi.transition,i=Vt;try{if(Hi.transition=null,Vt=1,n)return n()}finally{Vt=i,Hi.transition=e,Rt=t,!(Rt&6)&&ba()}}function cT(){_i=Zc.current,te(Zc)}function Xl(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,W5(e)),Re!==null)for(e=Re.return;e!==null;){var i=e;switch($A(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Hy();break;case 3:vh(),te(ni),te(Ln),JA();break;case 5:QA(i);break;case 4:vh();break;case 13:te(ae);break;case 19:te(ae);break;case 10:qA(i.type._context);break;case 22:case 23:cT()}e=e.return}if(Qe=n,Re=n=na(n.current,null),dn=_i=t,$e=0,Pf=null,oT=p0=ic=0,Qn=Qd=null,Ya!==null){for(t=0;t<Ya.length;t++)if(e=Ya[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}Ya=null}return n}function Rk(n,t){do{var e=Re;try{if(GA(),qg.current=Zy,Jy){for(var i=ce.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jy=!1}if(nc=0,Ye=Ue=ce=null,Xd=!1,bf=0,rT.current=null,e===null||e.return===null){$e=1,Pf=t,Re=null;break}t:{var r=n,o=e.return,a=e,l=t;if(t=dn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=FC(o);if(m!==null){m.flags&=-257,OC(m,o,a,r,t),m.mode&1&&NC(r,c,t),t=m,l=c;var g=t.updateQueue;if(g===null){var _=new Set;_.add(l),t.updateQueue=_}else g.add(l);break t}else{if(!(t&1)){NC(r,c,t),uT();break t}l=Error(W(426))}}else if(ie&&a.mode&1){var A=FC(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),OC(A,o,a,r,t),HA(_h(l,a));break t}}r=l=_h(l,a),$e!==4&&($e=2),Qd===null?Qd=[r]:Qd.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var v=dk(r,l,t);RC(r,v);break t;case 1:a=l;var w=r.type,T=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ta===null||!ta.has(T)))){r.flags|=65536,t&=-t,r.lanes|=t;var D=fk(r,a,t);RC(r,D);break t}}r=r.return}while(r!==null)}Dk(e)}catch(F){t=F,Re===e&&e!==null&&(Re=e=e.return);continue}break}while(!0)}function Ik(){var n=tv.current;return tv.current=Zy,n===null?Zy:n}function uT(){($e===0||$e===3||$e===2)&&($e=4),Qe===null||!(ic&268435455)&&!(p0&268435455)||Ao(Qe,dn)}function iv(n,t){var e=Rt;Rt|=2;var i=Ik();(Qe!==n||dn!==t)&&(dr=null,Xl(n,t));do try{gF();break}catch(s){Rk(n,s)}while(!0);if(GA(),Rt=e,tv.current=i,Re!==null)throw Error(W(261));return Qe=null,dn=0,$e}function gF(){for(;Re!==null;)kk(Re)}function yF(){for(;Re!==null&&!z6();)kk(Re)}function kk(n){var t=Mk(n.alternate,n,_i);n.memoizedProps=n.pendingProps,t===null?Dk(n):Re=t,rT.current=null}function Dk(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=uF(e,t),e!==null){e.flags&=32767,Re=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$e=6,Re=null;return}}else if(e=cF(e,t,_i),e!==null){Re=e;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=n}while(t!==null);$e===0&&($e=5)}function ja(n,t,e){var i=Vt,s=Hi.transition;try{Hi.transition=null,Vt=1,vF(n,t,e,i)}finally{Hi.transition=s,Vt=i}return null}function vF(n,t,e,i){do hu();while(Go!==null);if(Rt&6)throw Error(W(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(J6(n,r),n===Qe&&(Re=Qe=null,dn=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Sg||(Sg=!0,Nk(Vy,function(){return hu(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Hi.transition,Hi.transition=null;var o=Vt;Vt=1;var a=Rt;Rt|=4,rT.current=null,dF(n,e),Ck(e,n),V5(H1),By=!!$1,H1=$1=null,n.current=e,fF(e),$6(),Rt=a,Vt=o,Hi.transition=r}else n.current=e;if(Sg&&(Sg=!1,Go=n,nv=s),r=n.pendingLanes,r===0&&(ta=null),G6(e.stateNode),si(n,Te()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(ev)throw ev=!1,n=uw,uw=null,n;return nv&1&&n.tag!==0&&hu(),r=n.pendingLanes,r&1?n===hw?Jd++:(Jd=0,hw=n):Jd=0,ba(),null}function hu(){if(Go!==null){var n=dI(nv),t=Hi.transition,e=Vt;try{if(Hi.transition=null,Vt=16>n?16:n,Go===null)var i=!1;else{if(n=Go,Go=null,nv=0,Rt&6)throw Error(W(331));var s=Rt;for(Rt|=4,J=n.current;J!==null;){var r=J,o=r.child;if(J.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:Yd(8,u,r)}var f=u.child;if(f!==null)f.return=u,J=f;else for(;J!==null;){u=J;var p=u.sibling,m=u.return;if(Tk(u),u===c){J=null;break}if(p!==null){p.return=m,J=p;break}J=m}}}var g=r.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var A=_.sibling;_.sibling=null,_=A}while(_!==null)}}J=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,J=o;else t:for(;J!==null;){if(r=J,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Yd(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,J=v;break t}J=r.return}}var w=n.current;for(J=w;J!==null;){o=J;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,J=T;else t:for(o=w;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:f0(9,a)}}catch(F){ve(a,a.return,F)}if(a===o){J=null;break t}var D=a.sibling;if(D!==null){D.return=a.return,J=D;break t}J=a.return}}if(Rt=s,ba(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(r0,n)}catch{}i=!0}return i}finally{Vt=e,Hi.transition=t}}return!1}function YC(n,t,e){t=_h(e,t),t=dk(n,t,1),n=Zo(n,t,1),t=Bn(),n!==null&&(bm(n,1,t),si(n,t))}function ve(n,t,e){if(n.tag===3)YC(n,n,e);else for(;t!==null;){if(t.tag===3){YC(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ta===null||!ta.has(i))){n=_h(e,n),n=fk(t,n,1),t=Zo(t,n,1),n=Bn(),t!==null&&(bm(t,1,n),si(t,n));break}}t=t.return}}function _F(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=Bn(),n.pingedLanes|=n.suspendedLanes&e,Qe===n&&(dn&e)===e&&($e===4||$e===3&&(dn&130023424)===dn&&500>Te()-aT?Xl(n,0):oT|=e),si(n,t)}function Lk(n,t){t===0&&(n.mode&1?(t=pg,pg<<=1,!(pg&130023424)&&(pg=4194304)):t=1);var e=Bn();n=to(n,t),n!==null&&(bm(n,t,e),si(n,e))}function wF(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),Lk(n,e)}function EF(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(t),Lk(n,e)}var Mk;Mk=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||ni.current)Zn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Zn=!1,lF(n,t,e);Zn=!!(n.flags&131072)}else Zn=!1,ie&&t.flags&1048576&&VI(t,qy,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Xg(n,t),n=t.pendingProps;var s=mh(t,Ln.current);uu(t,e),s=tT(null,t,i,n,s,e);var r=eT();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ii(i)?(r=!0,Wy(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,XA(t),s.updater=d0,t.stateNode=s,s._reactInternals=t,Z1(t,i,n,e),t=nw(null,t,i,!0,r,e)):(t.tag=0,ie&&r&&zA(t),Vn(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Xg(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=TF(i),n=Zi(i,n),s){case 0:t=ew(null,t,i,n,e);break t;case 1:t=BC(null,t,i,n,e);break t;case 11:t=VC(null,t,i,n,e);break t;case 14:t=jC(null,t,i,Zi(i.type,n),e);break t}throw Error(W(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Zi(i,s),ew(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Zi(i,s),BC(n,t,i,s,e);case 3:t:{if(yk(t),n===null)throw Error(W(387));i=t.pendingProps,r=t.memoizedState,s=r.element,HI(n,t),Yy(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=_h(Error(W(423)),t),t=UC(n,t,i,e,s);break t}else if(i!==s){s=_h(Error(W(424)),t),t=UC(n,t,i,e,s);break t}else for(Ei=Jo(t.stateNode.containerInfo.firstChild),Ti=t,ie=!0,ms=null,e=zI(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(gh(),i===s){t=eo(n,t,e);break t}Vn(n,t,i,e)}t=t.child}return t;case 5:return WI(t),n===null&&Y1(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,W1(i,s)?o=null:r!==null&&W1(i,r)&&(t.flags|=32),gk(n,t),Vn(n,t,o,e),t.child;case 6:return n===null&&Y1(t),null;case 13:return vk(n,t,e);case 4:return YA(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=yh(t,null,i,e):Vn(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Zi(i,s),VC(n,t,i,s,e);case 7:return Vn(n,t,t.pendingProps,e),t.child;case 8:return Vn(n,t,t.pendingProps.children,e),t.child;case 12:return Vn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Xt(Ky,i._currentValue),i._currentValue=o,r!==null)if(_s(r.value,o)){if(r.children===s.children&&!ni.current){t=eo(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Wr(-1,e&-e),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=e,l=r.alternate,l!==null&&(l.lanes|=e),Q1(r.return,e,t),a.lanes|=e;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(W(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),Q1(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Vn(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,uu(t,e),s=Wi(s),i=i(s),t.flags|=1,Vn(n,t,i,e),t.child;case 14:return i=t.type,s=Zi(i,t.pendingProps),s=Zi(i.type,s),jC(n,t,i,s,e);case 15:return pk(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Zi(i,s),Xg(n,t),t.tag=1,ii(i)?(n=!0,Wy(t)):n=!1,uu(t,e),hk(t,i,s),Z1(t,i,s,e),nw(null,t,i,!0,n,e);case 19:return _k(n,t,e);case 22:return mk(n,t,e)}throw Error(W(156,t.tag))};function Nk(n,t){return lI(n,t)}function AF(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(n,t,e,i){return new AF(n,t,e,i)}function hT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function TF(n){if(typeof n=="function")return hT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===IA)return 11;if(n===kA)return 14}return 2}function na(n,t){var e=n.alternate;return e===null?(e=$i(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Jg(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")hT(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case $c:return Yl(e.children,s,r,t);case RA:o=8,s|=8;break;case T1:return n=$i(12,e,t,s|2),n.elementType=T1,n.lanes=r,n;case S1:return n=$i(13,e,t,s),n.elementType=S1,n.lanes=r,n;case b1:return n=$i(19,e,t,s),n.elementType=b1,n.lanes=r,n;case WR:return m0(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $R:o=10;break t;case HR:o=9;break t;case IA:o=11;break t;case kA:o=14;break t;case _o:o=16,i=null;break t}throw Error(W(130,n==null?n:typeof n,""))}return t=$i(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function Yl(n,t,e,i){return n=$i(7,n,i,t),n.lanes=e,n}function m0(n,t,e,i){return n=$i(22,n,i,t),n.elementType=WR,n.lanes=e,n.stateNode={isHidden:!1},n}function W_(n,t,e){return n=$i(6,n,null,t),n.lanes=e,n}function G_(n,t,e){return t=$i(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function SF(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C_(0),this.expirationTimes=C_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C_(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dT(n,t,e,i,s,r,o,a,l){return n=new SF(n,t,e,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=$i(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},XA(r),n}function bF(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zc,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function Fk(n){if(!n)return ua;n=n._reactInternals;t:{if(pc(n)!==n||n.tag!==1)throw Error(W(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(W(171))}if(n.tag===1){var e=n.type;if(ii(e))return FI(n,e,t)}return t}function Ok(n,t,e,i,s,r,o,a,l){return n=dT(e,i,!0,n,s,r,o,a,l),n.context=Fk(null),e=n.current,i=Bn(),s=ea(e),r=Wr(i,s),r.callback=t??null,Zo(e,r,s),n.current.lanes=s,bm(n,s,i),si(n,i),n}function g0(n,t,e,i){var s=t.current,r=Bn(),o=ea(s);return e=Fk(e),t.context===null?t.context=e:t.pendingContext=e,t=Wr(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=Zo(s,t,o),n!==null&&(ys(n,s,o,r),Gg(n,s,o)),o}function sv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function QC(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function fT(n,t){QC(n,t),(n=n.alternate)&&QC(n,t)}function CF(){return null}var Vk=typeof reportError=="function"?reportError:function(n){console.error(n)};function pT(n){this._internalRoot=n}y0.prototype.render=pT.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(W(409));g0(n,t,null,null)};y0.prototype.unmount=pT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;sc(function(){g0(null,n,null,null)}),t[Zr]=null}};function y0(n){this._internalRoot=n}y0.prototype.unstable_scheduleHydration=function(n){if(n){var t=mI();n={blockedOn:null,target:n,priority:t};for(var e=0;e<Eo.length&&t!==0&&t<Eo[e].priority;e++);Eo.splice(e,0,n),e===0&&yI(n)}};function mT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function v0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function JC(){}function xF(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=sv(o);r.call(c)}}var o=Ok(t,i,n,0,null,!1,!1,"",JC);return n._reactRootContainer=o,n[Zr]=o.current,wf(n.nodeType===8?n.parentNode:n),sc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=sv(l);a.call(c)}}var l=dT(n,0,!1,null,null,!1,!1,"",JC);return n._reactRootContainer=l,n[Zr]=l.current,wf(n.nodeType===8?n.parentNode:n),sc(function(){g0(t,l,e,i)}),l}function _0(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=sv(o);a.call(l)}}g0(t,o,n,s)}else o=xF(e,t,n,s,i);return sv(o)}fI=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=_d(t.pendingLanes);e!==0&&(MA(t,e|1),si(t,Te()),!(Rt&6)&&(wh=Te()+500,ba()))}break;case 13:sc(function(){var i=to(n,1);if(i!==null){var s=Bn();ys(i,n,1,s)}}),fT(n,1)}};NA=function(n){if(n.tag===13){var t=to(n,134217728);if(t!==null){var e=Bn();ys(t,n,134217728,e)}fT(n,134217728)}};pI=function(n){if(n.tag===13){var t=ea(n),e=to(n,t);if(e!==null){var i=Bn();ys(e,n,t,i)}fT(n,t)}};mI=function(){return Vt};gI=function(n,t){var e=Vt;try{return Vt=n,t()}finally{Vt=e}};N1=function(n,t,e){switch(t){case"input":if(P1(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=c0(i);if(!s)throw Error(W(90));qR(i),P1(i,s)}}}break;case"textarea":XR(n,e);break;case"select":t=e.value,t!=null&&ou(n,!!e.multiple,t,!1)}};nI=lT;iI=sc;var PF={usingClientEntryPoint:!1,Events:[xm,qc,c0,tI,eI,lT]},hd={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RF={bundleType:hd.bundleType,version:hd.version,rendererPackageName:hd.rendererPackageName,rendererConfig:hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oI(n),n===null?null:n.stateNode},findFiberByHostInstance:hd.findFiberByHostInstance||CF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{r0=bg.inject(RF),Gs=bg}catch{}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PF;xi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mT(t))throw Error(W(200));return bF(n,t,null,e)};xi.createRoot=function(n,t){if(!mT(n))throw Error(W(299));var e=!1,i="",s=Vk;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dT(n,1,!1,null,null,e,!1,i,s),n[Zr]=t.current,wf(n.nodeType===8?n.parentNode:n),new pT(t)};xi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=oI(t),n=n===null?null:n.stateNode,n};xi.flushSync=function(n){return sc(n)};xi.hydrate=function(n,t,e){if(!v0(t))throw Error(W(200));return _0(null,n,t,!0,e)};xi.hydrateRoot=function(n,t,e){if(!mT(n))throw Error(W(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=Vk;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=Ok(t,null,n,1,e??null,s,!1,r,o),n[Zr]=t.current,wf(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new y0(t)};xi.render=function(n,t,e){if(!v0(t))throw Error(W(200));return _0(null,n,t,!1,e)};xi.unmountComponentAtNode=function(n){if(!v0(n))throw Error(W(40));return n._reactRootContainer?(sc(function(){_0(null,null,n,!1,function(){n._reactRootContainer=null,n[Zr]=null})}),!0):!1};xi.unstable_batchedUpdates=lT;xi.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!v0(e))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return _0(n,t,e,!1,i)};xi.version="18.3.1-next-f1338f8080-20240426";function jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jk)}catch(n){console.error(n)}}jk(),jR.exports=xi;var IF=jR.exports,ZC=IF;E1.createRoot=ZC.createRoot,E1.hydrateRoot=ZC.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rf(){return Rf=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Rf.apply(this,arguments)}var qo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qo||(qo={}));const tx="popstate";function kF(n){n===void 0&&(n={});function t(i,s){let{pathname:r,search:o,hash:a}=i.location;return pw("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:rv(s)}return LF(t,e,null,n)}function Le(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Bk(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DF(){return Math.random().toString(36).substr(2,8)}function ex(n,t){return{usr:n.state,key:n.key,idx:t}}function pw(n,t,e,i){return e===void 0&&(e=null),Rf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?Mh(t):t,{state:e,key:t&&t.key||i||DF()})}function rv(n){let{pathname:t="/",search:e="",hash:i=""}=n;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Mh(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substr(i),n=n.substr(0,i)),n&&(t.pathname=n)}return t}function LF(n,t,e,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=qo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Rf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=qo.Pop;let A=u(),v=A==null?null:A-c;c=A,l&&l({action:a,location:_.location,delta:v})}function p(A,v){a=qo.Push;let w=pw(_.location,A,v);c=u()+1;let T=ex(w,c),D=_.createHref(w);try{o.pushState(T,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}r&&l&&l({action:a,location:_.location,delta:1})}function m(A,v){a=qo.Replace;let w=pw(_.location,A,v);c=u();let T=ex(w,c),D=_.createHref(w);o.replaceState(T,"",D),r&&l&&l({action:a,location:_.location,delta:0})}function g(A){let v=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof A=="string"?A:rv(A);return w=w.replace(/ $/,"%20"),Le(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let _={get action(){return a},get location(){return n(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tx,f),l=A,()=>{s.removeEventListener(tx,f),l=null}},createHref(A){return t(s,A)},createURL:g,encodeLocation(A){let v=g(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(A){return o.go(A)}};return _}var nx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(nx||(nx={}));function MF(n,t,e){return e===void 0&&(e="/"),NF(n,t,e,!1)}function NF(n,t,e,i){let s=typeof t=="string"?Mh(t):t,r=gT(s.pathname||"/",e);if(r==null)return null;let o=Uk(n);FF(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=qF(r);a=WF(o[l],c,i)}return a}function Uk(n,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Le(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ia([i,l.relativePath]),u=e.concat(l);r.children&&r.children.length>0&&(Le(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Uk(r.children,t,u,c)),!(r.path==null&&!r.index)&&t.push({path:c,score:$F(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of zk(r.path))s(r,o,l)}),t}function zk(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=zk(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function FF(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:HF(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const OF=/^:[\w-]+$/,VF=3,jF=2,BF=1,UF=10,zF=-2,ix=n=>n==="*";function $F(n,t){let e=n.split("/"),i=e.length;return e.some(ix)&&(i+=zF),t&&(i+=jF),e.filter(s=>!ix(s)).reduce((s,r)=>s+(OF.test(r)?VF:r===""?BF:UF),i)}function HF(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function WF(n,t,e){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?t:t.slice(r.length)||"/",f=sx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&e&&!i[i.length-1].route.index&&(f=sx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ia([r,f.pathname]),pathnameBase:QF(ia([r,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(r=ia([r,f.pathnameBase]))}return o}function sx(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=GF(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=r.slice(0,r.length-_.length).replace(/(.)\/+$/,"$1")}const g=a[f];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function GF(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Bk(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function qF(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bk(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function gT(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function KF(n,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Mh(n):n;return{pathname:e?e.startsWith("/")?e:XF(e,t):t,search:JF(i),hash:ZF(s)}}function XF(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function q_(n,t,e,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YF(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function $k(n,t){let e=YF(n);return t?e.map((i,s)=>s===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function Hk(n,t,e,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Mh(n):(s=Rf({},n),Le(!s.pathname||!s.pathname.includes("?"),q_("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),q_("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),q_("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=e;else{let f=t.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=KF(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ia=n=>n.join("/").replace(/\/\/+/g,"/"),QF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Wk=["post","put","patch","delete"];new Set(Wk);const eO=["get",...Wk];new Set(eO);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},If.apply(this,arguments)}const yT=j.createContext(null),nO=j.createContext(null),mc=j.createContext(null),w0=j.createContext(null),gc=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Gk=j.createContext(null);function iO(n,t){let{relative:e}=t===void 0?{}:t;Rm()||Le(!1);let{basename:i,navigator:s}=j.useContext(mc),{hash:r,pathname:o,search:a}=Kk(n,{relative:e}),l=o;return i!=="/"&&(l=o==="/"?i:ia([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Rm(){return j.useContext(w0)!=null}function E0(){return Rm()||Le(!1),j.useContext(w0).location}function qk(n){j.useContext(mc).static||j.useLayoutEffect(n)}function sO(){let{isDataRoute:n}=j.useContext(gc);return n?yO():rO()}function rO(){Rm()||Le(!1);let n=j.useContext(yT),{basename:t,future:e,navigator:i}=j.useContext(mc),{matches:s}=j.useContext(gc),{pathname:r}=E0(),o=JSON.stringify($k(s,e.v7_relativeSplatPath)),a=j.useRef(!1);return qk(()=>{a.current=!0}),j.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=Hk(c,JSON.parse(o),r,u.relative==="path");n==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ia([t,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[t,i,o,r,n])}function Kk(n,t){let{relative:e}=t===void 0?{}:t,{future:i}=j.useContext(mc),{matches:s}=j.useContext(gc),{pathname:r}=E0(),o=JSON.stringify($k(s,i.v7_relativeSplatPath));return j.useMemo(()=>Hk(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function oO(n,t){return aO(n,t)}function aO(n,t,e,i){Rm()||Le(!1);let{navigator:s}=j.useContext(mc),{matches:r}=j.useContext(gc),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=E0(),u;if(t){var f;let A=typeof t=="string"?Mh(t):t;l==="/"||(f=A.pathname)!=null&&f.startsWith(l)||Le(!1),u=A}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let g=MF(n,{pathname:m}),_=dO(g&&g.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:ia([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:ia([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),r,e,i);return t&&_?j.createElement(w0.Provider,{value:{location:If({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qo.Pop}},_):_}function lO(){let n=gO(),t=tO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),e?j.createElement("pre",{style:s},e):null,null)}const cO=j.createElement(lO,null);class uO extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?j.createElement(gc.Provider,{value:this.props.routeContext},j.createElement(Gk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hO(n){let{routeContext:t,match:e,children:i}=n,s=j.useContext(yT);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(gc.Provider,{value:t},i)}function dO(n,t,e,i){var s;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),n==null){var r;if((r=e)!=null&&r.errors)n=e.matches;else return null}let o=n,a=(s=e)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Le(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(e&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=e,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,g=!1,_=null,A=null;e&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||cO,l&&(c<0&&p===0?(g=!0,A=null):c===p&&(g=!0,A=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,p+1)),w=()=>{let T;return m?T=_:g?T=A:f.route.Component?T=j.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=u,j.createElement(hO,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:e!=null},children:T})};return e&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?j.createElement(uO,{location:e.location,revalidation:e.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var Xk=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Xk||{}),ov=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ov||{});function fO(n){let t=j.useContext(yT);return t||Le(!1),t}function pO(n){let t=j.useContext(nO);return t||Le(!1),t}function mO(n){let t=j.useContext(gc);return t||Le(!1),t}function Yk(n){let t=mO(),e=t.matches[t.matches.length-1];return e.route.id||Le(!1),e.route.id}function gO(){var n;let t=j.useContext(Gk),e=pO(ov.UseRouteError),i=Yk(ov.UseRouteError);return t!==void 0?t:(n=e.errors)==null?void 0:n[i]}function yO(){let{router:n}=fO(Xk.UseNavigateStable),t=Yk(ov.UseNavigateStable),e=j.useRef(!1);return qk(()=>{e.current=!0}),j.useCallback(function(s,r){r===void 0&&(r={}),e.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,If({fromRouteId:t},r)))},[n,t])}function Ed(n){Le(!1)}function vO(n){let{basename:t="/",children:e=null,location:i,navigationType:s=qo.Pop,navigator:r,static:o=!1,future:a}=n;Rm()&&Le(!1);let l=t.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:l,navigator:r,static:o,future:If({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Mh(i));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:g="default"}=i,_=j.useMemo(()=>{let A=gT(u,l);return A==null?null:{location:{pathname:A,search:f,hash:p,state:m,key:g},navigationType:s}},[l,u,f,p,m,g,s]);return _==null?null:j.createElement(mc.Provider,{value:c},j.createElement(w0.Provider,{children:e,value:_}))}function _O(n){let{children:t,location:e}=n;return oO(mw(t),e)}new Promise(()=>{});function mw(n,t){t===void 0&&(t=[]);let e=[];return j.Children.forEach(n,(i,s)=>{if(!j.isValidElement(i))return;let r=[...t,s];if(i.type===j.Fragment){e.push.apply(e,mw(i.props.children,r));return}i.type!==Ed&&Le(!1),!i.props.index||!i.props.children||Le(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=mw(i.props.children,r)),e.push(o)}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gw(){return gw=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},gw.apply(this,arguments)}function wO(n,t){if(n==null)return{};var e={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&(e[s]=n[s]);return e}function EO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function AO(n,t){return n.button===0&&(!t||t==="_self")&&!EO(n)}const TO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],SO="6";try{window.__reactRouterVersion=SO}catch{}const bO="startTransition",rx=_6[bO];function CO(n){let{basename:t,children:e,future:i,window:s}=n,r=j.useRef();r.current==null&&(r.current=kF({window:s,v5Compat:!0}));let o=r.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=j.useCallback(f=>{c&&rx?rx(()=>l(f)):l(f)},[l,c]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.createElement(vO,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o,future:i})}const xO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qk=j.forwardRef(function(t,e){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=t,p=wO(t,TO),{basename:m}=j.useContext(mc),g,_=!1;if(typeof c=="string"&&PO.test(c)&&(g=c,xO))try{let T=new URL(window.location.href),D=c.startsWith("//")?new URL(T.protocol+c):new URL(c),F=gT(D.pathname,m);D.origin===T.origin&&F!=null?c=F+D.search+D.hash:_=!0}catch{}let A=iO(c,{relative:s}),v=RO(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,unstable_viewTransition:f});function w(T){i&&i(T),T.defaultPrevented||v(T)}return j.createElement("a",gw({},p,{href:g||A,onClick:_||r?i:w,ref:e,target:l}))});var ox;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ox||(ox={}));var ax;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ax||(ax={}));function RO(n,t){let{target:e,replace:i,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,l=sO(),c=E0(),u=Kk(n,{relative:o});return j.useCallback(f=>{if(AO(f,e)){f.preventDefault();let p=i!==void 0?i:rv(c)===rv(u);l(n,{replace:p,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a})}},[c,l,u,i,s,e,n,r,o,a])}const IO="modulepreload",kO=function(n,t){return new URL(n,t).href},lx={},Cg=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(e.map(l=>{if(l=kO(l,i),l in lx)return;lx[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!i)for(let m=r.length-1;m>=0;m--){const g=r[m];if(g.href===l&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":IO,c||(p.as="script",p.crossOrigin=""),p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var Zd={};Zd.d=(n,t)=>{for(var e in t)Zd.o(t,e)&&!Zd.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Zd.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var ut=globalThis.pdfjsLib={};Zd.d(ut,{AbortException:()=>vc,AnnotationEditorLayer:()=>CE,AnnotationEditorParamsType:()=>dt,AnnotationEditorType:()=>Ct,AnnotationEditorUIManager:()=>oc,AnnotationLayer:()=>R9,AnnotationMode:()=>To,CMapCompressionType:()=>vw,ColorPicker:()=>fv,DOMSVGFactory:()=>wT,DrawLayer:()=>IE,FeatureTest:()=>ti,GlobalWorkerOptions:()=>Gr,ImageKind:()=>Zg,InvalidPDFException:()=>Zk,MissingPDFException:()=>yc,OPS:()=>ts,Outliner:()=>aE,PDFDataRangeTransport:()=>KD,PDFDateString:()=>oD,PDFWorker:()=>fu,PasswordResponses:()=>NO,PermissionFlag:()=>MO,PixelsPerInch:()=>ha,RenderingCancelledException:()=>ET,TextLayer:()=>hv,UnexpectedResponseException:()=>b0,Util:()=>nt,VerbosityLevel:()=>A0,XfaLayer:()=>YD,build:()=>c9,createValidAbsoluteUrl:()=>jO,fetchData:()=>I0,getDocument:()=>t9,getFilenameFromUrl:()=>XO,getPdfFilenameFromUrl:()=>YO,getXfaPageViewport:()=>QO,isDataScheme:()=>AT,isPdfFile:()=>TT,noContextMenu:()=>ri,normalizeUnicode:()=>WO,renderTextLayer:()=>WV,setLayerDimensions:()=>rc,shadow:()=>Pt,updateTextLayer:()=>GV,version:()=>l9});const kn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Jk=[1,0,0,1,0,0],yw=[.001,0,0,.001,0,0],DO=1e7,K_=1.35,Oi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},To={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},LO="pdfjs_internal_editor_",Ct={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},dt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},MO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},An={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ne={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},dd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},A0={ERRORS:0,WARNINGS:1,INFOS:5},vw={NONE:0,BINARY:1},ts={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},NO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let T0=A0.WARNINGS;function FO(n){Number.isInteger(n)&&(T0=n)}function OO(){return T0}function S0(n){T0>=A0.INFOS&&console.log(`Info: ${n}`)}function vt(n){T0>=A0.WARNINGS&&console.log(`Warning: ${n}`)}function Bt(n){throw new Error(n)}function ze(n,t){n||Bt(t)}function VO(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function jO(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=HO(n)}catch{}}const i=t?new URL(n,t):new URL(n);if(VO(i))return i}catch{}return null}function Pt(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Ca=function(){function t(e,i){this.constructor===t&&Bt("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class _w extends Ca{constructor(t,e){super(t,"PasswordException"),this.code=e}}class ww extends Ca{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Zk extends Ca{constructor(t){super(t,"InvalidPDFException")}}class yc extends Ca{constructor(t){super(t,"MissingPDFException")}}class b0 extends Ca{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class BO extends Ca{constructor(t){super(t,"FormatError")}}class vc extends Ca{constructor(t){super(t,"AbortException")}}function tD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Bt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function C0(n){typeof n!="string"&&Bt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function UO(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function vT(n){const t=Object.create(null);for(const[e,i]of n)t[e]=i;return t}function zO(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function $O(){try{return new Function(""),!0}catch{return!1}}class ti{static get isLittleEndian(){return Pt(this,"isLittleEndian",zO())}static get isEvalSupported(){return Pt(this,"isEvalSupported",$O())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Pt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Pt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Pt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const X_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Yr,ty,Ew;class nt{static makeHexColor(t,e,i){return`#${X_[t]}${X_[e]}${X_[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static bezierBoundingBox(t,e,i,s,r,o,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],C(this,Yr,Ew).call(this,t,i,r,a,e,s,o,l,3*(-t+3*(i-r)+a),6*(t-2*i+r),3*(i-t),c),C(this,Yr,Ew).call(this,t,i,r,a,e,s,o,l,3*(-e+3*(s-o)+l),6*(e-2*s+o),3*(s-e),c),c}}Yr=new WeakSet,ty=function(t,e,i,s,r,o,a,l,c,u){if(c<=0||c>=1)return;const f=1-c,p=c*c,m=p*c,g=f*(f*(f*t+3*c*e)+3*p*i)+m*s,_=f*(f*(f*r+3*c*o)+3*p*a)+m*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],_),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],_)},Ew=function(t,e,i,s,r,o,a,l,c,u,f,p){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&C(this,Yr,ty).call(this,t,e,i,s,r,o,a,l,-f/u,p);return}const m=u**2-4*f*c;if(m<0)return;const g=Math.sqrt(m),_=2*c;C(this,Yr,ty).call(this,t,e,i,s,r,o,a,l,(-u+g)/_,p),C(this,Yr,ty).call(this,t,e,i,s,r,o,a,l,(-u-g)/_,p)},x(nt,Yr);function HO(n){return decodeURIComponent(escape(n))}let Y_=null,cx=null;function WO(n){return Y_||(Y_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,cx=new Map([["","t"]])),n.replaceAll(Y_,(t,e,i)=>e?e.normalize("NFKC"):cx.get(i))}function GO(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let t=0;t<32;t++)n[t]=Math.floor(Math.random()*255);return tD(n)}const eD="pdfjs_internal_id_",cr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class x0{constructor(){this.constructor===x0&&Bt("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var Gf;const qS=class qS{constructor({enableHWA:t=!1}={}){x(this,Gf,!1);this.constructor===qS&&Bt("Cannot initialize BaseCanvasFactory."),b(this,Gf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!h(this,Gf)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Bt("Abstract method `_createCanvas` called.")}};Gf=new WeakMap;let av=qS;class P0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===P0&&Bt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?vw.BINARY:vw.NONE;return this._fetchData(e,i).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Bt("Abstract method `_fetchData` called.")}}class R0{constructor({baseUrl:t=null}){this.constructor===R0&&Bt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Bt("Abstract method `_fetchData` called.")}}class _T{constructor(){this.constructor===_T&&Bt("Cannot initialize BaseSVGFactory.")}create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Bt("Abstract method `_createSVG` called.")}}const hr="http://www.w3.org/2000/svg",qa=class qa{};mt(qa,"CSS",96),mt(qa,"PDF",72),mt(qa,"PDF_TO_CSS_UNITS",qa.CSS/qa.PDF);let ha=qa;var tl,Ps,vr,qn,jv,el,et,Tn,Dc,Lc,ey,nD,Aw,Mc,Ad,Td,Tw,Sd;class qO extends x0{constructor({docId:e,ownerDocument:i=globalThis.document}={}){super();x(this,et);x(this,tl);x(this,Ps);x(this,vr);x(this,qn);x(this,jv);x(this,el,0);b(this,vr,e),b(this,qn,i)}addFilter(e){if(!e)return"none";let i=h(this,et,Tn).get(e);if(i)return i;const[s,r,o]=C(this,et,ey).call(this,e),a=e.length===1?s:`${s}${r}${o}`;if(i=h(this,et,Tn).get(a),i)return h(this,et,Tn).set(e,i),i;const l=`g_${h(this,vr)}_transfer_map_${li(this,el)._++}`,c=`url(#${l})`;h(this,et,Tn).set(e,c),h(this,et,Tn).set(a,c);const u=C(this,et,Mc).call(this,l);return C(this,et,Td).call(this,s,r,o,u),c}addHCMFilter(e,i){var g;const s=`${e}-${i}`,r="base";let o=h(this,et,Dc).get(r);if((o==null?void 0:o.key)===s||(o?((g=o.filter)==null||g.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},h(this,et,Dc).set(r,o)),!e||!i))return o.url;const a=C(this,et,Sd).call(this,e);e=nt.makeHexColor(...a);const l=C(this,et,Sd).call(this,i);if(i=nt.makeHexColor(...l),h(this,et,Lc).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const c=new Array(256);for(let _=0;_<=255;_++){const A=_/255;c[_]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const u=c.join(","),f=`g_${h(this,vr)}_hcm_filter`,p=o.filter=C(this,et,Mc).call(this,f);C(this,et,Td).call(this,u,u,u,p),C(this,et,Aw).call(this,p);const m=(_,A)=>{const v=a[_]/255,w=l[_]/255,T=new Array(A+1);for(let D=0;D<=A;D++)T[D]=v+D/A*(w-v);return T.join(",")};return C(this,et,Td).call(this,m(0,5),m(1,5),m(2,5),p),o.url=`url(#${f})`,o.url}addAlphaFilter(e){let i=h(this,et,Tn).get(e);if(i)return i;const[s]=C(this,et,ey).call(this,[e]),r=`alpha_${s}`;if(i=h(this,et,Tn).get(r),i)return h(this,et,Tn).set(e,i),i;const o=`g_${h(this,vr)}_alpha_map_${li(this,el)._++}`,a=`url(#${o})`;h(this,et,Tn).set(e,a),h(this,et,Tn).set(r,a);const l=C(this,et,Mc).call(this,o);return C(this,et,Tw).call(this,s,l),a}addLuminosityFilter(e){let i=h(this,et,Tn).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=C(this,et,ey).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=h(this,et,Tn).get(r),i)return h(this,et,Tn).set(e,i),i;const o=`g_${h(this,vr)}_luminosity_map_${li(this,el)._++}`,a=`url(#${o})`;h(this,et,Tn).set(e,a),h(this,et,Tn).set(r,a);const l=C(this,et,Mc).call(this,o);return C(this,et,nD).call(this,l),e&&C(this,et,Tw).call(this,s,l),a}addHighlightHCMFilter(e,i,s,r,o){var w;const a=`${i}-${s}-${r}-${o}`;let l=h(this,et,Dc).get(e);if((l==null?void 0:l.key)===a||(l?((w=l.filter)==null||w.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,et,Dc).set(e,l)),!i||!s))return l.url;const[c,u]=[i,s].map(C(this,et,Sd).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,g]=[r,o].map(C(this,et,Sd).bind(this));p<f&&([f,p,m,g]=[p,f,g,m]),h(this,et,Lc).style.color="";const _=(T,D,F)=>{const O=new Array(256),P=(p-f)/F,S=T/255,R=(D-T)/(255*F);let k=0;for(let M=0;M<=F;M++){const V=Math.round(f+M*P),L=S+M*R;for(let Z=k;Z<=V;Z++)O[Z]=L;k=V+1}for(let M=k;M<256;M++)O[M]=O[k-1];return O.join(",")},A=`g_${h(this,vr)}_hcm_${e}_filter`,v=l.filter=C(this,et,Mc).call(this,A);return C(this,et,Aw).call(this,v),C(this,et,Td).call(this,_(m[0],g[0],5),_(m[1],g[1],5),_(m[2],g[2],5),v),l.url=`url(#${A})`,l.url}destroy(e=!1){e&&h(this,et,Dc).size!==0||(h(this,Ps)&&(h(this,Ps).parentNode.parentNode.remove(),b(this,Ps,null)),h(this,tl)&&(h(this,tl).clear(),b(this,tl,null)),b(this,el,0))}}tl=new WeakMap,Ps=new WeakMap,vr=new WeakMap,qn=new WeakMap,jv=new WeakMap,el=new WeakMap,et=new WeakSet,Tn=function(){return h(this,tl)||b(this,tl,new Map)},Dc=function(){return h(this,jv)||b(this,jv,new Map)},Lc=function(){if(!h(this,Ps)){const e=h(this,qn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=h(this,qn).createElementNS(hr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,Ps,h(this,qn).createElementNS(hr,"defs")),e.append(s),s.append(h(this,Ps)),h(this,qn).body.append(e)}return h(this,Ps)},ey=function(e){if(e.length===1){const c=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const f=u.join(",");return[f,f,f]}const[i,s,r]=e,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=i[c]/255,a[c]=s[c]/255,l[c]=r[c]/255;return[o.join(","),a.join(","),l.join(",")]},nD=function(e){const i=h(this,qn).createElementNS(hr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Aw=function(e){const i=h(this,qn).createElementNS(hr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Mc=function(e){const i=h(this,qn).createElementNS(hr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),h(this,et,Lc).append(i),i},Ad=function(e,i,s){const r=h(this,qn).createElementNS(hr,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Td=function(e,i,s,r){const o=h(this,qn).createElementNS(hr,"feComponentTransfer");r.append(o),C(this,et,Ad).call(this,o,"feFuncR",e),C(this,et,Ad).call(this,o,"feFuncG",i),C(this,et,Ad).call(this,o,"feFuncB",s)},Tw=function(e,i){const s=h(this,qn).createElementNS(hr,"feComponentTransfer");i.append(s),C(this,et,Ad).call(this,s,"feFuncA",e)},Sd=function(e){return h(this,et,Lc).style.color=e,ST(getComputedStyle(h(this,et,Lc)).getPropertyValue("color"))};class KO extends av{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function I0(n,t="text"){if(bd(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class iD extends P0{_fetchData(t,e){return I0(t,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):C0(i),compressionType:e}))}}class sD extends R0{_fetchData(t){return I0(t,"arraybuffer").then(e=>new Uint8Array(e))}}class wT extends _T{_createSVG(t){return document.createElementNS(hr,t)}}class Im{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=r;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,u,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,f=0,p=1;break;case 90:c=0,u=1,f=1,p=0;break;case 270:c=0,u=-1,f=-1,p=0;break;case 0:c=1,u=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,g,_,A;c===0?(m=Math.abs(l-t[1])*e+s,g=Math.abs(a-t[0])*e+r,_=(t[3]-t[1])*e,A=(t[2]-t[0])*e):(m=Math.abs(a-t[0])*e+s,g=Math.abs(l-t[1])*e+r,_=(t[2]-t[0])*e,A=(t[3]-t[1])*e),this.transform=[c*e,u*e,f*e,p*e,m-c*e*a-f*e*l,g-u*e*a-p*e*l],this.width=_,this.height=A}get rawDims(){const{viewBox:t}=this;return Pt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Im({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return nt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=nt.applyTransform([t[0],t[1]],this.transform),i=nt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return nt.applyInverseTransform([t,e],this.transform)}}class ET extends Ca{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function AT(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function TT(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function XO(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function YO(n,t="document.pdf"){if(typeof n!="string")return t;if(AT(n))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class ux{constructor(){mt(this,"started",Object.create(null));mt(this,"times",[])}time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function bd(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function ri(n){n.preventDefault()}function rD(n){console.log("Deprecated API usage: "+n)}let hx;class oD{static toDateObject(t){if(!t||typeof t!="string")return null;hx||(hx=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=hx.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=u,a+=f):c==="+"&&(o-=u,a-=f),new Date(Date.UTC(i,s,r,o,a,l))}}function QO(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Im({viewBox:r,scale:t,rotation:e})}function ST(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${n}"`),[0,0,0])}function JO(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,ST(i))}t.remove()}function oe(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function ur(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function rc(n,t,e=!1,i=!0){if(t instanceof Im){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,a=ti.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${r}px`,u=a?`round(${l}, 1px)`:`calc(${l})`,f=a?`round(${c}, 1px)`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}i&&n.setAttribute("data-main-rotation",t.rotation)}var nl,il,hi,sl,Bv,aD,Un,lD,cD,ny,uD,bw;const Uv=class Uv{constructor(t){x(this,Un);x(this,nl,null);x(this,il,null);x(this,hi);x(this,sl,null);b(this,hi,t)}render(){const t=b(this,nl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=h(this,hi)._uiManager._signal;t.addEventListener("contextmenu",ri,{signal:e}),t.addEventListener("pointerdown",C(Uv,Bv,aD),{signal:e});const i=b(this,sl,document.createElement("div"));i.className="buttons",t.append(i);const s=h(this,hi).toolbarPosition;if(s){const{style:r}=t,o=h(this,hi)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,Un,uD).call(this),t}hide(){var t;h(this,nl).classList.add("hidden"),(t=h(this,il))==null||t.hideDropdown()}show(){h(this,nl).classList.remove("hidden")}addAltTextButton(t){C(this,Un,ny).call(this,t),h(this,sl).prepend(t,h(this,Un,bw))}addColorPicker(t){b(this,il,t);const e=t.renderButton();C(this,Un,ny).call(this,e),h(this,sl).prepend(e,h(this,Un,bw))}remove(){var t;h(this,nl).remove(),(t=h(this,il))==null||t.destroy(),b(this,il,null)}};nl=new WeakMap,il=new WeakMap,hi=new WeakMap,sl=new WeakMap,Bv=new WeakSet,aD=function(t){t.stopPropagation()},Un=new WeakSet,lD=function(t){h(this,hi)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},cD=function(t){h(this,hi)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},ny=function(t){const e=h(this,hi)._uiManager._signal;t.addEventListener("focusin",C(this,Un,lD).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,Un,cD).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ri,{signal:e})},uD=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${h(this,hi).editorType}-button`),C(this,Un,ny).call(this,t),t.addEventListener("click",e=>{h(this,hi)._uiManager.delete()},{signal:h(this,hi)._uiManager._signal}),h(this,sl).append(t)},bw=function(){const t=document.createElement("div");return t.className="divider",t},x(Uv,Bv);let Sw=Uv;var qf,rl,ol,Ea,hD,dD,fD;class ZO{constructor(t){x(this,Ea);x(this,qf,null);x(this,rl,null);x(this,ol);b(this,ol,t)}show(t,e,i){const[s,r]=C(this,Ea,dD).call(this,e,i),{style:o}=h(this,rl)||b(this,rl,C(this,Ea,hD).call(this));t.append(h(this,rl)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,rl).remove()}}qf=new WeakMap,rl=new WeakMap,ol=new WeakMap,Ea=new WeakSet,hD=function(){const t=b(this,rl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ri,{signal:h(this,ol)._signal});const e=b(this,qf,document.createElement("div"));return e.className="buttons",t.append(e),C(this,Ea,fD).call(this),t},dD=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const a=r.x+(e?r.width:0);if(o>i){s=a,i=o;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,i]},fD=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=h(this,ol)._signal;t.addEventListener("contextmenu",ri,{signal:i}),t.addEventListener("click",()=>{h(this,ol).highlightSelection("floating_button")},{signal:i}),h(this,qf).append(t)};function lv(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}function tV(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var zv;class eV{constructor(){x(this,zv,0)}get id(){return`${LO}${li(this,zv)._++}`}}zv=new WeakMap;var Kf,$v,Li,Xf,xw;const KS=class KS{constructor(){x(this,Xf);x(this,Kf,GO());x(this,$v,0);x(this,Li,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Pt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return C(this,Xf,xw).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return C(this,Xf,xw).call(this,t,t)}async getFromId(t){h(this,Li)||b(this,Li,new Map);const e=h(this,Li).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=h(this,Li).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){h(this,Li)||b(this,Li,new Map);const e=h(this,Li).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${h(this,Kf)}_`)}};Kf=new WeakMap,$v=new WeakMap,Li=new WeakMap,Xf=new WeakSet,xw=async function(t,e){h(this,Li)||b(this,Li,new Map);let i=h(this,Li).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${h(this,Kf)}_${li(this,$v)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await I0(e,"blob")):s=i.file=e,s.type==="image/svg+xml"){const r=KS._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},o.onload=async()=>{const f=i.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return h(this,Li).set(t,i),i&&h(this,Li).set(i.id,i),i};let Cw=KS;var qe,So,Yf,Ke;class nV{constructor(t=128){x(this,qe,[]);x(this,So,!1);x(this,Yf);x(this,Ke,-1);b(this,Yf,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&t(),h(this,So))return;const l={cmd:t,undo:e,post:i,type:r};if(h(this,Ke)===-1){h(this,qe).length>0&&(h(this,qe).length=0),b(this,Ke,0),h(this,qe).push(l);return}if(o&&h(this,qe)[h(this,Ke)].type===r){a&&(l.undo=h(this,qe)[h(this,Ke)].undo),h(this,qe)[h(this,Ke)]=l;return}const c=h(this,Ke)+1;c===h(this,Yf)?h(this,qe).splice(0,1):(b(this,Ke,c),c<h(this,qe).length&&h(this,qe).splice(c)),h(this,qe).push(l)}undo(){if(h(this,Ke)===-1)return;b(this,So,!0);const{undo:t,post:e}=h(this,qe)[h(this,Ke)];t(),e==null||e(),b(this,So,!1),b(this,Ke,h(this,Ke)-1)}redo(){if(h(this,Ke)<h(this,qe).length-1){b(this,Ke,h(this,Ke)+1),b(this,So,!0);const{cmd:t,post:e}=h(this,qe)[h(this,Ke)];t(),e==null||e(),b(this,So,!1)}}hasSomethingToUndo(){return h(this,Ke)!==-1}hasSomethingToRedo(){return h(this,Ke)<h(this,qe).length-1}destroy(){b(this,qe,null)}}qe=new WeakMap,So=new WeakMap,Yf=new WeakMap,Ke=new WeakMap;var Hv,pD;class km{constructor(t){x(this,Hv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ti.platform;for(const[i,s,r={}]of t)for(const o of i){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(C(this,Hv,pD).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...o,e)(),r||(e.stopPropagation(),e.preventDefault()))}}Hv=new WeakSet,pD=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Wv=class Wv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return JO(t),Pt(this,"_colors",t)}convert(t){const e=ST(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return Wv._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?nt.makeHexColor(...e):t}};mt(Wv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Pw=Wv;var _u,di,Fe,en,wu,_r,Eu,es,Au,al,Rs,ns,ll,Qf,Jf,Is,Tu,bo,ks,Gv,Co,Zf,cl,tp,Su,nn,Ft,wr,ul,ep,np,ip,sp,rp,op,ap,lp,cp,up,hp,dp,fp,xo,Ds,Er,pp,K,iy,mD,gD,sy,yD,vD,_D,Rw,wD,Iw,kw,ED,Nn,mo,AD,TD,Dw,SD,Cd,Lw;const ru=class ru{constructor(t,e,i,s,r,o,a,l,c){x(this,K);x(this,_u,new AbortController);x(this,di,null);x(this,Fe,new Map);x(this,en,new Map);x(this,wu,null);x(this,_r,null);x(this,Eu,null);x(this,es,new nV);x(this,Au,0);x(this,al,new Set);x(this,Rs,null);x(this,ns,null);x(this,ll,new Set);x(this,Qf,!1);x(this,Jf,null);x(this,Is,null);x(this,Tu,null);x(this,bo,!1);x(this,ks,null);x(this,Gv,new eV);x(this,Co,!1);x(this,Zf,!1);x(this,cl,null);x(this,tp,null);x(this,Su,null);x(this,nn,Ct.NONE);x(this,Ft,new Set);x(this,wr,null);x(this,ul,null);x(this,ep,null);x(this,np,this.blur.bind(this));x(this,ip,this.focus.bind(this));x(this,sp,this.copy.bind(this));x(this,rp,this.cut.bind(this));x(this,op,this.paste.bind(this));x(this,ap,this.keydown.bind(this));x(this,lp,this.keyup.bind(this));x(this,cp,this.onEditingAction.bind(this));x(this,up,this.onPageChanging.bind(this));x(this,hp,this.onScaleChanging.bind(this));x(this,dp,this.onRotationChanging.bind(this));x(this,fp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,xo,[0,0]);x(this,Ds,null);x(this,Er,null);x(this,pp,null);this._signal=h(this,_u).signal,b(this,Er,t),b(this,pp,e),b(this,wu,i),this._eventBus=s,this._eventBus._on("editingaction",h(this,cp)),this._eventBus._on("pagechanging",h(this,up)),this._eventBus._on("scalechanging",h(this,hp)),this._eventBus._on("rotationchanging",h(this,dp)),C(this,K,yD).call(this),C(this,K,ED).call(this),C(this,K,Rw).call(this),b(this,_r,r.annotationStorage),b(this,Jf,r.filterFactory),b(this,ul,o),b(this,Tu,a||null),b(this,Qf,l),b(this,Su,c||null),this.viewParameters={realScale:ha.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=ru.prototype,e=o=>h(o,Er).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Pt(this,"_keyboardManager",new km([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,Er).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,Er).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i;(t=h(this,_u))==null||t.abort(),b(this,_u,null),this._signal=null,this._eventBus._off("editingaction",h(this,cp)),this._eventBus._off("pagechanging",h(this,up)),this._eventBus._off("scalechanging",h(this,hp)),this._eventBus._off("rotationchanging",h(this,dp));for(const s of h(this,en).values())s.destroy();h(this,en).clear(),h(this,Fe).clear(),h(this,ll).clear(),b(this,di,null),h(this,Ft).clear(),h(this,es).destroy(),(e=h(this,wu))==null||e.destroy(),(i=h(this,ks))==null||i.hide(),b(this,ks,null),h(this,Is)&&(clearTimeout(h(this,Is)),b(this,Is,null)),h(this,Ds)&&(clearTimeout(h(this,Ds)),b(this,Ds,null))}async mlGuess(t){var e;return((e=h(this,Su))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!h(this,Su)}get hcmFilter(){return Pt(this,"hcmFilter",h(this,ul)?h(this,Jf).addHCMFilter(h(this,ul).foreground,h(this,ul).background):"none")}get direction(){return Pt(this,"direction",getComputedStyle(h(this,Er)).direction)}get highlightColors(){return Pt(this,"highlightColors",h(this,Tu)?new Map(h(this,Tu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){b(this,tp,t)}editAltText(t){var e;(e=h(this,wu))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){b(this,Au,t-1)}focusMainContainer(){h(this,Er).focus()}findParent(t,e){for(const i of h(this,en).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+a)return i}return null}disableUserSelect(t=!1){h(this,pp).classList.toggle("noUserSelect",t)}addShouldRescale(t){h(this,ll).add(t)}removeShouldRescale(t){h(this,ll).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ha.PDF_TO_CSS_UNITS;for(const e of h(this,ll))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=e,a=e.toString(),c=C(this,K,iy).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(c);if(u){e.empty(),h(this,nn)===Ct.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Ct.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of h(this,en).values())if(f.hasTextLayer(c)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a});break}}}addToAnnotationStorage(t){!t.isEmpty()&&h(this,_r)&&!h(this,_r).has(t.id)&&h(this,_r).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,h(this,bo)&&(b(this,bo,!1),C(this,K,sy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of h(this,Ft))if(e.div.contains(t)){b(this,cl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!h(this,cl))return;const[t,e]=h(this,cl);b(this,cl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,K,Rw).call(this),C(this,K,Iw).call(this)}removeEditListeners(){C(this,K,wD).call(this),C(this,K,kw).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of h(this,ns))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of h(this,ns))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=h(this,di))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of h(this,Ft)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of h(this,ns))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){vt(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const c=s.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)C(this,K,Dw).call(this,l);C(this,K,Lw).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){vt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,nn)!==Ct.NONE&&!this.isEditorHandlingKeyboard&&ru._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,bo)&&(b(this,bo,!1),C(this,K,sy).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(C(this,K,vD).call(this),C(this,K,Iw).call(this),C(this,K,Nn).call(this,{isEditing:h(this,nn)!==Ct.NONE,isEmpty:C(this,K,Cd).call(this),hasSomethingToUndo:h(this,es).hasSomethingToUndo(),hasSomethingToRedo:h(this,es).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,K,_D).call(this),C(this,K,kw).call(this),C(this,K,Nn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!h(this,ns)){b(this,ns,t);for(const e of h(this,ns))C(this,K,mo).call(this,e.defaultPropertiesToUpdate)}}getId(){return h(this,Gv).id}get currentLayer(){return h(this,en).get(h(this,Au))}getLayer(t){return h(this,en).get(t)}get currentPageIndex(){return h(this,Au)}addLayer(t){h(this,en).set(t.pageIndex,t),h(this,Co)?t.enable():t.disable()}removeLayer(t){h(this,en).delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(h(this,nn)!==t){if(b(this,nn,t),t===Ct.NONE){this.setEditingState(!1),C(this,K,TD).call(this);return}this.setEditingState(!0),C(this,K,AD).call(this),this.unselectAll();for(const s of h(this,en).values())s.updateMode(t);if(!e&&i){this.addNewEditorFromKeyboard();return}if(e){for(const s of h(this,Fe).values())if(s.annotationElementId===e){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==h(this,nn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(h(this,ns)){switch(t){case dt.CREATE:this.currentLayer.addNewEditor();return;case dt.HIGHLIGHT_DEFAULT_COLOR:(i=h(this,tp))==null||i.updateColor(e);break;case dt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,ep)||b(this,ep,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of h(this,Ft))s.updateParams(t,e);for(const s of h(this,ns))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of h(this,Fe).values())o.editorType===t&&o.show(e);(((r=h(this,ep))==null?void 0:r.get(dt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,K,mo).call(this,[[dt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(h(this,Zf)!==t){b(this,Zf,t);for(const e of h(this,en).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of h(this,Fe).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return h(this,Fe).get(t)}addEditor(t){h(this,Fe).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(h(this,Is)&&clearTimeout(h(this,Is)),b(this,Is,setTimeout(()=>{this.focusMainContainer(),b(this,Is,null)},0))),h(this,Fe).delete(t.id),this.unselect(t),(!t.annotationElementId||!h(this,al).has(t.annotationElementId))&&((e=h(this,_r))==null||e.remove(t.id))}addDeletedAnnotationElement(t){h(this,al).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return h(this,al).has(t)}removeDeletedAnnotationElement(t){h(this,al).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){h(this,di)!==t&&(b(this,di,t),t&&C(this,K,mo).call(this,t.propertiesToUpdate))}updateUI(t){h(this,K,SD)===t&&C(this,K,mo).call(this,t.propertiesToUpdate)}toggleSelected(t){if(h(this,Ft).has(t)){h(this,Ft).delete(t),t.unselect(),C(this,K,Nn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,Ft).add(t),t.select(),C(this,K,mo).call(this,t.propertiesToUpdate),C(this,K,Nn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of h(this,Ft))e!==t&&e.unselect();h(this,Ft).clear(),h(this,Ft).add(t),t.select(),C(this,K,mo).call(this,t.propertiesToUpdate),C(this,K,Nn).call(this,{hasSelectedEditor:!0})}isSelected(t){return h(this,Ft).has(t)}get firstSelectedEditor(){return h(this,Ft).values().next().value}unselect(t){t.unselect(),h(this,Ft).delete(t),C(this,K,Nn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,Ft).size!==0}get isEnterHandled(){return h(this,Ft).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){h(this,es).undo(),C(this,K,Nn).call(this,{hasSomethingToUndo:h(this,es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,K,Cd).call(this)})}redo(){h(this,es).redo(),C(this,K,Nn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,es).hasSomethingToRedo(),isEmpty:C(this,K,Cd).call(this)})}addCommands(t){h(this,es).add(t),C(this,K,Nn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,K,Cd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...h(this,Ft)],e=()=>{for(const s of t)s.remove()},i=()=>{for(const s of t)C(this,K,Dw).call(this,s)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=h(this,di))==null||t.commitOrRemove()}hasSomethingToControl(){return h(this,di)||this.hasSelection}selectAll(){for(const t of h(this,Ft))t.commit();C(this,K,Lw).call(this,h(this,Fe).values())}unselectAll(){if(!(h(this,di)&&(h(this,di).commitOrRemove(),h(this,nn)!==Ct.NONE))&&this.hasSelection){for(const t of h(this,Ft))t.unselect();h(this,Ft).clear(),C(this,K,Nn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;h(this,xo)[0]+=t,h(this,xo)[1]+=e;const[s,r]=h(this,xo),o=[...h(this,Ft)],a=1e3;h(this,Ds)&&clearTimeout(h(this,Ds)),b(this,Ds,setTimeout(()=>{b(this,Ds,null),h(this,xo)[0]=h(this,xo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Fe).has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(const l of o)h(this,Fe).has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},a));for(const l of o)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Rs,new Map);for(const t of h(this,Ft))h(this,Rs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,Rs))return!1;this.disableUserSelect(!1);const t=h(this,Rs);b(this,Rs,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},a]of t)a.newX=s,a.newY=r,a.newPageIndex=o,e||(e=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const i=(s,r,o,a)=>{if(h(this,Fe).has(s.id)){const l=h(this,en).get(a);l?s._setParentAndPosition(l,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of t)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of t)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(h(this,Rs))for(const i of h(this,Rs).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||h(this,Ft).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return h(this,di)===t}getActive(){return h(this,di)}getMode(){return h(this,nn)}get imageManager(){return Pt(this,"imageManager",new Cw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(c,u,f,p)=>({x:(u-s)/o,y:1-(c+f-i)/r,width:p/o,height:f/r});break;case"180":a=(c,u,f,p)=>({x:1-(c+f-i)/r,y:1-(u+p-s)/o,width:f/r,height:p/o});break;case"270":a=(c,u,f,p)=>({x:1-(u+p-s)/o,y:(c-i)/r,width:p/o,height:f/r});break;default:a=(c,u,f,p)=>({x:(c-i)/r,y:(u-s)/o,width:f/r,height:p/o});break}const l=[];for(let c=0,u=e.rangeCount;c<u;c++){const f=e.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:m,width:g,height:_}of f.getClientRects())g===0||_===0||l.push(a(p,m,g,_))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(h(this,Eu)||b(this,Eu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=h(this,Eu))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=h(this,Eu))==null?void 0:s.get(t.data.id);if(!e)return;const i=h(this,_r).getRawValue(e);i&&(h(this,nn)===Ct.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};_u=new WeakMap,di=new WeakMap,Fe=new WeakMap,en=new WeakMap,wu=new WeakMap,_r=new WeakMap,Eu=new WeakMap,es=new WeakMap,Au=new WeakMap,al=new WeakMap,Rs=new WeakMap,ns=new WeakMap,ll=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Is=new WeakMap,Tu=new WeakMap,bo=new WeakMap,ks=new WeakMap,Gv=new WeakMap,Co=new WeakMap,Zf=new WeakMap,cl=new WeakMap,tp=new WeakMap,Su=new WeakMap,nn=new WeakMap,Ft=new WeakMap,wr=new WeakMap,ul=new WeakMap,ep=new WeakMap,np=new WeakMap,ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,op=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap,up=new WeakMap,hp=new WeakMap,dp=new WeakMap,fp=new WeakMap,xo=new WeakMap,Ds=new WeakMap,Er=new WeakMap,pp=new WeakMap,K=new WeakSet,iy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},mD=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=C(this,K,iy).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(h(this,ks)||b(this,ks,new ZO(this)),h(this,ks).show(i,s,this.direction==="ltr"))},gD=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){h(this,wr)&&((r=h(this,ks))==null||r.hide(),b(this,wr,null),C(this,K,Nn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===h(this,wr))return;if(!C(this,K,iy).call(this,t).closest(".textLayer")){h(this,wr)&&((o=h(this,ks))==null||o.hide(),b(this,wr,null),C(this,K,Nn).call(this,{hasSelectedText:!1}));return}if((a=h(this,ks))==null||a.hide(),b(this,wr,e),C(this,K,Nn).call(this,{hasSelectedText:!0}),!(h(this,nn)!==Ct.HIGHLIGHT&&h(this,nn)!==Ct.NONE)&&(h(this,nn)===Ct.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,bo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=this._signal,c=u=>{u.type==="pointerup"&&u.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),u.type==="pointerup"&&C(this,K,sy).call(this,"main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}},sy=function(t=""){h(this,nn)===Ct.HIGHLIGHT?this.highlightSelection(t):h(this,Qf)&&C(this,K,mD).call(this)},yD=function(){document.addEventListener("selectionchange",C(this,K,gD).bind(this),{signal:this._signal})},vD=function(){const t=this._signal;window.addEventListener("focus",h(this,ip),{signal:t}),window.addEventListener("blur",h(this,np),{signal:t})},_D=function(){window.removeEventListener("focus",h(this,ip)),window.removeEventListener("blur",h(this,np))},Rw=function(){const t=this._signal;window.addEventListener("keydown",h(this,ap),{signal:t}),window.addEventListener("keyup",h(this,lp),{signal:t})},wD=function(){window.removeEventListener("keydown",h(this,ap)),window.removeEventListener("keyup",h(this,lp))},Iw=function(){const t=this._signal;document.addEventListener("copy",h(this,sp),{signal:t}),document.addEventListener("cut",h(this,rp),{signal:t}),document.addEventListener("paste",h(this,op),{signal:t})},kw=function(){document.removeEventListener("copy",h(this,sp)),document.removeEventListener("cut",h(this,rp)),document.removeEventListener("paste",h(this,op))},ED=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Nn=function(t){Object.entries(t).some(([i,s])=>h(this,fp)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,fp),t)}),h(this,nn)===Ct.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,K,mo).call(this,[[dt.HIGHLIGHT_FREE,!0]]))},mo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},AD=function(){if(!h(this,Co)){b(this,Co,!0);for(const t of h(this,en).values())t.enable();for(const t of h(this,Fe).values())t.enable()}},TD=function(){if(this.unselectAll(),h(this,Co)){b(this,Co,!1);for(const t of h(this,en).values())t.disable();for(const t of h(this,Fe).values())t.disable()}},Dw=function(t){const e=h(this,en).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},SD=function(){let t=null;for(t of h(this,Ft));return t},Cd=function(){if(h(this,Fe).size===0)return!0;if(h(this,Fe).size===1)for(const t of h(this,Fe).values())return t.isEmpty();return!1},Lw=function(t){for(const e of h(this,Ft))e.unselect();h(this,Ft).clear();for(const e of t)e.isEmpty()||(h(this,Ft).add(e),e.select());C(this,K,Nn).call(this,{hasSelectedEditor:this.hasSelection})},mt(ru,"TRANSLATE_SMALL",1),mt(ru,"TRANSLATE_BIG",10);let oc=ru;var Ar,Tr,is,Sr,fi,bu,ss,mp,Mw;const fr=class fr{constructor(t){x(this,mp);x(this,Ar,"");x(this,Tr,!1);x(this,is,null);x(this,Sr,null);x(this,fi,null);x(this,bu,!1);x(this,ss,null);b(this,ss,t)}static initialize(t){fr._l10nPromise||(fr._l10nPromise=t)}async render(){const t=b(this,is,document.createElement("button"));t.className="altText";const e=await fr._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=h(this,ss)._uiManager._signal;t.addEventListener("contextmenu",ri,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),h(this,ss)._uiManager.editAltText(h(this,ss))};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,bu,!0),s(r))},{signal:i}),await C(this,mp,Mw).call(this),t}finish(){h(this,is)&&(h(this,is).focus({focusVisible:h(this,bu)}),b(this,bu,!1))}isEmpty(){return!h(this,Ar)&&!h(this,Tr)}get data(){return{altText:h(this,Ar),decorative:h(this,Tr)}}set data({altText:t,decorative:e}){h(this,Ar)===t&&h(this,Tr)===e||(b(this,Ar,t),b(this,Tr,e),C(this,mp,Mw).call(this))}toggle(t=!1){h(this,is)&&(!t&&h(this,fi)&&(clearTimeout(h(this,fi)),b(this,fi,null)),h(this,is).disabled=!t)}destroy(){var t;(t=h(this,is))==null||t.remove(),b(this,is,null),b(this,Sr,null)}};Ar=new WeakMap,Tr=new WeakMap,is=new WeakMap,Sr=new WeakMap,fi=new WeakMap,bu=new WeakMap,ss=new WeakMap,mp=new WeakSet,Mw=async function(){var s;const t=h(this,is);if(!t)return;if(!h(this,Ar)&&!h(this,Tr)){t.classList.remove("done"),(s=h(this,Sr))==null||s.remove();return}t.classList.add("done"),fr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{t.setAttribute("aria-label",r)});let e=h(this,Sr);if(!e){b(this,Sr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const r=e.id=`alt-text-tooltip-${h(this,ss).id}`;t.setAttribute("aria-describedby",r);const o=100,a=h(this,ss)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(h(this,fi)),b(this,fi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,fi,setTimeout(()=>{b(this,fi,null),h(this,Sr).classList.add("show"),h(this,ss)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),t.addEventListener("mouseleave",()=>{var l;h(this,fi)&&(clearTimeout(h(this,fi)),b(this,fi,null)),(l=h(this,Sr))==null||l.classList.remove("show")},{signal:a})}e.innerText=h(this,Tr)?await fr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):h(this,Ar),e.parentNode||t.append(e);const i=h(this,ss).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},mt(fr,"_l10nPromise",null);let cv=fr;var hl,rs,Sn,Cu,dl,sn,fl,xu,Pu,bn,gp,pl,Po,yp,ml,br,Ls,Ru,Iu,Mi,vp,qv,_t,Nw,_p,Fw,Ow,bD,CD,Vw,jw,Bw,xD,PD,RD,ID,Uw,xd;const Ht=class Ht{constructor(t){x(this,_t);x(this,hl,null);x(this,rs,null);x(this,Sn,null);x(this,Cu,!1);x(this,dl,!1);x(this,sn,null);x(this,fl,null);x(this,xu,this.focusin.bind(this));x(this,Pu,this.focusout.bind(this));x(this,bn,null);x(this,gp,"");x(this,pl,!1);x(this,Po,null);x(this,yp,!1);x(this,ml,!1);x(this,br,!1);x(this,Ls,null);x(this,Ru,0);x(this,Iu,0);x(this,Mi,null);mt(this,"_initialOptions",Object.create(null));mt(this,"_isVisible",!0);mt(this,"_uiManager",null);mt(this,"_focusEventsAllowed",!0);mt(this,"_l10nPromise",null);x(this,vp,!1);x(this,qv,Ht._zIndex++);this.constructor===Ht&&Bt("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ht.prototype._resizeWithKeyboard,e=oc.TRANSLATE_SMALL,i=oc.TRANSLATE_BIG;return Pt(this,"_resizerKeyboardManager",new km([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Ht.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new iV({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Ht._l10nPromise||(Ht._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),i!=null&&i.strings)for(const r of i.strings)Ht._l10nPromise.set(r,t.get(r));if(Ht._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ht._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,vp)}set _isDraggable(t){var e;b(this,vp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,qv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):C(this,_t,xd).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(h(this,pl)?b(this,pl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}translate(t,e){C(this,_t,Nw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){h(this,Po)||b(this,Po,[this.x,this.y]),C(this,_t,Nw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){h(this,Po)||b(this,Po,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,l]=this.getBaseTranslation();r+=a,o+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!h(this,Po)&&(h(this,Po)[0]!==this.x||h(this,Po)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Ht,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:s,y:r,width:o,height:a}=this;if(o*=e,a*=i,s*=e,r*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-o,s)),r=Math.max(0,Math.min(i-a,r));break;case 90:s=Math.max(0,Math.min(e-a,s)),r=Math.min(i,Math.max(o,r));break;case 180:s=Math.min(e,Math.max(o,s)),r=Math.min(i,Math.max(a,r));break;case 270:s=Math.min(e,Math.max(a,s)),r=Math.max(0,Math.min(i-o,r));break}this.x=s/=e,this.y=r/=i;const[l,c]=this.getBaseTranslation();s+=l,r+=c;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return C(i=Ht,_p,Fw).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return C(i=Ht,_p,Fw).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,r=i*t;return ti.isCSSRoundSupported?[Math.round(s),Math.round(r)]:[s,r]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,h(this,dl)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!h(this,dl)&&e.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!h(this,dl)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=h(this,Sn))==null||t.finish()}async addEditToolbar(){return h(this,bn)||h(this,ml)?h(this,bn):(b(this,bn,new Sw(this)),this.div.append(h(this,bn).render()),h(this,Sn)&&h(this,bn).addAltTextButton(await h(this,Sn).render()),h(this,bn))}removeEditToolbar(){var t;h(this,bn)&&(h(this,bn).remove(),b(this,bn,null),(t=h(this,Sn))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,Sn)||(cv.initialize(Ht._l10nPromise),b(this,Sn,new cv(this)),h(this,hl)&&(h(this,Sn).data=h(this,hl),b(this,hl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=h(this,Sn))==null?void 0:t.data}set altTextData(t){h(this,Sn)&&(h(this,Sn).data=t)}hasAltText(){var t;return!((t=h(this,Sn))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,Cu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",h(this,xu),{signal:t}),this.div.addEventListener("focusout",h(this,Pu),{signal:t});const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),lv(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=ti.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,pl,!0),this._isDraggable){C(this,_t,xD).call(this,t);return}C(this,_t,Bw).call(this,t)}moveInDOM(){h(this,Ls)&&clearTimeout(h(this,Ls)),b(this,Ls,setTimeout(()=>{var t;b(this,Ls,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/s,u=e/s,f=this.x*r,p=this.y*o,m=this.width*r,g=this.height*o;switch(i){case 0:return[f+c+a,o-p-u-g+l,f+c+m+a,o-p-u+l];case 90:return[f+u+a,o-p+c+l,f+u+g+a,o-p+c+m+l];case 180:return[f-c-m+a,o-p+u+l,f-c+a,o-p+u+g+l];case 270:return[f-u-g+a,o-p-c-m+l,f-u+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,e-o,a,l];case 90:return[i,e-s,l,a];case 180:return[r,e-s,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){b(this,ml,!0)}disableEditMode(){b(this,ml,!1)}isInEditMode(){return h(this,ml)}shouldGetKeyboardEvents(){return h(this,br)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,i;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",h(this,xu),{signal:t}),(i=this.div)==null||i.addEventListener("focusout",h(this,Pu),{signal:t})}rotate(t){}serialize(t=!1,e=null){Bt("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,b(s,hl,t.accessibilityData);const[r,o]=s.pageDimensions,[a,l,c,u]=s.getRectInCurrentCoords(t.rect,o);return s.x=a/r,s.y=l/o,s.width=c/r,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",h(this,xu)),this.div.removeEventListener("focusout",h(this,Pu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,Ls)&&(clearTimeout(h(this,Ls)),b(this,Ls,null)),C(this,_t,xd).call(this),this.removeEditToolbar(),h(this,Mi)){for(const t of h(this,Mi).values())clearTimeout(t);b(this,Mi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,_t,bD).call(this),h(this,sn).classList.remove("hidden"),lv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,fl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=h(this,sn).children;if(!h(this,rs)){b(this,rs,Array.from(e));const o=C(this,_t,PD).bind(this),a=C(this,_t,RD).bind(this),l=this._uiManager._signal;for(const c of h(this,rs)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",C(this,_t,ID).bind(this,u),{signal:l}),Ht._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(f=>c.setAttribute("aria-label",f))}}const i=h(this,rs)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(h(this,rs).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)h(this,sn).append(h(this,sn).firstChild);else if(r>s)for(let a=0;a<r-s;a++)h(this,sn).firstChild.before(h(this,sn).lastChild);let o=0;for(const a of e){const c=h(this,rs)[o++].getAttribute("data-resizer-name");Ht._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>a.setAttribute("aria-label",u))}}C(this,_t,Uw).call(this,0),b(this,br,!0),h(this,sn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){h(this,br)&&C(this,_t,jw).call(this,h(this,gp),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){C(this,_t,xd).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!h(this,bn)){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=h(this,bn))==null||s.show())});return}(e=h(this,bn))==null||e.show()}unselect(){var t,e,i,s;(t=h(this,sn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=h(this,bn))==null||s.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,yp)}set isEditing(t){b(this,yp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,dl,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){h(this,Mi)||b(this,Mi,new Map);const{action:i}=t;let s=h(this,Mi).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),h(this,Mi).delete(i),h(this,Mi).size===0&&b(this,Mi,null)},Ht._telemetryTimeout),h(this,Mi).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Cu,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Cu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};hl=new WeakMap,rs=new WeakMap,Sn=new WeakMap,Cu=new WeakMap,dl=new WeakMap,sn=new WeakMap,fl=new WeakMap,xu=new WeakMap,Pu=new WeakMap,bn=new WeakMap,gp=new WeakMap,pl=new WeakMap,Po=new WeakMap,yp=new WeakMap,ml=new WeakMap,br=new WeakMap,Ls=new WeakMap,Ru=new WeakMap,Iu=new WeakMap,Mi=new WeakMap,vp=new WeakMap,qv=new WeakMap,_t=new WeakSet,Nw=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()},_p=new WeakSet,Fw=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ow=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},bD=function(){if(h(this,sn))return;b(this,sn,document.createElement("div")),h(this,sn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");h(this,sn).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",C(this,_t,CD).bind(this,i),{signal:e}),s.addEventListener("contextmenu",ri,{signal:e}),s.tabIndex=-1}this.div.prepend(h(this,sn))},CD=function(t,e){var _;e.preventDefault();const{isMac:i}=ti.platform;if(e.button!==0||e.ctrlKey&&i)return;(_=h(this,Sn))==null||_.toggle(!1);const s=C(this,_t,jw).bind(this,t),r=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",ri,{signal:o});const l=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{var A;this.parent.togglePointerEvents(!0),(A=h(this,Sn))==null||A.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",ri),this.parent.div.style.cursor=p,this.div.style.cursor=m,C(this,_t,Vw).call(this,l,c,u,f)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},Vw=function(t,e,i,s){const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===i&&l===s||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=r,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[c,u]=this.parentDimensions;this.setDims(c*i,u*s),this.fixAndSetPosition()},mustExec:!0})},jw=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=Ht.MIN_SIZE/i,u=Ht.MIN_SIZE/s,f=G=>Math.round(G*1e4)/1e4,p=C(this,_t,Ow).call(this,this.rotation),m=(G,z)=>[p[0]*G+p[2]*z,p[1]*G+p[3]*z],g=C(this,_t,Ow).call(this,360-this.rotation),_=(G,z)=>[g[0]*G+g[2]*z,g[1]*G+g[3]*z];let A,v,w=!1,T=!1;switch(t){case"topLeft":w=!0,A=(G,z)=>[0,0],v=(G,z)=>[G,z];break;case"topMiddle":A=(G,z)=>[G/2,0],v=(G,z)=>[G/2,z];break;case"topRight":w=!0,A=(G,z)=>[G,0],v=(G,z)=>[0,z];break;case"middleRight":T=!0,A=(G,z)=>[G,z/2],v=(G,z)=>[0,z/2];break;case"bottomRight":w=!0,A=(G,z)=>[G,z],v=(G,z)=>[0,0];break;case"bottomMiddle":A=(G,z)=>[G/2,z],v=(G,z)=>[G/2,0];break;case"bottomLeft":w=!0,A=(G,z)=>[0,z],v=(G,z)=>[G,0];break;case"middleLeft":T=!0,A=(G,z)=>[0,z/2],v=(G,z)=>[G,z/2];break}const D=A(a,l),F=v(a,l);let O=m(...F);const P=f(r+O[0]),S=f(o+O[1]);let R=1,k=1,[M,V]=this.screenToPageTranslation(e.movementX,e.movementY);if([M,V]=_(M/i,V/s),w){const G=Math.hypot(a,l);R=k=Math.max(Math.min(Math.hypot(F[0]-D[0]-M,F[1]-D[1]-V)/G,1/a,1/l),c/a,u/l)}else T?R=Math.max(c,Math.min(1,Math.abs(F[0]-D[0]-M)))/a:k=Math.max(u,Math.min(1,Math.abs(F[1]-D[1]-V)))/l;const L=f(a*R),Z=f(l*k);O=m(...v(L,Z));const ct=P-O[0],gt=S-O[1];this.width=L,this.height=Z,this.x=ct,this.y=gt,this.setDims(i*L,s*Z),this.fixAndSetPosition()},Bw=function(t){const{isMac:e}=ti.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},xD=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,s;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:r},b(this,Ru,t.clientX),b(this,Iu,t.clientY),s=a=>{const{clientX:l,clientY:c}=a,[u,f]=this.screenToPageTranslation(l-h(this,Ru),c-h(this,Iu));b(this,Ru,l),b(this,Iu,c),this._uiManager.dragSelectedEditors(u,f)},window.addEventListener("pointermove",s,i));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),b(this,pl,!1),this._uiManager.endDragSession()||C(this,_t,Bw).call(this,t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},PD=function(t){Ht._resizerKeyboardManager.exec(this,t)},RD=function(t){var e;h(this,br)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==h(this,sn)&&C(this,_t,xd).call(this)},ID=function(t){b(this,gp,h(this,br)?t:"")},Uw=function(t){if(h(this,rs))for(const e of h(this,rs))e.tabIndex=t},xd=function(){if(b(this,br,!1),C(this,_t,Uw).call(this,-1),h(this,fl)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=h(this,fl);C(this,_t,Vw).call(this,t,e,i,s),b(this,fl,null)}},x(Ht,_p),mt(Ht,"_borderLineWidth",-1),mt(Ht,"_colorManager",new Pw),mt(Ht,"_zIndex",1),mt(Ht,"_telemetryTimeout",1e3);let Ot=Ht;class iV extends Ot{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const dx=3285377520,Ii=4294901760,Ss=65535;class kD{constructor(t){this.h1=t?t&4294967295:dx,this.h2=t?t&4294967295:dx}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let _=0,A=t.length;_<A;_++){const v=t.charCodeAt(_);v<=255?e[i++]=v:(e[i++]=v>>>8,e[i++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let a=0,l=0,c=this.h1,u=this.h2;const f=3432918353,p=461845907,m=f&Ss,g=p&Ss;for(let _=0;_<s;_++)_&1?(a=o[_],a=a*f&Ii|a*m&Ss,a=a<<15|a>>>17,a=a*p&Ii|a*g&Ss,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[_],l=l*f&Ii|l*m&Ss,l=l<<15|l>>>17,l=l*p&Ii|l*g&Ss,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[s*4+2]<<16;case 2:a^=e[s*4+1]<<8;case 1:a^=e[s*4],a=a*f&Ii|a*m&Ss,a=a<<15|a>>>17,a=a*p&Ii|a*g&Ss,s&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ii|t*36045&Ss,e=e*4283543511&Ii|((e<<16|t>>>16)*2950163797&Ii)>>>16,t^=e>>>1,t=t*444984403&Ii|t*60499&Ss,e=e*3301882366&Ii|((e<<16|t>>>16)*3120437893&Ii)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const zw=Object.freeze({map:null,hash:"",transfer:void 0});var gl,rn,Kv,DD;class bT{constructor(){x(this,Kv);x(this,gl,!1);x(this,rn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=h(this,rn).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return h(this,rn).get(t)}remove(t){if(h(this,rn).delete(t),h(this,rn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of h(this,rn).values())if(e instanceof Ot)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=h(this,rn).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,h(this,rn).set(t,e);s&&C(this,Kv,DD).call(this),e instanceof Ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return h(this,rn).has(t)}getAll(){return h(this,rn).size>0?vT(h(this,rn)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return h(this,rn).size}resetModified(){h(this,gl)&&(b(this,gl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new LD(this)}get serializable(){if(h(this,rn).size===0)return zw;const t=new Map,e=new kD,i=[],s=Object.create(null);let r=!1;for(const[o,a]of h(this,rn)){const l=a instanceof Ot?a.serialize(!1,s):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:zw}get editorStats(){let t=null;const e=new Map;for(const i of h(this,rn).values()){if(!(i instanceof Ot))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}}gl=new WeakMap,rn=new WeakMap,Kv=new WeakSet,DD=function(){h(this,gl)||(b(this,gl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var wp;class LD extends bT{constructor(e){super();x(this,wp);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);b(this,wp,{map:o,hash:s,transfer:r})}get print(){Bt("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,wp)}}wp=new WeakMap;var ku;class sV{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,ku,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),h(this,ku).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||h(this,ku).has(t.loadedName))){if(ze(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=t,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),h(this,ku).add(i),e==null||e(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw vt(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Pt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(kn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Pt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(ze(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,F){return D.charCodeAt(F)<<24|D.charCodeAt(F+1)<<16|D.charCodeAt(F+2)<<8|D.charCodeAt(F+3)&255}function s(D,F,O,P){const S=D.substring(0,F),R=D.substring(F+O);return S+P+R}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(D,F){if(++c>30){vt("Load test font never loaded."),F();return}if(l.font="30px "+D,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(u.bind(null,D,F))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const g=16,_=1482184792;let A=i(p,g);for(r=0,o=f.length-3;r<o;r+=4)A=A-_+i(f,r)|0;r<f.length&&(A=A-_+i(f+"XXX",r)|0),p=s(p,g,4,UO(A));const v=`url(data:font/opentype;base64,${btoa(p)});`,w=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(w);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const D of[t.loadedName,f]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=D,T.append(F)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}ku=new WeakMap;class rV{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=tD(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){vt(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,o){};const s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case cr.BEZIER_CURVE_TO:{const[a,l,c,u,f,p]=i.slice(r,r+6);s.push(m=>m.bezierCurveTo(a,l,c,u,f,p)),r+=6}break;case cr.MOVE_TO:{const[a,l]=i.slice(r,r+2);s.push(c=>c.moveTo(a,l)),r+=2}break;case cr.LINE_TO:{const[a,l]=i.slice(r,r+2);s.push(c=>c.lineTo(a,l)),r+=2}break;case cr.QUADRATIC_CURVE_TO:{const[a,l,c,u]=i.slice(r,r+4);s.push(f=>f.quadraticCurveTo(a,l,c,u)),r+=4}break;case cr.RESTORE:s.push(a=>a.restore());break;case cr.SAVE:s.push(a=>a.save());break;case cr.SCALE:ze(s.length===2,"Scale command is only valid at the third position.");break;case cr.TRANSFORM:{const[a,l,c,u,f,p]=i.slice(r,r+6);s.push(m=>m.transform(a,l,c,u,f,p)),r+=6}break;case cr.TRANSLATE:{const[a,l]=i.slice(r,r+2);s.push(c=>c.translate(a,l)),r+=2}break}return this.compiledGlyphs[e]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let l=2,c=s.length;l<c;l++)s[l](o)}}}if(kn){var $w=Promise.withResolvers(),tf=null;(async()=>{const t=await Cg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),e=await Cg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),i=await Cg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),s=await Cg(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);let r,o;return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:r,path2d:o}))})().then(t=>{tf=t,$w.resolve()},t=>{vt(`loadPackages: ${t}`),tf=new Map,$w.resolve()})}class nr{static get promise(){return $w.promise}static get(t){return tf==null?void 0:tf.get(t)}}const MD=function(n){return nr.get("fs").promises.readFile(n).then(e=>new Uint8Array(e))};class oV extends x0{}class aV extends av{_createCanvas(t,e){return nr.get("canvas").createCanvas(t,e)}}class lV extends P0{_fetchData(t,e){return MD(t).then(i=>({cMapData:i,compressionType:e}))}}class cV extends R0{_fetchData(t){return MD(t)}}const jn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hw(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class Dm{constructor(){this.constructor===Dm&&Bt("Cannot initialize BaseShadingPattern.")}getPattern(){Bt("Abstract method `getPattern` called.")}}class uV extends Dm{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===jn.STROKE||s===jn.FILL){const o=e.current.getClippedPathBoundingBox(s,oe(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l,!0),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=nt.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),Hw(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(i);r.setTransform(f)}else Hw(t,this._bbox),r=this._createGradient(t);return r}}function Q_(n,t,e,i,s,r,o,a){const l=t.coords,c=t.colors,u=n.data,f=n.width*4;let p;l[e+1]>l[i+1]&&(p=e,e=i,i=p,p=r,r=o,o=p),l[i+1]>l[s+1]&&(p=i,i=s,s=p,p=o,o=a,a=p),l[e+1]>l[i+1]&&(p=e,e=i,i=p,p=r,r=o,o=p);const m=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,_=(l[i]+t.offsetX)*t.scaleX,A=(l[i+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,w=(l[s+1]+t.offsetY)*t.scaleY;if(g>=w)return;const T=c[r],D=c[r+1],F=c[r+2],O=c[o],P=c[o+1],S=c[o+2],R=c[a],k=c[a+1],M=c[a+2],V=Math.round(g),L=Math.round(w);let Z,ct,gt,G,z,tt,it,It;for(let at=V;at<=L;at++){if(at<A){const Tt=at<g?0:(g-at)/(g-A);Z=m-(m-_)*Tt,ct=T-(T-O)*Tt,gt=D-(D-P)*Tt,G=F-(F-S)*Tt}else{let Tt;at>w?Tt=1:A===w?Tt=0:Tt=(A-at)/(A-w),Z=_-(_-v)*Tt,ct=O-(O-R)*Tt,gt=P-(P-k)*Tt,G=S-(S-M)*Tt}let ht;at<g?ht=0:at>w?ht=1:ht=(g-at)/(g-w),z=m-(m-v)*ht,tt=T-(T-R)*ht,it=D-(D-k)*ht,It=F-(F-M)*ht;const de=Math.round(Math.min(Z,z)),se=Math.round(Math.max(Z,z));let Yt=f*at+de*4;for(let Tt=de;Tt<=se;Tt++)ht=(Z-Tt)/(Z-z),ht<0?ht=0:ht>1&&(ht=1),u[Yt++]=ct-(ct-tt)*ht|0,u[Yt++]=gt-(gt-it)*ht|0,u[Yt++]=G-(G-It)*ht|0,u[Yt++]=255}}function hV(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let f=0;f<c;f++,u++)Q_(n,e,i[u],i[u+1],i[u+a],s[u],s[u+1],s[u+a]),Q_(n,e,i[u+a+1],i[u+1],i[u+a],s[u+a+1],s[u+1],s[u+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)Q_(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class dV extends Dm{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),m=c/f,g=u/p,_={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/g},A=f+2*2,v=p+2*2,w=i.getCanvas("mesh",A,v,!1),T=w.context,D=T.createImageData(f,p);if(e){const O=D.data;for(let P=0,S=O.length;P<S;P+=4)O[P]=e[0],O[P+1]=e[1],O[P+2]=e[2],O[P+3]=255}for(const O of this._figures)hV(D,O,_);return T.putImageData(D,2,2),{canvas:w.canvas,offsetX:a-2*m,offsetY:l-2*g,scaleX:m,scaleY:g}}getPattern(t,e,i,s){Hw(t,this._bbox);let r;if(s===jn.SHADING)r=nt.singularValueDecompose2dScale(oe(t));else if(r=nt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=nt.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===jn.SHADING?null:this._background,e.cachedCanvases);return s!==jn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class fV extends Dm{getPattern(){return"hotpink"}}function pV(n){switch(n[0]){case"RadialAxial":return new uV(n);case"Mesh":return new dV(n);case"Dummy":return new fV}throw new Error(`Unknown IR type: ${n[0]}`)}const fx={COLORED:1,UNCOLORED:2},Xv=class Xv{constructor(t,e,i,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,r=this.ystep,o=this.paintType,a=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;S0("TilingType: "+a);const u=i[0],f=i[1],p=i[2],m=i[3],g=nt.singularValueDecompose2dScale(this.matrix),_=nt.singularValueDecompose2dScale(this.baseTransform),A=[g[0]*_[0],g[1]*_[1]],v=this.getSizeAndScale(s,this.ctx.canvas.width,A[0]),w=this.getSizeAndScale(r,this.ctx.canvas.height,A[1]),T=t.cachedCanvases.getCanvas("pattern",v.size,w.size,!0),D=T.context,F=c.createCanvasGraphics(D);F.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(F,o,l);let O=u,P=f,S=p,R=m;return u<0&&(O=0,S+=Math.abs(u)),f<0&&(P=0,R+=Math.abs(f)),D.translate(-(v.scale*O),-(w.scale*P)),F.transform(v.scale,0,0,w.scale,0,0),D.save(),this.clipBbox(F,O,P,S,R),F.baseTransform=oe(F.ctx),F.executeOperatorList(e),F.endDrawing(),{canvas:T.canvas,scaleX:v.scale,scaleY:w.scale,offsetX:O,offsetY:P}}getSizeAndScale(t,e,i){t=Math.abs(t);const s=Math.max(Xv.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,a=r-i;t.ctx.rect(e,i,o,a),t.current.updateRectMinMax(oe(t.ctx),[e,i,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case fx.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case fx.UNCOLORED:const a=nt.makeHexColor(i[0],i[1],i[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new BO(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let r=i;s!==jn.SHADING&&(r=nt.transform(r,e.baseTransform),this.matrix&&(r=nt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};mt(Xv,"MAX_PATTERN_SIZE",3e3);let Ww=Xv;function mV({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=ti.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=i>>3,f=i&7,p=n.length;e=new Uint32Array(e.buffer);let m=0;for(let g=0;g<s;g++){for(const A=t+u;t<A;t++){const v=t<p?n[t]:255;e[m++]=v&128?c:l,e[m++]=v&64?c:l,e[m++]=v&32?c:l,e[m++]=v&16?c:l,e[m++]=v&8?c:l,e[m++]=v&4?c:l,e[m++]=v&2?c:l,e[m++]=v&1?c:l}if(f===0)continue;const _=t<p?n[t++]:255;for(let A=0;A<f;A++)e[m++]=_&1<<7-A?c:l}return{srcPos:t,destPos:m}}const px=16,mx=100,gV=15,gx=10,yx=1e3,Xn=16;function yV(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,l){t.transform(i,s,r,o,a,l),this.__originalTransform(i,s,r,o,a,l)},n.setTransform=function(i,s,r,o,a,l){t.setTransform(i,s,r,o,a,l),this.__originalSetTransform(i,s,r,o,a,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,a){t.bezierCurveTo(e,i,s,r,o,a),this.__originalBezierCurveTo(e,i,s,r,o,a)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class vV{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function xg(n,t,e,i,s,r,o,a,l,c){const[u,f,p,m,g,_]=oe(n);if(f===0&&p===0){const w=o*u+g,T=Math.round(w),D=a*m+_,F=Math.round(D),O=(o+l)*u+g,P=Math.abs(Math.round(O)-T)||1,S=(a+c)*m+_,R=Math.abs(Math.round(S)-F)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(m),T,F),n.drawImage(t,e,i,s,r,0,0,P,R),n.setTransform(u,f,p,m,g,_),[P,R]}if(u===0&&m===0){const w=a*p+g,T=Math.round(w),D=o*f+_,F=Math.round(D),O=(a+c)*p+g,P=Math.abs(Math.round(O)-T)||1,S=(o+l)*f+_,R=Math.abs(Math.round(S)-F)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,T,F),n.drawImage(t,e,i,s,r,0,0,R,P),n.setTransform(u,f,p,m,g,_),[R,P]}n.drawImage(t,e,i,s,r,o,a,l,c);const A=Math.hypot(u,f),v=Math.hypot(p,m);return[A*l,v*c]}function _V(n){const{width:t,height:e}=n;if(t>yx||e>yx)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,l,c;const u=t+7&-8;let f=new Uint8Array(u*e),p=0;for(const v of n.data){let w=128;for(;w>0;)f[p++]=v&w?0:255,w>>=1}let m=0;for(p=0,f[p]!==0&&(o[0]=1,++m),l=1;l<t;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++m),p++;for(f[p]!==0&&(o[l]=2,++m),a=1;a<e;a++){p=a*u,c=a*r,f[p-u]!==f[p]&&(o[c]=f[p]?1:8,++m);let v=(f[p]?4:0)+(f[p-u]?8:0);for(l=1;l<t;l++)v=(v>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),s[v]&&(o[c+l]=s[v],++m),p++;if(f[p-u]!==f[p]&&(o[c+l]=f[p]?2:4,++m),m>i)return null}for(p=u*(e-1),c=a*r,f[p]!==0&&(o[c]=8,++m),l=1;l<t;l++)f[p]!==f[p+1]&&(o[c+l]=f[p]?4:8,++m),p++;if(f[p]!==0&&(o[c+l]=4,++m),m>i)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),_=new Path2D;for(a=0;m&&a<=e;a++){let v=a*r;const w=v+t;for(;v<w&&!o[v];)v++;if(v===w)continue;_.moveTo(v%r,a);const T=v;let D=o[v];do{const F=g[D];do v+=F;while(!o[v]);const O=o[v];O!==5&&O!==10?(D=O,o[v]=0):(D=O&51*D>>4,o[v]&=D>>2|D<<2),_.lineTo(v%r,v/r|0),o[v]||--m}while(T!==v);--a}return f=null,o=null,function(v){v.save(),v.scale(1/t,-1/e),v.translate(0,-e),v.fill(_),v.beginPath(),v.restore()}}class vx{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Jk,this.textMatrixScale=1,this.fontMatrix=yw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=An.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=nt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=nt.applyTransform(e,t),s=nt.applyTransform(e.slice(2),t),r=nt.applyTransform([e[0],e[3]],t),o=nt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(t,e){nt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,r,o,a,l,c,u){const f=nt.bezierBoundingBox(e,i,s,r,o,a,l,c,u);u||this.updateRectMinMax(t,f)}getPathBoundingBox(t=jn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===jn.STROKE){e||Bt("Stroke bounding box must include transform.");const s=nt.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=jn.FILL,e=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function _x(n,t){if(typeof ImageData<"u"&&t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%Xn,r=(e-s)/Xn,o=s===0?r:r+1,a=n.createImageData(i,Xn);let l=0,c;const u=t.data,f=a.data;let p,m,g,_;if(t.kind===Zg.GRAYSCALE_1BPP){const A=u.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),w=v.length,T=i+7>>3,D=4294967295,F=ti.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(g=p<r?Xn:s,c=0,m=0;m<g;m++){const O=A-l;let P=0;const S=O>T?i:O*8-7,R=S&-8;let k=0,M=0;for(;P<R;P+=8)M=u[l++],v[c++]=M&128?D:F,v[c++]=M&64?D:F,v[c++]=M&32?D:F,v[c++]=M&16?D:F,v[c++]=M&8?D:F,v[c++]=M&4?D:F,v[c++]=M&2?D:F,v[c++]=M&1?D:F;for(;P<S;P++)k===0&&(M=u[l++],k=128),v[c++]=M&k?D:F,k>>=1}for(;c<w;)v[c++]=0;n.putImageData(a,0,p*Xn)}}else if(t.kind===Zg.RGBA_32BPP){for(m=0,_=i*Xn*4,p=0;p<r;p++)f.set(u.subarray(l,l+_)),l+=_,n.putImageData(a,0,m),m+=Xn;p<o&&(_=i*s*4,f.set(u.subarray(l,l+_)),n.putImageData(a,0,m))}else if(t.kind===Zg.RGB_24BPP)for(g=Xn,_=i*g,p=0;p<o;p++){for(p>=r&&(g=s,_=i*g),c=0,m=_;m--;)f[c++]=u[l++],f[c++]=u[l++],f[c++]=u[l++],f[c++]=255;n.putImageData(a,0,p*Xn)}else throw new Error(`bad image kind: ${t.kind}`)}function wx(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%Xn,r=(e-s)/Xn,o=s===0?r:r+1,a=n.createImageData(i,Xn);let l=0;const c=t.data,u=a.data;for(let f=0;f<o;f++){const p=f<r?Xn:s;({srcPos:l}=mV({src:c,srcPos:l,dest:u,width:i,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Xn)}}function fd(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Pg(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!kn){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function Ex(n,t){if(t)return!0;const e=nt.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ha.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const wV=["butt","round","square"],EV=["miter","round","bevel"],AV={},Ax={};var Aa,Gw,qw;const XS=class XS{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){x(this,Aa);this.ctx=t,this.current=new vx(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new vV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...oe(this.compositeCtx))}this.ctx.save(),Pg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oe(this.ctx)}executeOperatorList(t,e,i,s){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const c=l-a>gx&&typeof i=="function",u=c?Date.now()+gV:0;let f=0;const p=this.commonObjs,m=this.objs;let g;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(g=o[a],g!==ts.dependency)this[g].apply(this,r[a]);else for(const _ of r[a]){const A=_.startsWith("g_")?p:m;if(!A.has(_))return A.get(_,i),a}if(a++,a===l)return a;if(c&&++f>gx){if(Date.now()>u)return i(),a;f=0}}}endDrawing(){C(this,Aa,Gw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,Aa,qw).call(this)}_scaleImage(t,e){const i=t.width,s=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=s,c="prescale1",u,f;for(;r>2&&a>1||o>2&&l>1;){let p=a,m=l;r>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/p),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),u=this.cachedCanvases.getCanvas(c,p,m),f=u.context,f.clearRect(0,0,p,m),f.drawImage(t,0,0,a,l,0,0,p,m),t=u.canvas,a=p,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,a=oe(e);let l,c,u,f;if((t.bitmap||t.data)&&t.count>1){const S=t.bitmap||t.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(S),l||(l=new Map,this._cachedBitmapsMap.set(S,l));const R=l.get(c);if(R&&!o){const k=Math.round(Math.min(a[0],a[2])+a[4]),M=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:R,offsetX:k,offsetY:M}}u=R}u||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),wx(f.context,t));let p=nt.transform(a,[1/i,0,0,-1/s,0,0]);p=nt.transform(p,[1,0,0,1,0,-s]);const[m,g,_,A]=nt.getAxialAlignedBoundingBox([0,0,i,s],p),v=Math.round(_-m)||1,w=Math.round(A-g)||1,T=this.cachedCanvases.getCanvas("fillCanvas",v,w),D=T.context,F=m,O=g;D.translate(-F,-O),D.transform(...p),u||(u=this._scaleImage(f.canvas,ur(D)),u=u.img,l&&o&&l.set(c,u)),D.imageSmoothingEnabled=Ex(oe(D),t.interpolate),xg(D,u,0,0,u.width,u.height,0,0,i,s),D.globalCompositeOperation="source-in";const P=nt.transform(ur(D),[1,0,0,1,-F,-O]);return D.fillStyle=o?r.getPattern(e,this,P,jn.FILL):r,D.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(F),offsetY:Math.round(O)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=wV[t]}setLineJoin(t){this.ctx.lineJoin=EV[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...oe(this.suspendedCtx)),fd(this.suspendedCtx,r),yV(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),fd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,a,l,c,u,f){let p=t.canvas,m=l-u,g=c-f;if(o){if(m<0||g<0||m+i>p.width||g+s>p.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,s),v=A.context;v.drawImage(p,-m,-g),o.some(w=>w!==0)&&(v.globalCompositeOperation="destination-atop",v.fillStyle=nt.makeHexColor(...o),v.fillRect(0,0,i,s),v.globalCompositeOperation="source-over"),p=A.canvas,m=g=0}else if(o.some(A=>A!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(m,g,i,s),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=nt.makeHexColor(...o),t.fillRect(m,g,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const _=new Path2D;_.rect(l,c,i,s),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(p,m,g,i,s,l,c,i,s),e.restore()}save(){this.inSMaskMode?(fd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),fd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,r,o){this.ctx.transform(t,e,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,r=this.current;let o=r.x,a=r.y,l,c;const u=oe(s),f=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,p=f?i.slice(0):null;for(let m=0,g=0,_=t.length;m<_;m++)switch(t[m]|0){case ts.rectangle:o=e[g++],a=e[g++];const A=e[g++],v=e[g++],w=o+A,T=a+v;s.moveTo(o,a),A===0||v===0?s.lineTo(w,T):(s.lineTo(w,a),s.lineTo(w,T),s.lineTo(o,T)),f||r.updateRectMinMax(u,[o,a,w,T]),s.closePath();break;case ts.moveTo:o=e[g++],a=e[g++],s.moveTo(o,a),f||r.updatePathMinMax(u,o,a);break;case ts.lineTo:o=e[g++],a=e[g++],s.lineTo(o,a),f||r.updatePathMinMax(u,o,a);break;case ts.curveTo:l=o,c=a,o=e[g+4],a=e[g+5],s.bezierCurveTo(e[g],e[g+1],e[g+2],e[g+3],o,a),r.updateCurvePathMinMax(u,l,c,e[g],e[g+1],e[g+2],e[g+3],o,a,p),g+=6;break;case ts.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,e[g],e[g+1],e[g+2],e[g+3]),r.updateCurvePathMinMax(u,l,c,o,a,e[g],e[g+1],e[g+2],e[g+3],p),o=e[g+2],a=e[g+3],g+=4;break;case ts.curveTo3:l=o,c=a,o=e[g+2],a=e[g+3],s.bezierCurveTo(e[g],e[g+1],o,a,o,a),r.updateCurvePathMinMax(u,l,c,e[g],e[g+1],o,a,o,a,p),g+=4;break;case ts.closePath:s.closePath();break}f&&r.updateScalingPathMinMax(u,p),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,ur(e),jn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,ur(e),jn.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=AV}eoClip(){this.pendingClip=Ax}beginText(){this.current.textMatrix=Jk,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||yw,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((u=i.systemFontInfo)==null?void 0:u.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=e;e<px?c=px:e>mx&&(c=mx),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,r,o){this.current.textMatrix=[t,e,i,s,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const r=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&An.FILL_STROKE_MASK,f=!!(l&An.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let m;(a.disableFontFace||f||p)&&(m=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||p?(r.save(),r.translate(e,i),r.beginPath(),m(r,c),s&&r.setTransform(...s),(u===An.FILL||u===An.FILL_STROKE)&&r.fill(),(u===An.STROKE||u===An.FILL_STROKE)&&r.stroke(),r.restore()):((u===An.FILL||u===An.FILL_STROKE)&&r.fillText(t,e,i),(u===An.STROKE||u===An.FILL_STROKE)&&r.strokeText(t,e,i)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:oe(r),x:e,y:i,fontSize:c,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return Pt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,f=t.length,p=i.vertical,m=p?1:-1,g=i.defaultVMetrics,_=s*e.fontMatrix[0],A=e.textRenderingMode===An.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),c>0?r.scale(u,-1):r.scale(u,1);let v;if(e.patternFill){r.save();const O=e.fillColor.getPattern(r,this,ur(r),jn.FILL);v=oe(r),r.restore(),r.fillStyle=O}let w=e.lineWidth;const T=e.textMatrixScale;if(T===0||w===0){const O=e.textRenderingMode&An.FILL_STROKE_MASK;(O===An.STROKE||O===An.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=T;if(o!==1&&(r.scale(o,o),w/=o),r.lineWidth=w,i.isInvalidPDFjsFont){const O=[];let P=0;for(const S of t)O.push(S.unicode),P+=S.width;r.fillText(O.join(""),0,0),e.x+=P*_*u,r.restore(),this.compose();return}let D=0,F;for(F=0;F<f;++F){const O=t[F];if(typeof O=="number"){D+=m*O*s/1e3;continue}let P=!1;const S=(O.isSpace?l:0)+a,R=O.fontChar,k=O.accent;let M,V,L=O.width;if(p){const ct=O.vmetric||g,gt=-(O.vmetric?ct[1]:L*.5)*_,G=ct[2]*_;L=ct?-ct[0]:L,M=gt/o,V=(D+G)/o}else M=D/o,V=0;if(i.remeasure&&L>0){const ct=r.measureText(R).width*1e3/s*o;if(L<ct&&this.isFontSubpixelAAEnabled){const gt=L/ct;P=!0,r.save(),r.scale(gt,1),M/=gt}else L!==ct&&(M+=(L-ct)/2e3*s/o)}if(this.contentVisible&&(O.isInFont||i.missingFile)){if(A&&!k)r.fillText(R,M,V);else if(this.paintChar(R,M,V,v),k){const ct=M+s*k.offset.x/o,gt=V-s*k.offset.y/o;this.paintChar(k.fontChar,ct,gt,v)}}const Z=p?L*_-S*c:L*_+S*c;D+=Z,P&&r.restore()}p?e.y-=D:e.x+=D*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,f=i.fontMatrix||yw,p=t.length,m=i.textRenderingMode===An.INVISIBLE;let g,_,A,v;if(!(m||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(u,o),g=0;g<p;++g){if(_=t[g],typeof _=="number"){v=a*_*r/1e3,this.ctx.translate(v,0),i.x+=v*u;continue}const w=(_.isSpace?c:0)+l,T=s.charProcOperatorList[_.operatorListId];if(!T){vt(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()),A=nt.applyTransform([_.width,0],f)[0]*r+w,e.translate(A,0),i.x+=A*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],s=this.baseTransform||oe(this.ctx),r={createCanvasGraphics:o=>new XS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ww(t,i,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const s=nt.makeHexColor(t,e,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,i){const s=nt.makeHexColor(t,e,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=pV(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,ur(e),jn.SHADING);const s=ur(e);if(s){const{width:r,height:o}=e.canvas,[a,l,c,u]=nt.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Bt("Should not call beginInlineImage")}beginImageData(){Bt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=oe(this.ctx),e)){const i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(oe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||S0("TODO: Support non-isolated groups."),t.knockout&&vt("Knockout groups not supported.");const i=oe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=nt.getAxialAlignedBoundingBox(t.bbox,oe(e));const r=[0,0,e.canvas.width,e.canvas.height];s=nt.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,l,c),p=f.context;p.translate(-o,-a),p.transform(...i),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),fd(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=nt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(C(this,Aa,Gw).call(this),Pg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[l,c]=nt.singularValueDecompose2dScale(oe(this.ctx)),{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),p=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),Pg(this.ctx)}else Pg(this.ctx),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.endPath()}this.current=new vx(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,Aa,qw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=_V(t)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=oe(a);a.transform(e,i,s,r,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,f=o.length;u<f;u+=2){const p=nt.transform(l,[e,i,s,r,o[u],o[u+1]]),[m,g]=nt.applyTransform([0,0],p);a.drawImage(c.canvas,m,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=u.context;f.save();const p=this.getObject(o,r);wx(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?i.getPattern(f,this,ur(e),jn.FILL):i,f.fillRect(0,0,a,l),f.restore(),e.save(),e.transform(...c),e.scale(1,-1),xg(e,u.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){vt("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[e,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!kn){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;_x(l,t),r=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(r,ur(s));s.imageSmoothingEnabled=Ex(oe(s),t.interpolate),xg(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;_x(l,t),s=this.applyTransferMapsToCanvas(l)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),xg(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===Ax?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const l=Math.abs(e),c=Math.abs(r);if(l===c)if(t===0)o=a=1/l;else{const u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{const u=l*t,f=c*t;o=u<1?1/u:1,a=f<1?1/f:1}}else{const l=Math.abs(e*r-i*s),c=Math.hypot(e,i),u=Math.hypot(s,r);if(t===0)o=u/l,a=c/l;else{const f=t*l;o=u>f?u/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=i||1,s===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(s,r),o.length>0){const a=Math.max(s,r);e.setLineDash(o.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Aa=new WeakSet,Gw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qw=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let du=XS;for(const n in ts)du.prototype[n]!==void 0&&(du.prototype[ts[n]]=du.prototype[n]);var Ep,Ap;class Gr{static get workerPort(){return h(this,Ep)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,Ep,t)}static get workerSrc(){return h(this,Ap)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Ap,t)}}Ep=new WeakMap,Ap=new WeakMap,x(Gr,Ep,null),x(Gr,Ap,"");const Rg={UNKNOWN:0,DATA:1,ERROR:2},Ce={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ci(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new vc(n.message);case"MissingPDFException":return new yc(n.message);case"PasswordException":return new _w(n.message,n.code);case"UnexpectedResponseException":return new b0(n.message,n.status);case"UnknownErrorException":return new ww(n.message,n.details);default:return new ww(n.message,n.toString())}}var tr,ND,FD,ry;class Pd{constructor(t,e,i){x(this,tr);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const r=s.data;if(r.targetName!==this.sourceName)return;if(r.stream){C(this,tr,FD).call(this,r);return}if(r.callback){const a=r.callbackId,l=this.callbackCapabilities[a];if(!l)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],r.callback===Rg.DATA)l.resolve(r.data);else if(r.callback===Rg.ERROR)l.reject(ci(r.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const a=this.sourceName,l=r.sourceName;new Promise(function(c){c(o(r.data))}).then(function(c){i.postMessage({sourceName:a,targetName:l,callback:Rg.DATA,callbackId:r.callbackId,data:c})},function(c){i.postMessage({sourceName:a,targetName:l,callback:Rg.ERROR,callbackId:r.callbackId,reason:ci(c)})});return}if(r.streamId){C(this,tr,ND).call(this,r);return}o(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:Ce.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{ze(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ce.CANCEL,streamId:r,reason:ci(c)}),u.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}tr=new WeakSet,ND=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Ce.ENQUEUE,streamId:e,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ce.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){ze(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ce.ERROR,streamId:e,reason:ci(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(c){c(a(t.data,l))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ce.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Ce.START_COMPLETE,streamId:e,reason:ci(c)})})},FD=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ce.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ci(t.reason));break;case Ce.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ci(t.reason));break;case Ce.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:Ce.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ce.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:Ce.PULL_COMPLETE,streamId:e,reason:ci(l)})});break;case Ce.ENQUEUE:if(ze(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ce.CLOSE:if(ze(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,tr,ry).call(this,o,e);break;case Ce.ERROR:ze(o,"error should have stream controller"),o.controller.error(ci(t.reason)),C(this,tr,ry).call(this,o,e);break;case Ce.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ci(t.reason)),C(this,tr,ry).call(this,o,e);break;case Ce.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,ci(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ce.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:Ce.CANCEL_COMPLETE,streamId:e,reason:ci(l)})}),a.sinkCapability.reject(ci(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ry=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var yl,Tp;class TV{constructor({parsedData:t,rawData:e}){x(this,yl);x(this,Tp);b(this,yl,t),b(this,Tp,e)}getRaw(){return h(this,Tp)}get(t){return h(this,yl).get(t)??null}getAll(){return vT(h(this,yl))}has(t){return h(this,yl).has(t)}}yl=new WeakMap,Tp=new WeakMap;const go=Symbol("INTERNAL");var Sp,bp,Cp,Du;class SV{constructor(t,{name:e,intent:i,usage:s}){x(this,Sp,!1);x(this,bp,!1);x(this,Cp,!1);x(this,Du,!0);b(this,Sp,!!(t&Oi.DISPLAY)),b(this,bp,!!(t&Oi.PRINT)),this.name=e,this.intent=i,this.usage=s}get visible(){if(h(this,Cp))return h(this,Du);if(!h(this,Du))return!1;const{print:t,view:e}=this.usage;return h(this,Sp)?(e==null?void 0:e.viewState)!=="OFF":h(this,bp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==go&&Bt("Internal method `_setVisible` called."),b(this,Cp,i),b(this,Du,e)}}Sp=new WeakMap,bp=new WeakMap,Cp=new WeakMap,Du=new WeakMap;var Ro,jt,Lu,Mu,xp,Kw;class bV{constructor(t,e=Oi.DISPLAY){x(this,xp);x(this,Ro,null);x(this,jt,new Map);x(this,Lu,null);x(this,Mu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Mu,t.order);for(const i of t.groups)h(this,jt).set(i.id,new SV(e,i));if(t.baseState==="OFF")for(const i of h(this,jt).values())i._setVisible(go,!1);for(const i of t.on)h(this,jt).get(i)._setVisible(go,!0);for(const i of t.off)h(this,jt).get(i)._setVisible(go,!1);b(this,Lu,this.getHash())}}isVisible(t){if(h(this,jt).size===0)return!0;if(!t)return S0("Optional content group not defined."),!0;if(t.type==="OCG")return h(this,jt).has(t.id)?h(this,jt).get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,xp,Kw).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!h(this,jt).has(e))return vt(`Optional content group not found: ${e}`),!0;if(h(this,jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!h(this,jt).has(e))return vt(`Optional content group not found: ${e}`),!0;if(!h(this,jt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!h(this,jt).has(e))return vt(`Optional content group not found: ${e}`),!0;if(!h(this,jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!h(this,jt).has(e))return vt(`Optional content group not found: ${e}`),!0;if(h(this,jt).get(e).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=h(this,jt).get(t);if(!i){vt(`Optional content group not found: ${t}`);return}i._setVisible(go,!!e,!0),b(this,Ro,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=h(this,jt).get(s);if(r)switch(i){case"ON":r._setVisible(go,!0);break;case"OFF":r._setVisible(go,!1);break;case"Toggle":r._setVisible(go,!r.visible);break}}b(this,Ro,null)}get hasInitialVisibility(){return h(this,Lu)===null||this.getHash()===h(this,Lu)}getOrder(){return h(this,jt).size?h(this,Mu)?h(this,Mu).slice():[...h(this,jt).keys()]:null}getGroups(){return h(this,jt).size>0?vT(h(this,jt)):null}getGroup(t){return h(this,jt).get(t)||null}getHash(){if(h(this,Ro)!==null)return h(this,Ro);const t=new kD;for(const[e,i]of h(this,jt))t.update(`${e}:${i.visible}`);return b(this,Ro,t.hexdigest())}}Ro=new WeakMap,jt=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,xp=new WeakSet,Kw=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=C(this,xp,Kw).call(this,r);else if(h(this,jt).has(r))o=h(this,jt).get(r).visible;else return vt(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class CV{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ze(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});ze(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ze(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new xV(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PV(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class xV{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=TT(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PV{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function RV(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),r(u)}if(e=o(n),e){const u=c(e);return r(u)}if(e=i("filename","i").exec(n),e){e=e[1];let u=a(e);return u=c(u),r(u)}function i(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),m=C0(f);f=p.decode(m),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function o(u){const f=[];let p;const m=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(u))!==null;){let[,_,A,v]=p;if(_=parseInt(_,10),_ in f){if(_===0)break;continue}f[_]=[A,v]}const g=[];for(let _=0;_<f.length&&_ in f;++_){let[A,v]=f[_];v=a(v),A&&(v=unescape(v),_===0&&(v=l(v))),g.push(v)}return g.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function l(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),g=u.slice(f+1).replace(/^[^']*'/,"");return s(p,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,g){if(m==="q"||m==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,A){return String.fromCharCode(parseInt(A,16))}),s(p,g);try{g=atob(g)}catch{}return s(p,g)})}return""}function CT({getResponseHeader:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function xT(n){const t=n("Content-Disposition");if(t){let e=RV(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(TT(e))return e}return null}function k0(n,t){return n===404||n===0&&t.startsWith("file:")?new yc('Missing PDF "'+t+'".'):new b0(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function OD(n){return n===200||n===206}function VD(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function jD(n){const t=new Headers;for(const e in n){const i=n[e];i!==void 0&&t.append(e,i)}return t}function BD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(vt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Tx{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ze(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new IV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new kV(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class IV{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=jD(this._stream.httpHeaders);const i=e.url;fetch(i,VD(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!OD(s.status))throw k0(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=l=>s.headers.get(l),{allowRangeRequests:o,suggestedLength:a}=CT({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=xT(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:BD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class kV{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=jD(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const r=s.url;fetch(r,VD(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!OD(o.status))throw k0(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:BD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const J_=200,Z_=206;function DV(n){const t=n.response;return typeof t!="string"?t:C0(t).buffer}class LV{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const o=this.httpHeaders[r];o!==void 0&&e.setRequestHeader(r,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Z_):s.expectedStatus=J_,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){var l,c,u;const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,s.status);return}const r=s.status||J_;if(!(r===J_&&i.expectedStatus===Z_)&&r!==i.expectedStatus){(c=i.onError)==null||c.call(i,s.status);return}const a=DV(s);if(r===Z_){const f=s.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);i.onDone({begin:parseInt(p[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(u=i.onError)==null||u.call(i,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class MV{constructor(t){this._source=t,this._manager=new LV(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ze(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new NV(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new FV(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class NV{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=o=>e.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:r}=CT({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=xT(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=k0(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class FV{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=k0(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const UD=/^file:\/\/\/[a-zA-Z]:\//;function OV(n){const t=nr.get("url"),e=t.parse(n);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(n)?t.parse(`file:///${n}`):(e.host||(e.protocol="file:"),e)}class VV{constructor(t){this.source=t,this.url=OV(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ze(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new UV(this):new jV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new zV(this,t,e):new BV(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class zD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class $D{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function uv(n,t){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:t}}class jV extends zD{constructor(t){super(t);const e=i=>{if(i.statusCode===404){const a=new yc(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=CT({getResponseHeader:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=xT(s)};if(this._request=null,this._url.protocol==="http:"){const i=nr.get("http");this._request=i.request(uv(this._url,t.httpHeaders),e)}else{const i=nr.get("https");this._request=i.request(uv(this._url,t.httpHeaders),e)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class BV extends $D{constructor(t,e,i){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const o=t.httpHeaders[r];o!==void 0&&(this._httpHeaders[r]=o)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const s=r=>{if(r.statusCode===404){const o=new yc(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=nr.get("http");this._request=r.request(uv(this._url,this._httpHeaders),s)}else{const r=nr.get("https");this._request=r.request(uv(this._url,this._httpHeaders),s)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class UV extends zD{constructor(t){super(t);let e=decodeURIComponent(this._url.path);UD.test(this._url.href)&&(e=e.replace(/^\//,""));const i=nr.get("fs");i.promises.lstat(e).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new yc(`Missing PDF "${e}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class zV extends $D{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);UD.test(this._url.href)&&(s=s.replace(/^\//,""));const r=nr.get("fs");this._setReadableStream(r.createReadStream(s,{start:e,end:i-1}))}}const $V=1e5,Wn=30,HV=.8;var bR,Io,Kn,Pp,Rp,vl,Cr,Ip,kp,_l,Nu,Fu,ko,Ou,Dp,Vu,wl,Lp,Mp,Be,El,Al,Do,ju,oo,HD,WD,Xw,er,oy,GD,qD;let hv=(Be=class{constructor({textContentSource:t,container:e,viewport:i}){x(this,oo);x(this,Io,Promise.withResolvers());x(this,Kn,null);x(this,Pp,!1);x(this,Rp,!!((bR=globalThis.FontInspector)!=null&&bR.enabled));x(this,vl,null);x(this,Cr,null);x(this,Ip,0);x(this,kp,0);x(this,_l,null);x(this,Nu,null);x(this,Fu,0);x(this,ko,0);x(this,Ou,Object.create(null));x(this,Dp,[]);x(this,Vu,null);x(this,wl,[]);x(this,Lp,new WeakMap);x(this,Mp,null);var l;if(t instanceof ReadableStream)b(this,Vu,t);else if(typeof t=="object")b(this,Vu,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Kn,b(this,Nu,e)),b(this,ko,i.scale*(globalThis.devicePixelRatio||1)),b(this,Fu,i.rotation),b(this,Cr,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;b(this,Mp,[1,0,0,-1,-o,a+r]),b(this,kp,s),b(this,Ip,r),C(l=Be,er,GD).call(l),rc(e,i),h(this,Io).promise.catch(()=>{}).then(()=>{h(Be,ju).delete(this),b(this,Cr,null),b(this,Ou,null)})}render(){const t=()=>{h(this,_l).read().then(({value:e,done:i})=>{if(i){h(this,Io).resolve();return}h(this,vl)??b(this,vl,e.lang),Object.assign(h(this,Ou),e.styles),C(this,oo,HD).call(this,e.items),t()},h(this,Io).reject)};return b(this,_l,h(this,Vu).getReader()),h(Be,ju).add(this),t(),h(this,Io).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==h(this,Fu)&&(e==null||e(),b(this,Fu,s),rc(h(this,Nu),{rotation:s})),i!==h(this,ko)){e==null||e(),b(this,ko,i);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:C(r=Be,er,oy).call(r,h(this,vl))};for(const a of h(this,wl))o.properties=h(this,Lp).get(a),o.div=a,C(this,oo,Xw).call(this,o)}}cancel(){var e;const t=new vc("TextLayer task cancelled.");(e=h(this,_l))==null||e.cancel(t).catch(()=>{}),b(this,_l,null),h(this,Io).reject(t)}get textDivs(){return h(this,wl)}get textContentItemsStr(){return h(this,Dp)}static cleanup(){if(!(h(this,ju).size>0)){h(this,El).clear();for(const{canvas:t}of h(this,Al).values())t.remove();h(this,Al).clear()}}},Io=new WeakMap,Kn=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,vl=new WeakMap,Cr=new WeakMap,Ip=new WeakMap,kp=new WeakMap,_l=new WeakMap,Nu=new WeakMap,Fu=new WeakMap,ko=new WeakMap,Ou=new WeakMap,Dp=new WeakMap,Vu=new WeakMap,wl=new WeakMap,Lp=new WeakMap,Mp=new WeakMap,El=new WeakMap,Al=new WeakMap,Do=new WeakMap,ju=new WeakMap,oo=new WeakSet,HD=function(t){var s,r;if(h(this,Pp))return;(r=h(this,Cr)).ctx??(r.ctx=C(s=Be,er,oy).call(s,h(this,vl)));const e=h(this,wl),i=h(this,Dp);for(const o of t){if(e.length>$V){vt("Ignoring additional textDivs for performance reasons."),b(this,Pp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,Kn);b(this,Kn,document.createElement("span")),h(this,Kn).classList.add("markedContent"),o.id!==null&&h(this,Kn).setAttribute("id",`${o.id}`),a.append(h(this,Kn))}else o.type==="endMarkedContent"&&b(this,Kn,h(this,Kn).parentNode);continue}i.push(o.str),C(this,oo,WD).call(this,o)}},WD=function(t){var _;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};h(this,wl).push(e);const s=nt.transform(h(this,Mp),t.transform);let r=Math.atan2(s[1],s[0]);const o=h(this,Ou)[t.fontName];o.vertical&&(r+=Math.PI/2);const a=h(this,Rp)&&o.fontSubstitution||o.fontFamily,l=Math.hypot(s[2],s[3]),c=l*C(_=Be,er,qD).call(_,a,h(this,vl));let u,f;r===0?(u=s[4],f=s[5]-c):(u=s[4]+c*Math.sin(r),f=s[5]-c*Math.cos(r));const p="calc(var(--scale-factor)*",m=e.style;h(this,Kn)===h(this,Nu)?(m.left=`${(100*u/h(this,kp)).toFixed(2)}%`,m.top=`${(100*f/h(this,Ip)).toFixed(2)}%`):(m.left=`${p}${u.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(h(Be,Do)*l).toFixed(2)}px)`,m.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,h(this,Rp)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);A!==v&&Math.max(A,v)/Math.min(A,v)>1.5&&(g=!0)}if(g&&(i.canvasWidth=o.vertical?t.height:t.width),h(this,Lp).set(e,i),h(this,Cr).div=e,h(this,Cr).properties=i,C(this,oo,Xw).call(this,h(this,Cr)),i.hasText&&h(this,Kn).append(e),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),h(this,Kn).append(A)}},Xw=function(t){const{div:e,properties:i,ctx:s,prevFontSize:r,prevFontFamily:o}=t,{style:a}=e;let l="";if(h(Be,Do)>1&&(l=`scale(${1/h(Be,Do)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=i;(r!==f||o!==c)&&(s.font=`${f*h(this,ko)}px ${c}`,t.prevFontSize=f,t.prevFontFamily=c);const{width:p}=s.measureText(e.textContent);p>0&&(l=`scaleX(${u*h(this,ko)/p}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(a.transform=l)},er=new WeakSet,oy=function(t=null){let e=h(this,Al).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,Al).set(t,e)}return e},GD=function(){if(h(this,Do)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),b(this,Do,t.getBoundingClientRect().height),t.remove()},qD=function(t,e){const i=h(this,El).get(t);if(i)return i;const s=C(this,er,oy).call(this,e),r=s.font;s.canvas.width=s.canvas.height=Wn,s.font=`${Wn}px ${t}`;const o=s.measureText("");let a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(a){const f=a/(a+l);return h(this,El).set(t,f),s.canvas.width=s.canvas.height=0,s.font=r,f}s.strokeStyle="red",s.clearRect(0,0,Wn,Wn),s.strokeText("g",0,0);let c=s.getImageData(0,0,Wn,Wn).data;l=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){l=Math.ceil(f/4/Wn);break}s.clearRect(0,0,Wn,Wn),s.strokeText("A",0,Wn),c=s.getImageData(0,0,Wn,Wn).data,a=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){a=Wn-Math.floor(f/4/Wn);break}s.canvas.width=s.canvas.height=0,s.font=r;const u=a?a/(a+l):HV;return h(this,El).set(t,u),u},x(Be,er),x(Be,El,new Map),x(Be,Al,new Map),x(Be,Do,null),x(Be,ju,new Set),Be);function WV(){rD("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:t,viewport:e,...i}=arguments[0],s=Object.keys(i);s.length>0&&vt("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new hv({textContentSource:n,container:t,viewport:e}),{textDivs:o,textContentItemsStr:a}=r;return{promise:r.render(),textDivs:o,textContentItemsStr:a}}function GV(){rD("`updateTextLayer`, please use `TextLayer` instead.")}class kf{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(kf.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const c of r.children)s(c)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const qV=65536,KV=100,XV=5e3,YV=kn?aV:KO,QV=kn?lV:iD,JV=kn?oV:qO,ZV=kn?cV:sD;function t9(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Yw,{docId:e}=t,i=n.url?e9(n.url):null,s=n.data?n9(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof KD?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:qV;let u=n.worker instanceof fu?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!AT(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,_=n.CMapReaderFactory||QV,A=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,v=n.StandardFontDataFactory||ZV,w=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,D=n.isEvalSupported!==!1,F=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!kn,O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:kn,S=n.fontExtraProperties===!0,R=n.enableXfa===!0,k=n.ownerDocument||globalThis.document,M=n.disableRange===!0,V=n.disableStream===!0,L=n.disableAutoFetch===!0,Z=n.pdfBug===!0,ct=n.enableHWA===!0,gt=l?l.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!kn&&!P,z=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:_===iD&&v===sD&&m&&A&&bd(m,document.baseURI)&&bd(A,document.baseURI),tt=n.canvasFactory||new YV({ownerDocument:k,enableHWA:ct}),it=n.filterFactory||new JV({docId:e,ownerDocument:k}),It=null;FO(f);const at={canvasFactory:tt,filterFactory:it};if(z||(at.cMapReaderFactory=new _({baseUrl:m,isCompressed:g}),at.standardFontDataFactory=new v({baseUrl:A})),!u){const se={verbosity:f,port:Gr.workerPort};u=se.port?fu.fromPort(se):new fu(se),t._worker=u}const ht={docId:e,apiVersion:"4.4.168",data:s,password:a,disableAutoFetch:L,rangeChunkSize:c,length:gt,docBaseUrl:p,enableXfa:R,evaluatorOptions:{maxImageSize:T,disableFontFace:P,ignoreErrors:w,isEvalSupported:D,isOffscreenCanvasSupported:F,canvasMaxAreaInBytes:O,fontExtraProperties:S,useSystemFonts:G,cMapUrl:z?m:null,standardFontDataUrl:z?A:null}},de={disableFontFace:P,fontExtraProperties:S,ownerDocument:k,pdfBug:Z,styleElement:It,loadingParams:{disableAutoFetch:L,enableXfa:R}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const se=u.messageHandler.sendWithPromise("GetDocRequest",ht,s?[s.buffer]:null);let Yt;if(l)Yt=new CV(l,{disableRange:M,disableStream:V});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");Yt=(gn=>kn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&bd(gn.url)?new Tx(gn):new VV(gn):bd(gn.url)?new Tx(gn):new MV(gn))({url:i,length:gt,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:M,disableStream:V})}return se.then(Tt=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const gn=new Pd(e,Tt,u.port),Ri=new o9(gn,t,Yt,de,at);t._transport=Ri,gn.send("Ready",null)})}).catch(t._capability.reject),t}function e9(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(kn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function n9(n){if(kn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return C0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sx(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Yv;const Qv=class Qv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${li(Qv,Yv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Yv=new WeakMap,x(Qv,Yv,0);let Yw=Qv,KD=class{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class i9{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Lo,xr,Ui,Nc,ay;class s9{constructor(t,e,i,s=!1){x(this,Ui);x(this,Lo,null);x(this,xr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new ux:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new XD,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Im({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=To.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}){var T,D;(T=this._stats)==null||T.time("Overall");const f=this._transport.getRenderingIntent(i,s,u),{renderingIntent:p,cacheKey:m}=f;b(this,xr,!1),C(this,Ui,ay).call(this),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(m);g||(g=Object.create(null),this._intentStates.set(m,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const _=!!(p&Oi.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(f));const A=F=>{var O;g.renderTasks.delete(v),(this._maybeCleanupAfterRender||_)&&b(this,xr,!0),C(this,Ui,Nc).call(this,!_),F?(v.capability.reject(F),this._abortOperatorList({intentState:g,reason:F instanceof Error?F:new Error(F)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(O=globalThis.Stats)!=null&&O.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Jw({callback:A,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(v);const w=v.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([F,O])=>{var P;if(this.destroyed){A();return}if((P=this._stats)==null||P.time("Rendering"),!(O.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:F,optionalContentConfig:O}),v.operatorListChanged()}).catch(A),w}getOperatorList({intent:t="display",annotationMode:e=To.ENABLE,printAnnotationStorage:i=null}={}){var l;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const r=this._transport.getRenderingIntent(t,e,i,!0);let o=this._intentStates.get(r.cacheKey);o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>kf.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:c}){if(c){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),b(this,xr,!1),C(this,Ui,ay).call(this),Promise.all(t)}cleanup(t=!1){b(this,xr,!0);const e=C(this,Ui,Nc).call(this,!1);return t&&e&&this._stats&&(this._stats=new ux),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&C(this,Ui,Nc).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i}){const{map:s,transfer:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s},r).getReader(),l=this._intentStates.get(e);l.streamReader=a;const c=()=>{a.read().then(({value:u,done:f})=>{if(f){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),c())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const f of l.renderTasks)f.operatorListChanged();C(this,Ui,Nc).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof ET){let s=KV;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new vc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Lo=new WeakMap,xr=new WeakMap,Ui=new WeakSet,Nc=function(t=!1){if(C(this,Ui,ay).call(this),!h(this,xr)||this.destroyed)return!1;if(t)return b(this,Lo,setTimeout(()=>{b(this,Lo,null),C(this,Ui,Nc).call(this,!1)},XV)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,xr,!1),!0},ay=function(){h(this,Lo)&&(clearTimeout(h(this,Lo)),b(this,Lo,null))};var Tl,Jv;class r9{constructor(){x(this,Tl,new Set);x(this,Jv,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};h(this,Jv).then(()=>{for(const s of h(this,Tl))s.call(this,i)})}addEventListener(t,e){h(this,Tl).add(e)}removeEventListener(t,e){h(this,Tl).delete(e)}terminate(){h(this,Tl).clear()}}Tl=new WeakMap,Jv=new WeakMap;const yr={isWorkerDisabled:!1,fakeWorkerId:0};kn&&(yr.isWorkerDisabled=!0,Gr.workerSrc||(Gr.workerSrc="./pdf.worker.mjs")),yr.isSameOrigin=function(n,t){let e;try{if(e=new URL(n),!e.origin||e.origin==="null")return!1}catch{return!1}const i=new URL(t,e);return e.origin===i.origin},yr.createCDNWrapper=function(n){const t=`await import("${n}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Sl,Bu,ly,Uu,cy;const ui=class ui{constructor({name:t=null,port:e=null,verbosity:i=OO()}={}){x(this,Bu);var s;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=h(ui,Sl))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(h(ui,Sl)||b(ui,Sl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return kn?Promise.all([nr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Pd("main","worker",t),this._messageHandler.on("ready",function(){}),C(this,Bu,ly).call(this)}_initialize(){if(yr.isWorkerDisabled||h(ui,Uu,cy)){this._setupFakeWorker();return}let{workerSrc:t}=ui;try{yr.isSameOrigin(window.location.href,t)||(t=yr.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Pd("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=e,this._webWorker=e,C(this,Bu,ly).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{S0("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){yr.isWorkerDisabled||(vt("Setting up fake worker."),yr.isWorkerDisabled=!0),ui._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new r9;this._port=e;const i=`fake${yr.fakeWorkerId++}`,s=new Pd(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new Pd(i,i+"_worker",e),C(this,Bu,ly).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=h(ui,Sl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=h(this,Sl))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ui(t)}static get workerSrc(){if(Gr.workerSrc)return Gr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pt(this,"_setupFakeWorkerGlobal",(async()=>h(this,Uu,cy)?h(this,Uu,cy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Sl=new WeakMap,Bu=new WeakSet,ly=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Uu=new WeakSet,cy=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(ui,Uu),x(ui,Sl);let fu=ui;var Pr,Ms,zu,$u,Ns,bl,Rd;class o9{constructor(t,e,i,s,r){x(this,bl);x(this,Pr,new Map);x(this,Ms,new Map);x(this,zu,new Map);x(this,$u,new Map);x(this,Ns,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new XD,this.fontLoader=new sV({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Pt(this,"annotationStorage",new bT)}getRenderingIntent(t,e=To.ENABLE,i=null,s=!1){let r=Oi.DISPLAY,o=zw;switch(t){case"any":r=Oi.ANY;break;case"display":break;case"print":r=Oi.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case To.DISABLE:r+=Oi.ANNOTATIONS_DISABLE;break;case To.ENABLE:break;case To.ENABLE_FORMS:r+=Oi.ANNOTATIONS_FORMS;break;case To.ENABLE_STORAGE:r+=Oi.ANNOTATIONS_STORAGE,o=(r&Oi.PRINT&&i instanceof LD?i:this.annotationStorage).serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${e}`)}return s&&(r+=Oi.OPLIST),{renderingIntent:r,cacheKey:`${r}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=h(this,Ns))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of h(this,Ms).values())t.push(s._destroy());h(this,Ms).clear(),h(this,zu).clear(),h(this,$u).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,Pr).clear(),this.filterFactory.destroy(),hv.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new vc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{ze(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}ze(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",i=>{const s=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var o;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),r.onProgress=a=>{var l;(l=e.onProgress)==null||l.call(e,{loaded:a.loaded,total:a.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),t.on("GetRangeReader",(i,s)=>{ze(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}ze(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new i9(i,this))}),t.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new _w(i.message,i.code);break;case"InvalidPDFException":s=new Zk(i.message);break;case"MissingPDFException":s=new yc(i.message);break;case"UnexpectedResponseException":s=new b0(i.message,i.status);break;case"UnknownErrorException":s=new ww(i.message,i.details);break;default:Bt("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",i=>{if(b(this,Ns,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?h(this,Ns).reject(r):h(this,Ns).resolve({password:r})};try{e.onPassword(s,i.code)}catch(r){h(this,Ns).reject(r)}}else h(this,Ns).reject(new _w(i.message,i.code));return h(this,Ns).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;h(this,Ms).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in r){const m=r.error;vt(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,g)=>globalThis.FontInspector.fontAdded(m,g):null,f=new rV(r,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(i,f)});break;case"CopyLocalImage":const{imageRef:p}=r;ze(p,"The imageRef must be defined.");for(const m of h(this,Ms).values())for(const[,g]of m.objs)if((g==null?void 0:g.ref)===p)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var l;if(this.destroyed)return;const a=h(this,Ms).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>DO&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=h(this,zu).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&h(this,$u).set(r.refStr,t);const o=new s9(e,r,this,this._params.pdfBug);return h(this,Ms).set(e,o),o});return h(this,zu).set(e,s),s}getPageIndex(t){return Sx(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,bl,Rd).call(this,"GetFieldObjects")}hasJSActions(){return C(this,bl,Rd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,bl,Rd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,bl,Rd).call(this,"GetOptionalContentConfig").then(e=>new bV(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=h(this,Pr).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new TV(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,Pr).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of h(this,Ms).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),h(this,Pr).clear(),this.filterFactory.destroy(!0),hv.cleanup()}}cachedPageNumber(t){if(!Sx(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return h(this,$u).get(e)??null}}Pr=new WeakMap,Ms=new WeakMap,zu=new WeakMap,$u=new WeakMap,Ns=new WeakMap,bl=new WeakSet,Rd=function(t,e=null){const i=h(this,Pr).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return h(this,Pr).set(t,s),s};const Ig=Symbol("INITIAL_DATA");var os,Np,Qw;class XD{constructor(){x(this,Np);x(this,os,Object.create(null))}get(t,e=null){if(e){const s=C(this,Np,Qw).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=h(this,os)[t];if(!i||i.data===Ig)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=h(this,os)[t];return!!e&&e.data!==Ig}resolve(t,e=null){const i=C(this,Np,Qw).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in h(this,os)){const{data:i}=h(this,os)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}b(this,os,Object.create(null))}*[Symbol.iterator](){for(const t in h(this,os)){const{data:e}=h(this,os)[t];e!==Ig&&(yield[t,e])}}}os=new WeakMap,Np=new WeakSet,Qw=function(t){var e;return(e=h(this,os))[t]||(e[t]={...Promise.withResolvers(),data:Ig})};var Mo;class a9{constructor(t){x(this,Mo,null);b(this,Mo,t),this.onContinue=null}get promise(){return h(this,Mo).capability.promise}cancel(t=0){h(this,Mo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=h(this,Mo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=h(this,Mo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Mo=new WeakMap;var No,Cl;const Ka=class Ka{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){x(this,No,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new a9(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(Ka,Cl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(Ka,Cl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new du(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),h(this,No)&&(window.cancelAnimationFrame(h(this,No)),b(this,No,null)),h(Ka,Cl).delete(this._canvas),this.callback(t||new ET(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,No,window.requestAnimationFrame(()=>{b(this,No,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(Ka,Cl).delete(this._canvas),this.callback())))}};No=new WeakMap,Cl=new WeakMap,x(Ka,Cl,new WeakSet);let Jw=Ka;const l9="4.4.168",c9="19fbc8998";function bx(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function pd(n){return Math.max(0,Math.min(255,255*n))}class Cx{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=pd(t),[t,t,t]}static G_HTML([t]){const e=bx(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(pd)}static RGB_HTML(t){return`#${t.map(bx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[pd(1-Math.min(1,t+s)),pd(1-Math.min(1,i+s)),pd(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class YD{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{s.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var f,p;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);o.append(m),a&&kf.shouldBuildText(s.name)&&c.push(m)}return{textDivs:c}}const u=[[s,-1,o]];for(;u.length>0;){const[m,g,_]=u.at(-1);if(g+1===m.children.length){u.pop();continue}const A=m.children[++u.at(-1)[1]];if(A===null)continue;const{name:v}=A;if(v==="#text"){const T=document.createTextNode(A.value);c.push(T),_.append(T);continue}const w=(f=A==null?void 0:A.attributes)!=null&&f.xmlns?document.createElementNS(A.attributes.xmlns,v):document.createElement(v);if(_.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:r,linkService:i}),((p=A.children)==null?void 0:p.length)>0)u.push([A,-1,w]);else if(A.value){const T=document.createTextNode(A.value);a&&kf.shouldBuildText(v)&&c.push(T),w.append(T)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Lm=1e3,u9=9,ac=new WeakSet;function qr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class h9{static create(t){switch(t.data.annotationType){case Ne.LINK:return new QD(t);case Ne.TEXT:return new d9(t);case Ne.WIDGET:switch(t.data.fieldType){case"Tx":return new f9(t);case"Btn":return t.data.radioButton?new tL(t):t.data.checkBox?new m9(t):new g9(t);case"Ch":return new y9(t);case"Sig":return new p9(t)}return new _c(t);case Ne.POPUP:return new tE(t);case Ne.FREETEXT:return new rL(t);case Ne.LINE:return new _9(t);case Ne.SQUARE:return new w9(t);case Ne.CIRCLE:return new E9(t);case Ne.POLYLINE:return new oL(t);case Ne.CARET:return new T9(t);case Ne.INK:return new aL(t);case Ne.POLYGON:return new A9(t);case Ne.HIGHLIGHT:return new S9(t);case Ne.UNDERLINE:return new b9(t);case Ne.SQUIGGLY:return new C9(t);case Ne.STRIKEOUT:return new x9(t);case Ne.STAMP:return new lL(t);case Ne.FILEATTACHMENT:return new P9(t);default:return new Se(t)}}}var xl,Hu,Wu,Fp,Zw;const YS=class YS{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){x(this,Fp);x(this,xl,null);x(this,Hu,!1);x(this,Wu,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get hasPopupData(){return YS._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;h(this,xl)||b(this,xl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&C(this,Fp,Zw).call(this,e),(i=h(this,Wu))==null||i.popup.updateEdited(t)}resetEdited(){var t;h(this,xl)&&(C(this,Fp,Zw).call(this,h(this,xl).rect),(t=h(this,Wu))==null||t.popup.resetEdited(),b(this,xl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof _c||(r.tabIndex=Lm);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof tE){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,r),r}const{width:a,height:l}=qr(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(_>0||A>0){const w=`calc(${_}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;o.borderRadius=w}else if(this instanceof tL){const w=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case dd.SOLID:o.borderStyle="solid";break;case dd.DASHED:o.borderStyle="dashed";break;case dd.BEVELED:vt("Unimplemented border style: beveled");break;case dd.INSET:vt("Unimplemented border style: inset");break;case dd.UNDERLINE:o.borderBottomStyle="solid";break}const v=e.borderColor||null;v?(b(this,Hu,!0),o.borderColor=nt.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const c=nt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:m}=s.rawDims;o.left=`${100*(c[0]-p)/u}%`,o.top=`${100*(c[1]-m)/f}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(o.width=`${100*a/u}%`,o.height=`${100*l/f}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=qr(this.data.rect);let a,l;t%180===0?(a=100*r/i,l=100*o/s):(a=100*o/i,l=100*r/s),e.style.width=`${a}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],a=r.slice(1);s.target.style[i]=Cx[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Cx[`${o}_rgb`](a)})};return Pt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const a={detail:{[s]:r},target:t};o(a),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,A,v,w]=t.subarray(2,6);if(s===_&&r===A&&e===v&&i===w)return}const{style:o}=this.container;let a;if(h(this,Hu)){const{borderColor:_,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=s-e,c=r-i,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const m=u.createElement("clipPath"),g=`clippath_${this.data.id}`;m.setAttribute("id",g),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let _=2,A=t.length;_<A;_+=8){const v=t[_],w=t[_+1],T=t[_+2],D=t[_+3],F=u.createElement("rect"),O=(T-e)/l,P=(r-w)/c,S=(v-T)/l,R=(w-D)/c;F.setAttribute("x",O),F.setAttribute("y",P),F.setAttribute("width",S),F.setAttribute("height",R),m.append(F),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${P}" width="${S}" height="${R}"/>`)}h(this,Hu)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=b(this,Wu,new tE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){Bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!ac.has(c)){vt(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:c})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&ac.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};xl=new WeakMap,Hu=new WeakMap,Wu=new WeakMap,Fp=new WeakSet,Zw=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t);const{width:c,height:u}=qr(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,s===0?(e.width=`${100*c/r}%`,e.height=`${100*u/o}%`):this.setRotation(s)};let Se=YS;var wi,Ba,JD,ZD;class QD extends Se{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,wi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(C(this,wi,JD).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(C(this,wi,ZD).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&C(this,wi,Ba).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),C(this,wi,Ba).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),C(this,wi,Ba).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),C(this,wi,Ba).call(this),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var f;s==null||s();const{fields:r,refs:o,include:a}=i,l=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const m of r){const g=this._fieldObjects[m]||[];for(const{id:_}of g)p.add(_)}for(const m of Object.values(this._fieldObjects))for(const g of m)p.has(g.id)===a&&l.push(g)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,u=[];for(const p of l){const{id:m}=p;switch(u.push(m),p.type){case"text":{const _=p.defaultValue||"";c.setValue(m,{value:_});break}case"checkbox":case"radiobutton":{const _=p.defaultValue===p.exportValues;c.setValue(m,{value:_});break}case"combobox":case"listbox":{const _=p.defaultValue||"";c.setValue(m,{value:_});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!ac.has(g)){vt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}wi=new WeakSet,Ba=function(){this.container.setAttribute("data-internal-link","")},JD=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},C(this,wi,Ba).call(this)},ZD=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),C(this,wi,Ba).call(this)};class d9 extends Se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class _c extends Se{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ti.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var a;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,a;for(const[l,c]of i)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":nt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||u9,r=t.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(K_*s))||1,f=c/u;o=Math.min(s,l(f/K_))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/K_))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=nt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class f9 extends _c{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",c??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ac.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Lm,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(i,"value",p.target.value,"value"),u.formattedValue=null}),i.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";i.value=u.userValue=m,u.formattedValue=null});let f=p=>{const{formattedValue:m}=u;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var _;if(u.focused)return;const{target:g}=m;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(u.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const g={value(_){u.userValue=_.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),_.target.value=u.userValue},formattedValue(_){const{formattedValue:A}=_.detail;u.formattedValue=A,A!=null&&_.target!==document.activeElement&&(_.target.value=A),t.setValue(e,{formattedValue:A})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var T;const{charLimit:A}=_.detail,{target:v}=_;if(A===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",A);let w=u.userValue;!w||w.length<=A||(w=w.slice(0,A),v.value=u.userValue=w,t.setValue(e,{value:w}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(g,m)}),i.addEventListener("keydown",m=>{var A;u.commitKey=1;let g=-1;if(m.key==="Escape"?g=0:m.key==="Enter"&&!this.data.multiLine?g=2:m.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:_}=m.target;u.lastCommittedValue!==_&&(u.lastCommittedValue=_,u.userValue=_,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:g,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,i.addEventListener("blur",m=>{var _,A;if(!u.focused||!m.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(u.focused=!1);const{value:g}=m.target;u.userValue=g,u.lastCommittedValue!==g&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",m=>{var F;u.lastCommittedValue=null;const{data:g,target:_}=m,{value:A,selectionStart:v,selectionEnd:w}=_;let T=v,D=w;switch(m.inputType){case"deleteWordBackward":{const O=A.substring(0,v).match(/\w*[^\w]*$/);O&&(T-=O[0].length);break}case"deleteWordForward":{const O=A.substring(v).match(/^[^\w]*\w*/);O&&(D+=O[0].length);break}case"deleteContentBackward":v===w&&(T-=1);break;case"deleteContentForward":v===w&&(D+=1);break}m.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,change:g||"",willCommit:!1,selStart:T,selEnd:D}})}),this._setEventListeners(i,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&i.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class p9 extends _c{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class m9 extends _c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ac.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Lm,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i)){const u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class tL extends _c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(ac.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Lm,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=u&&f.id===i;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class g9 extends QD{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class y9 extends _c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");ac.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Lm;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,i.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),s.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,g=>g.selected).map(g=>g[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const m=p.detail.value,g=new Set(Array.isArray(m)?m:[m]);for(const _ of s.options)_.selected=g.has(_.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,g=p.detail.remove;m[g].selected=!1,s.remove(g),m.length>0&&Array.prototype.findIndex.call(m,A=>A.selected)===-1&&(m[0].selected=!0),t.setValue(e,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(p){const{index:m,displayValue:g,exportValue:_}=p.detail.insert,A=s.children[m],v=document.createElement("option");v.textContent=g,v.value=_,A?A.before(v):s.append(v),t.setValue(e,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const g of m){const{displayValue:_,exportValue:A}=g,v=document.createElement("option");v.textContent=_,v.value=A,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const m=new Set(p.detail.indices);for(const g of p.target.options)g.selected=m.has(g.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),s.addEventListener("input",u=>{var m;const f=a(!0),p=a(!1);t.setValue(e,{value:f}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class tE extends Se{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Se._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new v9({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${eD}${i}`).join(",")),this.container}}var Gu,Zv,t0,qu,Pl,ge,Rr,Rl,Op,Vp,Ku,Ir,as,kr,jp,Dr,Bp,Il,kl,Ut,uy,eE,eL,nL,iL,sL,hy,dy,nE;class v9{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:f}){x(this,Ut);x(this,Gu,C(this,Ut,iL).bind(this));x(this,Zv,C(this,Ut,nE).bind(this));x(this,t0,C(this,Ut,dy).bind(this));x(this,qu,C(this,Ut,hy).bind(this));x(this,Pl,null);x(this,ge,null);x(this,Rr,null);x(this,Rl,null);x(this,Op,null);x(this,Vp,null);x(this,Ku,null);x(this,Ir,!1);x(this,as,null);x(this,kr,null);x(this,jp,null);x(this,Dr,null);x(this,Bp,null);x(this,Il,null);x(this,kl,!1);var p;b(this,ge,t),b(this,Bp,s),b(this,Rr,o),b(this,Dr,a),b(this,Vp,l),b(this,Pl,e),b(this,jp,c),b(this,Ku,u),b(this,Op,i),b(this,Rl,oD.toDateObject(r)),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",h(this,qu)),m.addEventListener("mouseenter",h(this,t0)),m.addEventListener("mouseleave",h(this,Zv)),m.classList.add("popupTriggerArea");for(const m of i)(p=m.container)==null||p.addEventListener("keydown",h(this,Gu));h(this,ge).hidden=!0,f&&C(this,Ut,hy).call(this)}render(){if(h(this,as))return;const t=b(this,as,document.createElement("div"));if(t.className="popup",h(this,Pl)){const r=t.style.outlineColor=nt.makeHexColor(...h(this,Pl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=nt.makeHexColor(...h(this,Pl).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=h(this,Bp),t.append(e),h(this,Rl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:h(this,Rl).toLocaleDateString(),time:h(this,Rl).toLocaleTimeString()})),e.append(r)}const s=h(this,Ut,uy);if(s)YD.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(h(this,Rr));t.append(r)}h(this,ge).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;h(this,Il)||b(this,Il,{contentsObj:h(this,Rr),richText:h(this,Dr)}),t&&b(this,kr,null),e&&(b(this,Dr,C(this,Ut,nL).call(this,e)),b(this,Rr,null)),(i=h(this,as))==null||i.remove(),b(this,as,null)}resetEdited(){var t;h(this,Il)&&({contentsObj:li(this,Rr)._,richText:li(this,Dr)._}=h(this,Il),b(this,Il,null),(t=h(this,as))==null||t.remove(),b(this,as,null),b(this,kr,null))}forceHide(){b(this,kl,this.isVisible),h(this,kl)&&(h(this,ge).hidden=!0)}maybeShow(){h(this,kl)&&(h(this,as)||C(this,Ut,dy).call(this),b(this,kl,!1),h(this,ge).hidden=!1)}get isVisible(){return h(this,ge).hidden===!1}}Gu=new WeakMap,Zv=new WeakMap,t0=new WeakMap,qu=new WeakMap,Pl=new WeakMap,ge=new WeakMap,Rr=new WeakMap,Rl=new WeakMap,Op=new WeakMap,Vp=new WeakMap,Ku=new WeakMap,Ir=new WeakMap,as=new WeakMap,kr=new WeakMap,jp=new WeakMap,Dr=new WeakMap,Bp=new WeakMap,Il=new WeakMap,kl=new WeakMap,Ut=new WeakSet,uy=function(){const t=h(this,Dr),e=h(this,Rr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&h(this,Dr).html||null},eE=function(){var t,e,i;return((i=(e=(t=h(this,Ut,uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},eL=function(){var t,e,i;return((i=(e=(t=h(this,Ut,uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},nL=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:h(this,Ut,eL),fontSize:h(this,Ut,eE)?`calc(${h(this,Ut,eE)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},iL=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&h(this,Ir))&&C(this,Ut,hy).call(this)},sL=function(){if(h(this,kr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=h(this,Vp);let o=!!h(this,Ku),a=o?h(this,Ku):h(this,jp);for(const g of h(this,Op))if(!a||nt.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=nt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,f=l[0]+u,p=l[1];b(this,kr,[100*(f-s)/e,100*(p-r)/i]);const{style:m}=h(this,ge);m.left=`${h(this,kr)[0]}%`,m.top=`${h(this,kr)[1]}%`},hy=function(){b(this,Ir,!h(this,Ir)),h(this,Ir)?(C(this,Ut,dy).call(this),h(this,ge).addEventListener("click",h(this,qu)),h(this,ge).addEventListener("keydown",h(this,Gu))):(C(this,Ut,nE).call(this),h(this,ge).removeEventListener("click",h(this,qu)),h(this,ge).removeEventListener("keydown",h(this,Gu)))},dy=function(){h(this,as)||this.render(),this.isVisible?h(this,Ir)&&h(this,ge).classList.add("focused"):(C(this,Ut,sL).call(this),h(this,ge).hidden=!1,h(this,ge).style.zIndex=parseInt(h(this,ge).style.zIndex)+1e3)},nE=function(){h(this,ge).classList.remove("focused"),!(h(this,Ir)||!this.isVisible)&&(h(this,ge).hidden=!0,h(this,ge).style.zIndex=parseInt(h(this,ge).style.zIndex)-1e3)};class rL extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ct.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Up;class _9 extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Up,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:s}=qr(e.rect),r=this.svgFactory.create(i,s,!0),o=b(this,Up,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,Up)}addHighlightArea(){this.container.classList.add("highlightArea")}}Up=new WeakMap;var zp;class w9 extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,zp,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:s}=qr(e.rect),r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=b(this,zp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}zp=new WeakMap;var $p;class E9 extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,$p,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:s}=qr(e.rect),r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=b(this,$p,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,$p)}addHighlightArea(){this.container.classList.add("highlightArea")}}$p=new WeakMap;var Hp;class oL extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Hp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:o,height:a}=qr(e),l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=i.length;f<p;f+=2){const m=i[f]-e[0],g=e[3]-i[f+1];c.push(`${m},${g}`)}c=c.join(" ");const u=b(this,Hp,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,Hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hp=new WeakMap;class A9 extends oL{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class T9 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wp;class aL extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Wp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ct.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:o,height:a}=qr(e),l=this.svgFactory.create(o,a,!0);for(const c of i){let u=[];for(let p=0,m=c.length;p<m;p+=2){const g=c[p]-e[0],_=e[3]-c[p+1];u.push(`${g},${_}`)}u=u.join(" ");const f=this.svgFactory.createElement(this.svgElementName);h(this,Wp).push(f),f.setAttribute("points",u),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),l.append(f)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return h(this,Wp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wp=new WeakMap;class S9 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class b9 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class C9 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class x9 extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class lL extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Gp,qp,iE;class P9 extends Se{constructor(e){var s;super(e,{isRenderable:!0});x(this,qp);x(this,Gp,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,qp,iE).bind(this)),b(this,Gp,s);const{isMac:r}=ti.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&C(this,qp,iE).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return h(this,Gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gp=new WeakMap,qp=new WeakSet,iE=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Kp,Dl,Xu,hc,cL,sE,CR;let R9=(CR=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o}){x(this,hc);x(this,Kp,null);x(this,Dl,null);x(this,Xu,new Map);this.div=t,b(this,Kp,e),b(this,Dl,i),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(t){var o;const{annotations:e}=t,i=this.div;rc(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new wT,annotationStorage:t.annotationStorage||new bT,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Ne.POPUP;if(l){const f=s.get(a.id);if(!f)continue;r.elements=f}else{const{width:f,height:p}=qr(a.rect);if(f<=0||p<=0)continue}r.data=a;const c=h9.create(r);if(!c.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),C(this,hc,cL).call(this,u,a.id),c.annotationEditorType>0&&(h(this,Xu).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}C(this,hc,sE).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,rc(e,{rotation:t.rotation}),C(this,hc,sE).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(h(this,Xu).values())}getEditableAnnotation(t){return h(this,Xu).get(t)}},Kp=new WeakMap,Dl=new WeakMap,Xu=new WeakMap,hc=new WeakSet,cL=function(t,e){var s;const i=t.firstChild||t;i.id=`${eD}${e}`,this.div.append(t),(s=h(this,Kp))==null||s.moveElementInDOM(this.div,t,i,!1)},sE=function(){if(!h(this,Dl))return;const t=this.div;for(const[e,i]of h(this,Dl)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}h(this,Dl).clear()},CR);const kg=/\r\n?|\n/g;var Xp,Yp,Qp,Jp,Zp,ls,pi,tm,mi,Yu,Me,uL,hL,dL,fy,Qr,py,my,fL,oE,pL;const qt=class qt extends Ot{constructor(e){super({...e,name:"freeTextEditor"});x(this,Me);x(this,Xp,this.editorDivBlur.bind(this));x(this,Yp,this.editorDivFocus.bind(this));x(this,Qp,this.editorDivInput.bind(this));x(this,Jp,this.editorDivKeydown.bind(this));x(this,Zp,this.editorDivPaste.bind(this));x(this,ls);x(this,pi,"");x(this,tm,`${this.id}-editor`);x(this,mi);x(this,Yu,null);b(this,ls,e.color||qt._defaultColor||Ot._defaultLineColor),b(this,mi,e.fontSize||qt._defaultFontSize)}static get _keyboardManager(){const e=qt.prototype,i=o=>o.isEmpty(),s=oc.TRANSLATE_SMALL,r=oc.TRANSLATE_BIG;return Pt(this,"_keyboardManager",new km([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){Ot.initialize(e,i,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case dt.FREETEXT_SIZE:qt._defaultFontSize=i;break;case dt.FREETEXT_COLOR:qt._defaultColor=i;break}}updateParams(e,i){switch(e){case dt.FREETEXT_SIZE:C(this,Me,uL).call(this,i);break;case dt.FREETEXT_COLOR:C(this,Me,hL).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[dt.FREETEXT_SIZE,qt._defaultFontSize],[dt.FREETEXT_COLOR,qt._defaultColor||Ot._defaultLineColor]]}get propertiesToUpdate(){return[[dt.FREETEXT_SIZE,h(this,mi)],[dt.FREETEXT_COLOR,h(this,ls)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-qt._internalPadding*e,-(qt._internalPadding+h(this,mi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ct.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",h(this,Jp),{signal:e}),this.editorDiv.addEventListener("focus",h(this,Yp),{signal:e}),this.editorDiv.addEventListener("blur",h(this,Xp),{signal:e}),this.editorDiv.addEventListener("input",h(this,Qp),{signal:e}),this.editorDiv.addEventListener("paste",h(this,Zp),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,tm)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",h(this,Jp)),this.editorDiv.removeEventListener("focus",h(this,Yp)),this.editorDiv.removeEventListener("blur",h(this,Xp)),this.editorDiv.removeEventListener("input",h(this,Qp)),this.editorDiv.removeEventListener("paste",h(this,Zp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=h(this,pi),i=b(this,pi,C(this,Me,dL).call(this).trimEnd());if(e===i)return;const s=r=>{if(b(this,pi,r),!r){this.remove();return}C(this,Me,my).call(this),this._uiManager.rebuild(this),C(this,Me,fy).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),C(this,Me,fy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){qt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,tm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ot._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${h(this,mi)}px * var(--scale-factor))`,s.color=h(this,ls),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),lv(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=h(this,Yu);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,f]=this.pageDimensions,[p,m]=this.pageTranslation;let g,_;switch(this.rotation){case 0:g=e+(a[0]-p)/u,_=i+this.height-(a[1]-m)/f;break;case 90:g=e+(a[0]-p)/u,_=i-(a[1]-m)/f,[l,c]=[c,-l];break;case 180:g=e-this.width+(a[0]-p)/u,_=i-(a[1]-m)/f,[l,c]=[-l,-c];break;case 270:g=e+(a[0]-p-this.height*f)/u,_=i+(a[1]-m-this.width*u)/f,[l,c]=[-c,l];break}this.setAt(g*r,_*o,l,c)}else this.setAt(e*r,i*o,this.width*r,this.height*o);C(this,Me,my).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var g,_,A;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=C(g=qt,Qr,oE).call(g,i.getData("text")||"").replaceAll(kg,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(kg,"")),v!==this.editorDiv){let w=u;for(const T of this.editorDiv.childNodes){if(T===v){w=f;continue}w.push(C(_=qt,Qr,py).call(_,T))}}u.push(l.nodeValue.slice(0,c).replaceAll(kg,""))}else if(l===this.editorDiv){let v=u,w=0;for(const T of this.editorDiv.childNodes)w++===c&&(v=f),v.push(C(A=qt,Qr,py).call(A,T))}b(this,pi,`${u.join(`
`)}${r}${f.join(`
`)}`),C(this,Me,my).call(this);const p=new Range;let m=u.reduce((v,w)=>v+w.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(m<=w){p.setStart(v,m),p.setEnd(v,m);break}m-=w}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(e,i,s){var a;let r=null;if(e instanceof rL){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:f,id:p},textContent:m,textPosition:g,parent:{page:{pageNumber:_}}}=e;if(!m||m.length===0)return null;r=e={annotationType:Ct.FREETEXT,color:Array.from(c),fontSize:l,value:m.join(`
`),position:g,pageIndex:_-1,rect:u.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(e,i,s);return b(o,mi,e.fontSize),b(o,ls,nt.makeHexColor(...e.color)),b(o,pi,C(a=qt,Qr,oE).call(a,e.value)),o.annotationElementId=e.id||null,b(o,Yu,r),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=qt._internalPadding*this.parentScale,s=this.getRect(i,i),r=Ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,ls)),o={annotationType:Ct.FREETEXT,color:r,fontSize:h(this,mi),value:C(this,Me,fL).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!C(this,Me,pL).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${h(this,mi)}px * var(--scale-factor))`,s.color=h(this,ls),i.replaceChildren();for(const o of h(this,pi).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const r=qt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:h(this,pi)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Xp=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,ls=new WeakMap,pi=new WeakMap,tm=new WeakMap,mi=new WeakMap,Yu=new WeakMap,Me=new WeakSet,uL=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-h(this,mi))*this.parentScale),b(this,mi,r),C(this,Me,fy).call(this)},s=h(this,mi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},hL=function(e){const i=r=>{b(this,ls,this.editorDiv.style.color=r)},s=h(this,ls);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},dL=function(){var i;const e=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)e.push(C(i=qt,Qr,py).call(i,s));return e.join(`
`)},fy=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Qr=new WeakSet,py=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(kg,"")},my=function(){if(this.editorDiv.replaceChildren(),!!h(this,pi))for(const e of h(this,pi).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},fL=function(){return h(this,pi).replaceAll(""," ")},oE=function(e){return e.replaceAll(" ","")},pL=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=h(this,Yu);return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==o},x(qt,Qr),mt(qt,"_freeTextDefaultContent",""),mt(qt,"_internalPadding",0),mt(qt,"_defaultColor",null),mt(qt,"_defaultFontSize",10),mt(qt,"_type","freetext"),mt(qt,"_editorType",Ct.FREETEXT);let rE=qt;var em,Fo,cs,zn,mL,gy,gL,yL,lE;class aE{constructor(t,e=0,i=0,s=!0){x(this,zn);x(this,em);x(this,Fo,[]);x(this,cs,[]);let r=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:v,y:w,width:T,height:D}of t){const F=Math.floor((v-e)/u)*u,O=Math.ceil((v+T+e)/u)*u,P=Math.floor((w-e)/u)*u,S=Math.ceil((w+D+e)/u)*u,R=[F,P,S,!0],k=[O,P,S,!1];h(this,Fo).push(R,k),r=Math.min(r,F),o=Math.max(o,O),a=Math.min(a,P),l=Math.max(l,S)}const f=o-r+2*i,p=l-a+2*i,m=r-i,g=a-i,_=h(this,Fo).at(s?-1:-2),A=[_[0],_[2]];for(const v of h(this,Fo)){const[w,T,D]=v;v[0]=(w-m)/f,v[1]=(T-g)/p,v[2]=(D-g)/p}b(this,em,{x:m,y:g,width:f,height:p,lastPoint:A})}getOutlines(){h(this,Fo).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of h(this,Fo))e[3]?(t.push(...C(this,zn,lE).call(this,e)),C(this,zn,gL).call(this,e)):(C(this,zn,yL).call(this,e),t.push(...C(this,zn,lE).call(this,e)));return C(this,zn,mL).call(this,t)}}em=new WeakMap,Fo=new WeakMap,cs=new WeakMap,zn=new WeakSet,mL=function(t){const e=[],i=new Set;for(const o of t){const[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,l,c,u,f]=o;i.delete(o);let p=a,m=l;for(r=[a,c],s.push(r);;){let g;if(i.has(u))g=u;else if(i.has(f))g=f;else break;i.delete(g),[a,l,c,u,f]=g,p!==a&&(r.push(p,m,a,m===l?l:c),p=a),m=m===l?c:l}r.push(p,m)}return new I9(s,h(this,em))},gy=function(t){const e=h(this,cs);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},gL=function([,t,e]){const i=C(this,zn,gy).call(this,t);h(this,cs).splice(i,0,[t,e])},yL=function([,t,e]){const i=C(this,zn,gy).call(this,t);for(let s=i;s<h(this,cs).length;s++){const[r,o]=h(this,cs)[s];if(r!==t)break;if(r===t&&o===e){h(this,cs).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=h(this,cs)[s];if(r!==t)break;if(r===t&&o===e){h(this,cs).splice(s,1);return}}},lE=function(t){const[e,i,s]=t,r=[[e,i,s]],o=C(this,zn,gy).call(this,s);for(let a=0;a<o;a++){const[l,c]=h(this,cs)[a];for(let u=0,f=r.length;u<f;u++){const[,p,m]=r[u];if(!(c<=p||m<=l)){if(p>=l){if(m>c)r[u][1]=c;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=l,m>c&&r.push([e,c,m])}}}return r};class vL{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof uE}}var nm,Qu;class I9 extends vL{constructor(e,i){super();x(this,nm);x(this,Qu);b(this,Qu,e),b(this,nm,i)}toSVGPath(){const e=[];for(const i of h(this,Qu)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===s?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),s=a)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const a=[],l=s-e,c=r-i;for(const u of h(this,Qu)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*l,f[p+1]=r-u[p+1]*c;a.push(f)}return a}get box(){return h(this,nm)}}nm=new WeakMap,Qu=new WeakMap;var Fs,Lr,Ju,Zu,Os,St,Ll,Ml,im,sm,th,eh,Oo,rm,e0,n0,om,cE;const pr=class pr{constructor({x:t,y:e},i,s,r,o,a=0){x(this,om);x(this,Fs);x(this,Lr,[]);x(this,Ju);x(this,Zu);x(this,Os,[]);x(this,St,new Float64Array(18));x(this,Ll);x(this,Ml);x(this,im);x(this,sm);x(this,th);x(this,eh);x(this,Oo,[]);b(this,Fs,i),b(this,eh,r*s),b(this,Zu,o),h(this,St).set([NaN,NaN,NaN,NaN,t,e],6),b(this,Ju,a),b(this,sm,h(pr,rm)*s),b(this,im,h(pr,n0)*s),b(this,th,s),h(this,Oo).push(t,e)}get free(){return!0}isEmpty(){return isNaN(h(this,St)[8])}add({x:t,y:e}){var R;b(this,Ll,t),b(this,Ml,e);const[i,s,r,o]=h(this,Fs);let[a,l,c,u]=h(this,St).subarray(8,12);const f=t-c,p=e-u,m=Math.hypot(f,p);if(m<h(this,im))return!1;const g=m-h(this,sm),_=g/m,A=_*f,v=_*p;let w=a,T=l;a=c,l=u,c+=A,u+=v,(R=h(this,Oo))==null||R.push(t,e);const D=-v/g,F=A/g,O=D*h(this,eh),P=F*h(this,eh);return h(this,St).set(h(this,St).subarray(2,8),0),h(this,St).set([c+O,u+P],4),h(this,St).set(h(this,St).subarray(14,18),12),h(this,St).set([c-O,u-P],16),isNaN(h(this,St)[6])?(h(this,Os).length===0&&(h(this,St).set([a+O,l+P],2),h(this,Os).push(NaN,NaN,NaN,NaN,(a+O-i)/r,(l+P-s)/o),h(this,St).set([a-O,l-P],14),h(this,Lr).push(NaN,NaN,NaN,NaN,(a-O-i)/r,(l-P-s)/o)),h(this,St).set([w,T,a,l,c,u],6),!this.isEmpty()):(h(this,St).set([w,T,a,l,c,u],6),Math.abs(Math.atan2(T-l,w-a)-Math.atan2(v,A))<Math.PI/2?([a,l,c,u]=h(this,St).subarray(2,6),h(this,Os).push(NaN,NaN,NaN,NaN,((a+c)/2-i)/r,((l+u)/2-s)/o),[a,l,w,T]=h(this,St).subarray(14,18),h(this,Lr).push(NaN,NaN,NaN,NaN,((w+a)/2-i)/r,((T+l)/2-s)/o),!0):([w,T,a,l,c,u]=h(this,St).subarray(0,6),h(this,Os).push(((w+5*a)/6-i)/r,((T+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),[c,u,a,l,w,T]=h(this,St).subarray(12,18),h(this,Lr).push(((w+5*a)/6-i)/r,((T+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+u)/6-s)/o,((a+c)/2-i)/r,((l+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=h(this,Os),e=h(this,Lr),i=h(this,St).subarray(4,6),s=h(this,St).subarray(16,18),[r,o,a,l]=h(this,Fs),[c,u,f,p]=C(this,om,cE).call(this);if(isNaN(h(this,St)[6])&&!this.isEmpty())return`M${(h(this,St)[2]-r)/a} ${(h(this,St)[3]-o)/l} L${(h(this,St)[4]-r)/a} ${(h(this,St)[5]-o)/l} L${c} ${u} L${f} ${p} L${(h(this,St)[16]-r)/a} ${(h(this,St)[17]-o)/l} L${(h(this,St)[14]-r)/a} ${(h(this,St)[15]-o)/l} Z`;const m=[];m.push(`M${t[4]} ${t[5]}`);for(let g=6;g<t.length;g+=6)isNaN(t[g])?m.push(`L${t[g+4]} ${t[g+5]}`):m.push(`C${t[g]} ${t[g+1]} ${t[g+2]} ${t[g+3]} ${t[g+4]} ${t[g+5]}`);m.push(`L${(i[0]-r)/a} ${(i[1]-o)/l} L${c} ${u} L${f} ${p} L${(s[0]-r)/a} ${(s[1]-o)/l}`);for(let g=e.length-6;g>=6;g-=6)isNaN(e[g])?m.push(`L${e[g+4]} ${e[g+5]}`):m.push(`C${e[g]} ${e[g+1]} ${e[g+2]} ${e[g+3]} ${e[g+4]} ${e[g+5]}`);return m.push(`L${e[4]} ${e[5]} Z`),m.join(" ")}getOutlines(){var v;const t=h(this,Os),e=h(this,Lr),i=h(this,St),s=i.subarray(4,6),r=i.subarray(16,18),[o,a,l,c]=h(this,Fs),u=new Float64Array((((v=h(this,Oo))==null?void 0:v.length)??0)+2);for(let w=0,T=u.length-2;w<T;w+=2)u[w]=(h(this,Oo)[w]-o)/l,u[w+1]=(h(this,Oo)[w+1]-a)/c;u[u.length-2]=(h(this,Ll)-o)/l,u[u.length-1]=(h(this,Ml)-a)/c;const[f,p,m,g]=C(this,om,cE).call(this);if(isNaN(i[6])&&!this.isEmpty()){const w=new Float64Array(36);return w.set([NaN,NaN,NaN,NaN,(i[2]-o)/l,(i[3]-a)/c,NaN,NaN,NaN,NaN,(i[4]-o)/l,(i[5]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(i[16]-o)/l,(i[17]-a)/c,NaN,NaN,NaN,NaN,(i[14]-o)/l,(i[15]-a)/c],0),new uE(w,u,h(this,Fs),h(this,th),h(this,Ju),h(this,Zu))}const _=new Float64Array(h(this,Os).length+24+h(this,Lr).length);let A=t.length;for(let w=0;w<A;w+=2){if(isNaN(t[w])){_[w]=_[w+1]=NaN;continue}_[w]=t[w],_[w+1]=t[w+1]}_.set([NaN,NaN,NaN,NaN,(s[0]-o)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[0]-o)/l,(r[1]-a)/c],A),A+=24;for(let w=e.length-6;w>=6;w-=6)for(let T=0;T<6;T+=2){if(isNaN(e[w+T])){_[A]=_[A+1]=NaN,A+=2;continue}_[A]=e[w+T],_[A+1]=e[w+T+1],A+=2}return _.set([NaN,NaN,NaN,NaN,e[4],e[5]],A),new uE(_,u,h(this,Fs),h(this,th),h(this,Ju),h(this,Zu))}};Fs=new WeakMap,Lr=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,Os=new WeakMap,St=new WeakMap,Ll=new WeakMap,Ml=new WeakMap,im=new WeakMap,sm=new WeakMap,th=new WeakMap,eh=new WeakMap,Oo=new WeakMap,rm=new WeakMap,e0=new WeakMap,n0=new WeakMap,om=new WeakSet,cE=function(){const t=h(this,St).subarray(4,6),e=h(this,St).subarray(16,18),[i,s,r,o]=h(this,Fs);return[(h(this,Ll)+(t[0]-e[0])/2-i)/r,(h(this,Ml)+(t[1]-e[1])/2-s)/o,(h(this,Ll)+(e[0]-t[0])/2-i)/r,(h(this,Ml)+(e[1]-t[1])/2-s)/o]},x(pr,rm,8),x(pr,e0,2),x(pr,n0,h(pr,rm)+h(pr,e0));let dv=pr;var nh,Nl,Mr,am,gi,lm,we,ei,Id,kd,_L;class uE extends vL{constructor(e,i,s,r,o,a){super();x(this,ei);x(this,nh);x(this,Nl,null);x(this,Mr);x(this,am);x(this,gi);x(this,lm);x(this,we);b(this,we,e),b(this,gi,i),b(this,nh,s),b(this,lm,r),b(this,Mr,o),b(this,am,a),C(this,ei,_L).call(this,a);const{x:l,y:c,width:u,height:f}=h(this,Nl);for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-l)/u,e[p+1]=(e[p+1]-c)/f;for(let p=0,m=i.length;p<m;p+=2)i[p]=(i[p]-l)/u,i[p+1]=(i[p+1]-c)/f}toSVGPath(){const e=[`M${h(this,we)[4]} ${h(this,we)[5]}`];for(let i=6,s=h(this,we).length;i<s;i+=6){if(isNaN(h(this,we)[i])){e.push(`L${h(this,we)[i+4]} ${h(this,we)[i+5]}`);continue}e.push(`C${h(this,we)[i]} ${h(this,we)[i+1]} ${h(this,we)[i+2]} ${h(this,we)[i+3]} ${h(this,we)[i+4]} ${h(this,we)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const a=s-e,l=r-i;let c,u;switch(o){case 0:c=C(this,ei,Id).call(this,h(this,we),e,r,a,-l),u=C(this,ei,Id).call(this,h(this,gi),e,r,a,-l);break;case 90:c=C(this,ei,kd).call(this,h(this,we),e,i,a,l),u=C(this,ei,kd).call(this,h(this,gi),e,i,a,l);break;case 180:c=C(this,ei,Id).call(this,h(this,we),s,i,-a,l),u=C(this,ei,Id).call(this,h(this,gi),s,i,-a,l);break;case 270:c=C(this,ei,kd).call(this,h(this,we),s,r,-a,-l),u=C(this,ei,kd).call(this,h(this,gi),s,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,Nl)}getNewOutline(e,i){const{x:s,y:r,width:o,height:a}=h(this,Nl),[l,c,u,f]=h(this,nh),p=o*u,m=a*f,g=s*u+l,_=r*f+c,A=new dv({x:h(this,gi)[0]*p+g,y:h(this,gi)[1]*m+_},h(this,nh),h(this,lm),e,h(this,am),i??h(this,Mr));for(let v=2;v<h(this,gi).length;v+=2)A.add({x:h(this,gi)[v]*p+g,y:h(this,gi)[v+1]*m+_});return A.getOutlines()}}nh=new WeakMap,Nl=new WeakMap,Mr=new WeakMap,am=new WeakMap,gi=new WeakMap,lm=new WeakMap,we=new WeakMap,ei=new WeakSet,Id=function(e,i,s,r,o){const a=new Float64Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=i+e[l]*r,a[l+1]=s+e[l+1]*o;return a},kd=function(e,i,s,r,o){const a=new Float64Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=i+e[l+1]*r,a[l+1]=s+e[l]*o;return a},_L=function(e){const i=h(this,we);let s=i[4],r=i[5],o=s,a=r,l=s,c=r,u=s,f=r;const p=e?Math.max:Math.min;for(let v=6,w=i.length;v<w;v+=6){if(isNaN(i[v]))o=Math.min(o,i[v+4]),a=Math.min(a,i[v+5]),l=Math.max(l,i[v+4]),c=Math.max(c,i[v+5]),f<i[v+5]?(u=i[v+4],f=i[v+5]):f===i[v+5]&&(u=p(u,i[v+4]));else{const T=nt.bezierBoundingBox(s,r,...i.slice(v,v+6));o=Math.min(o,T[0]),a=Math.min(a,T[1]),l=Math.max(l,T[2]),c=Math.max(c,T[3]),f<T[3]?(u=T[2],f=T[3]):f===T[3]&&(u=p(u,T[2]))}s=i[v+4],r=i[v+5]}const m=o-h(this,Mr),g=a-h(this,Mr),_=l-o+2*h(this,Mr),A=c-a+2*h(this,Mr);b(this,Nl,{x:m,y:g,width:_,height:A,lastPoint:[u,f]})};var cm,um,us,Fl,ih,Oe,hm,sh,dm,fm,hs,rh,Gt,hE,dE,wL,Ua,EL,yo;const mr=class mr{constructor({editor:t=null,uiManager:e=null}){x(this,Gt);x(this,cm,C(this,Gt,wL).bind(this));x(this,um,C(this,Gt,EL).bind(this));x(this,us,null);x(this,Fl,null);x(this,ih);x(this,Oe,null);x(this,hm,!1);x(this,sh,!1);x(this,dm,null);x(this,fm);x(this,hs,null);x(this,rh);var i;t?(b(this,sh,!1),b(this,rh,dt.HIGHLIGHT_COLOR),b(this,dm,t)):(b(this,sh,!0),b(this,rh,dt.HIGHLIGHT_DEFAULT_COLOR)),b(this,hs,(t==null?void 0:t._uiManager)||e),b(this,fm,h(this,hs)._eventBus),b(this,ih,(t==null?void 0:t.color)||((i=h(this,hs))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Pt(this,"_keyboardManager",new km([[["Escape","mac+Escape"],mr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],mr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],mr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],mr.prototype._moveToPrevious],[["Home","mac+Home"],mr.prototype._moveToBeginning],[["End","mac+End"],mr.prototype._moveToEnd]]))}renderButton(){const t=b(this,us,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=h(this,hs)._signal;t.addEventListener("click",C(this,Gt,Ua).bind(this),{signal:e}),t.addEventListener("keydown",h(this,cm),{signal:e});const i=b(this,Fl,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=h(this,ih),t.append(i),t}renderMainDropdown(){const t=b(this,Oe,C(this,Gt,hE).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===h(this,us)){C(this,Gt,Ua).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,Gt,dE).call(this,e,t)}_moveToNext(t){var e,i;if(!h(this,Gt,yo)){C(this,Gt,Ua).call(this,t);return}if(t.target===h(this,us)){(e=h(this,Oe).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=h(this,Oe))==null?void 0:e.firstChild)||t.target===h(this,us)){h(this,Gt,yo)&&this._hideDropdownFromKeyboard();return}h(this,Gt,yo)||C(this,Gt,Ua).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!h(this,Gt,yo)){C(this,Gt,Ua).call(this,t);return}(e=h(this,Oe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!h(this,Gt,yo)){C(this,Gt,Ua).call(this,t);return}(e=h(this,Oe).lastChild)==null||e.focus()}hideDropdown(){var t;(t=h(this,Oe))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",h(this,um))}_hideDropdownFromKeyboard(){var t;if(!h(this,sh)){if(!h(this,Gt,yo)){(t=h(this,dm))==null||t.unselect();return}this.hideDropdown(),h(this,us).focus({preventScroll:!0,focusVisible:h(this,hm)})}}updateColor(t){if(h(this,Fl)&&(h(this,Fl).style.backgroundColor=t),!h(this,Oe))return;const e=h(this,hs).highlightColors.values();for(const i of h(this,Oe).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=h(this,us))==null||t.remove(),b(this,us,null),b(this,Fl,null),(e=h(this,Oe))==null||e.remove(),b(this,Oe,null)}};cm=new WeakMap,um=new WeakMap,us=new WeakMap,Fl=new WeakMap,ih=new WeakMap,Oe=new WeakMap,hm=new WeakMap,sh=new WeakMap,dm=new WeakMap,fm=new WeakMap,hs=new WeakMap,rh=new WeakMap,Gt=new WeakSet,hE=function(){const t=document.createElement("div"),e=h(this,hs)._signal;t.addEventListener("contextmenu",ri,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of h(this,hs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===h(this,ih)),r.addEventListener("click",C(this,Gt,dE).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",h(this,cm),{signal:e}),t},dE=function(t,e){e.stopPropagation(),h(this,fm).dispatch("switchannotationeditorparams",{source:this,type:h(this,rh),value:t})},wL=function(t){mr._keyboardManager.exec(this,t)},Ua=function(t){if(h(this,Gt,yo)){this.hideDropdown();return}if(b(this,hm,t.detail===0),window.addEventListener("pointerdown",h(this,um),{signal:h(this,hs)._signal}),h(this,Oe)){h(this,Oe).classList.remove("hidden");return}const e=b(this,Oe,C(this,Gt,hE).call(this));h(this,us).append(e)},EL=function(t){var e;(e=h(this,Oe))!=null&&e.contains(t.target)||this.hideDropdown()},yo=function(){return h(this,Oe)&&!h(this,Oe).classList.contains("hidden")};let fv=mr;var oh,pm,Vo,Ol,ah,Ni,mm,gm,Vl,ds,Fn,yi,i0,lh,jl,Ve,ch,Vs,ym,wt,fE,pE,AL,TL,SL,mE,Dd,zi,Fc,bL,yy,Ld,CL,xL,PL,RL;const Lt=class Lt extends Ot{constructor(e){super({...e,name:"highlightEditor"});x(this,wt);x(this,oh,null);x(this,pm,0);x(this,Vo);x(this,Ol,null);x(this,ah,null);x(this,Ni,null);x(this,mm,null);x(this,gm,0);x(this,Vl,null);x(this,ds,null);x(this,Fn,null);x(this,yi,!1);x(this,i0,C(this,wt,bL).bind(this));x(this,lh,null);x(this,jl);x(this,Ve,null);x(this,ch,"");x(this,Vs);x(this,ym,"");this.color=e.color||Lt._defaultColor,b(this,Vs,e.thickness||Lt._defaultThickness),b(this,jl,e.opacity||Lt._defaultOpacity),b(this,Vo,e.boxes||null),b(this,ym,e.methodOfCreation||""),b(this,ch,e.text||""),this._isDraggable=!1,e.highlightId>-1?(b(this,yi,!0),C(this,wt,pE).call(this,e),C(this,wt,Dd).call(this)):(b(this,oh,e.anchorNode),b(this,pm,e.anchorOffset),b(this,mm,e.focusNode),b(this,gm,e.focusOffset),C(this,wt,fE).call(this),C(this,wt,Dd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Lt.prototype;return Pt(this,"_keyboardManager",new km([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,yi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Vs),methodOfCreation:h(this,ym)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Ot.initialize(e,i),Lt._defaultColor||(Lt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case dt.HIGHLIGHT_DEFAULT_COLOR:Lt._defaultColor=i;break;case dt.HIGHLIGHT_THICKNESS:Lt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return h(this,lh)}updateParams(e,i){switch(e){case dt.HIGHLIGHT_COLOR:C(this,wt,AL).call(this,i);break;case dt.HIGHLIGHT_THICKNESS:C(this,wt,TL).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[dt.HIGHLIGHT_DEFAULT_COLOR,Lt._defaultColor],[dt.HIGHLIGHT_THICKNESS,Lt._defaultThickness]]}get propertiesToUpdate(){return[[dt.HIGHLIGHT_COLOR,this.color||Lt._defaultColor],[dt.HIGHLIGHT_THICKNESS,h(this,Vs)||Lt._defaultThickness],[dt.HIGHLIGHT_FREE,h(this,yi)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,ah,new fv({editor:this})),e.addColorPicker(h(this,ah))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,wt,Ld).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,C(this,wt,Ld).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){C(this,wt,mE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,wt,Dd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?C(this,wt,mE).call(this):e&&(C(this,wt,Dd).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,a;const{drawLayer:i}=this.parent;let s;h(this,yi)?(e=(e-this.rotation+360)%360,s=C(r=Lt,zi,Fc).call(r,h(this,ds).box,e)):s=C(o=Lt,zi,Fc).call(o,this,e),i.rotate(h(this,Fn),e),i.rotate(h(this,Ve),e),i.updateBox(h(this,Fn),s),i.updateBox(h(this,Ve),C(a=Lt,zi,Fc).call(a,h(this,Ni).box,e))}render(){if(this.div)return this.div;const e=super.render();h(this,ch)&&(e.setAttribute("aria-label",h(this,ch)),e.setAttribute("role","mark")),h(this,yi)?e.classList.add("free"):this.div.addEventListener("keydown",h(this,i0),{signal:this._uiManager._signal});const i=b(this,Vl,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=h(this,Ol);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),lv(this,h(this,Vl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(h(this,Ve),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(h(this,Ve),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,wt,yy).call(this,!0);break;case 1:case 3:C(this,wt,yy).call(this,!1);break}}select(){var e,i;super.select(),h(this,Ve)&&((e=this.parent)==null||e.drawLayer.removeClass(h(this,Ve),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(h(this,Ve),"selected"))}unselect(){var e;super.unselect(),h(this,Ve)&&((e=this.parent)==null||e.drawLayer.removeClass(h(this,Ve),"selected"),h(this,yi)||C(this,wt,yy).call(this,!1))}get _mustFixPosition(){return!h(this,yi)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(h(this,Fn),e),this.parent.drawLayer.show(h(this,Ve),e))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:a,y:l,width:c,height:u}=s.getBoundingClientRect(),f=A=>{C(this,zi,PL).call(this,e,A)},p=e._signal,m={capture:!0,passive:!1,signal:p},g=A=>{A.preventDefault(),A.stopPropagation()},_=A=>{s.removeEventListener("pointermove",f),window.removeEventListener("blur",_),window.removeEventListener("pointerup",_),window.removeEventListener("pointerdown",g,m),window.removeEventListener("contextmenu",ri),C(this,zi,RL).call(this,e,A)};window.addEventListener("blur",_,{signal:p}),window.addEventListener("pointerup",_,{signal:p}),window.addEventListener("pointerdown",g,m),window.addEventListener("contextmenu",ri,{signal:p}),s.addEventListener("pointermove",f,{signal:p}),this._freeHighlight=new dv({x:r,y:o},[a,l,c,u],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,i,s){var _;const r=super.deserialize(e,i,s),{rect:[o,a,l,c],color:u,quadPoints:f}=e;r.color=nt.makeHexColor(...u),b(r,jl,e.opacity);const[p,m]=r.pageDimensions;r.width=(l-o)/p,r.height=(c-a)/m;const g=b(r,Vo,[]);for(let A=0;A<f.length;A+=8)g.push({x:(f[4]-l)/p,y:(c-(1-f[A+5]))/m,width:(f[A+2]-f[A])/p,height:(f[A+5]-f[A+1])/m});return C(_=r,wt,fE).call(_),r}serialize(e=!1){if(this.isEmpty()||e)return null;const i=this.getRect(0,0),s=Ot._colorManager.convert(this.color);return{annotationType:Ct.HIGHLIGHT,color:s,opacity:h(this,jl),thickness:h(this,Vs),quadPoints:C(this,wt,CL).call(this),outlines:C(this,wt,xL).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:C(this,wt,Ld).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};oh=new WeakMap,pm=new WeakMap,Vo=new WeakMap,Ol=new WeakMap,ah=new WeakMap,Ni=new WeakMap,mm=new WeakMap,gm=new WeakMap,Vl=new WeakMap,ds=new WeakMap,Fn=new WeakMap,yi=new WeakMap,i0=new WeakMap,lh=new WeakMap,jl=new WeakMap,Ve=new WeakMap,ch=new WeakMap,Vs=new WeakMap,ym=new WeakMap,wt=new WeakSet,fE=function(){const e=new aE(h(this,Vo),.001);b(this,ds,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=h(this,ds).box;const i=new aE(h(this,Vo),.0025,.001,this._uiManager.direction==="ltr");b(this,Ni,i.getOutlines());const{lastPoint:s}=h(this,Ni).box;b(this,lh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},pE=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var f,p;if(b(this,ds,e),b(this,Ni,e.getNewOutline(h(this,Vs)/2+1.5,.0025)),i>=0)b(this,Fn,i),b(this,Ol,s),this.parent.drawLayer.finalizeLine(i,e),b(this,Ve,this.parent.drawLayer.highlightOutline(h(this,Ni)));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(h(this,Fn),e),this.parent.drawLayer.updateBox(h(this,Fn),C(f=Lt,zi,Fc).call(f,h(this,ds).box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(h(this,Ve),h(this,Ni)),this.parent.drawLayer.updateBox(h(this,Ve),C(p=Lt,zi,Fc).call(p,h(this,Ni).box,m))}const{x:o,y:a,width:l,height:c}=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/m,this.height=c*m/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/m,this.height=c*m/g;break}}const{lastPoint:u}=h(this,Ni).box;b(this,lh,[(u[0]-o)/l,(u[1]-a)/c])},AL=function(e){const i=r=>{var o,a;this.color=r,(o=this.parent)==null||o.drawLayer.changeColor(h(this,Fn),r),(a=h(this,ah))==null||a.updateColor(r)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},TL=function(e){const i=h(this,Vs),s=r=>{b(this,Vs,r),C(this,wt,SL).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},SL=function(e){if(!h(this,yi))return;C(this,wt,pE).call(this,{highlightOutlines:h(this,ds).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},mE=function(){h(this,Fn)===null||!this.parent||(this.parent.drawLayer.remove(h(this,Fn)),b(this,Fn,null),this.parent.drawLayer.remove(h(this,Ve)),b(this,Ve,null))},Dd=function(e=this.parent){h(this,Fn)===null&&({id:li(this,Fn)._,clipPathId:li(this,Ol)._}=e.drawLayer.highlight(h(this,ds),this.color,h(this,jl)),b(this,Ve,e.drawLayer.highlightOutline(h(this,Ni))),h(this,Vl)&&(h(this,Vl).style.clipPath=h(this,Ol)))},zi=new WeakSet,Fc=function({x:e,y:i,width:s,height:r},o){switch(o){case 90:return{x:1-i-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-e-s,width:r,height:s}}return{x:e,y:i,width:s,height:r}},bL=function(e){Lt._keyboardManager.exec(this,e)},yy=function(e){if(!h(this,oh))return;const i=window.getSelection();e?i.setPosition(h(this,oh),h(this,pm)):i.setPosition(h(this,mm),h(this,gm))},Ld=function(){return h(this,yi)?this.rotation:0},CL=function(){if(h(this,yi))return null;const[e,i]=this.pageDimensions,s=h(this,Vo),r=new Float32Array(s.length*8);let o=0;for(const{x:a,y:l,width:c,height:u}of s){const f=a*e,p=(1-l-u)*i;r[o]=r[o+4]=f,r[o+1]=r[o+3]=p,r[o+2]=r[o+6]=f+c*e,r[o+5]=r[o+7]=p+u*i,o+=8}return r},xL=function(e){return h(this,ds).serialize(e,C(this,wt,Ld).call(this))},PL=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},RL=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},x(Lt,zi),mt(Lt,"_defaultColor",null),mt(Lt,"_defaultOpacity",1),mt(Lt,"_defaultThickness",12),mt(Lt,"_l10nPromise"),mt(Lt,"_type","highlight"),mt(Lt,"_editorType",Ct.HIGHLIGHT),mt(Lt,"_freeHighlightId",-1),mt(Lt,"_freeHighlight",null),mt(Lt,"_freeHighlightClipId","");let pv=Lt;var Bl,Ul,vm,_m,wm,zl,js,Nr,Fi,$l,Hl,Fr,Wl,Gl,jo,X,IL,kL,DL,LL,yE,ML,vE,NL,FL,OL,VL,jL,za,_E,vy,_y,Oc,wE,wy,ao,BL,EE,UL,zL,AE,Ey,Md;const re=class re extends Ot{constructor(e){super({...e,name:"inkEditor"});x(this,X);x(this,Bl,0);x(this,Ul,0);x(this,vm,this.canvasPointermove.bind(this));x(this,_m,this.canvasPointerleave.bind(this));x(this,wm,this.canvasPointerup.bind(this));x(this,zl,this.canvasPointerdown.bind(this));x(this,js,null);x(this,Nr,new Path2D);x(this,Fi,!1);x(this,$l,!1);x(this,Hl,!1);x(this,Fr,null);x(this,Wl,0);x(this,Gl,0);x(this,jo,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,i){Ot.initialize(e,i)}static updateDefaultParams(e,i){switch(e){case dt.INK_THICKNESS:re._defaultThickness=i;break;case dt.INK_COLOR:re._defaultColor=i;break;case dt.INK_OPACITY:re._defaultOpacity=i/100;break}}updateParams(e,i){switch(e){case dt.INK_THICKNESS:C(this,X,IL).call(this,i);break;case dt.INK_COLOR:C(this,X,kL).call(this,i);break;case dt.INK_OPACITY:C(this,X,DL).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[dt.INK_THICKNESS,re._defaultThickness],[dt.INK_COLOR,re._defaultColor||Ot._defaultLineColor],[dt.INK_OPACITY,Math.round(re._defaultOpacity*100)]]}get propertiesToUpdate(){return[[dt.INK_THICKNESS,this.thickness||re._defaultThickness],[dt.INK_COLOR,this.color||re._defaultColor||Ot._defaultLineColor],[dt.INK_OPACITY,Math.round(100*(this.opacity??re._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(C(this,X,vy).call(this),C(this,X,_y).call(this)),this.isAttachedToDOM||(this.parent.add(this),C(this,X,Oc).call(this)),C(this,X,Md).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,h(this,js)&&(clearTimeout(h(this,js)),b(this,js,null)),(e=h(this,Fr))==null||e.disconnect(),b(this,Fr,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,i]=this.parentDimensions,s=this.width*e,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){h(this,Fi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",h(this,zl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",h(this,zl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){h(this,Fi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),b(this,Fi,!0),this.div.classList.add("disabled"),C(this,X,Md).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||h(this,Fi)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),C(this,X,ML).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),C(this,X,vE).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),C(this,X,_E).call(this,e)}canvasPointerleave(e){C(this,X,_E).call(this,e)}get isResizable(){return!this.isEmpty()&&h(this,Fi)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,a]=C(this,X,LL).call(this);if(this.setAt(s,r,0,0),this.setDims(o,a),C(this,X,vy).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(e*l,i*c,this.width*l,this.height*c),b(this,Hl,!0),C(this,X,Oc).call(this),this.setDims(this.width*l,this.height*c),C(this,X,za).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return C(this,X,_y).call(this),this.div}setDimensions(e,i){const s=Math.round(e),r=Math.round(i);if(h(this,Wl)===s&&h(this,Gl)===r)return;b(this,Wl,s),b(this,Gl,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=e/o,this.height=i/a,this.fixAndSetPosition(),h(this,Fi)&&C(this,X,wE).call(this,e,i),C(this,X,Oc).call(this),C(this,X,za).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,i,s){var A,v,w;if(e instanceof aL)return null;const r=super.deserialize(e,i,s);r.thickness=e.thickness,r.color=nt.makeHexColor(...e.color),r.opacity=e.opacity;const[o,a]=r.pageDimensions,l=r.width*o,c=r.height*a,u=r.parentScale,f=e.thickness/2;b(r,Fi,!0),b(r,Wl,Math.round(l)),b(r,Gl,Math.round(c));const{paths:p,rect:m,rotation:g}=e;for(let{bezier:T}of p){T=C(A=re,ao,UL).call(A,T,m,g);const D=[];r.paths.push(D);let F=u*(T[0]-f),O=u*(T[1]-f);for(let S=2,R=T.length;S<R;S+=6){const k=u*(T[S]-f),M=u*(T[S+1]-f),V=u*(T[S+2]-f),L=u*(T[S+3]-f),Z=u*(T[S+4]-f),ct=u*(T[S+5]-f);D.push([[F,O],[k,M],[V,L],[Z,ct]]),F=Z,O=ct}const P=C(this,ao,BL).call(this,D);r.bezierPath2D.push(P)}const _=C(v=r,X,AE).call(v);return b(r,Ul,Math.max(Ot.MIN_SIZE,_[2]-_[0])),b(r,Bl,Math.max(Ot.MIN_SIZE,_[3]-_[1])),C(w=r,X,wE).call(w,l,c),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),i=Ot._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ct.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:C(this,X,zL).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Bl=new WeakMap,Ul=new WeakMap,vm=new WeakMap,_m=new WeakMap,wm=new WeakMap,zl=new WeakMap,js=new WeakMap,Nr=new WeakMap,Fi=new WeakMap,$l=new WeakMap,Hl=new WeakMap,Fr=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,jo=new WeakMap,X=new WeakSet,IL=function(e){const i=r=>{this.thickness=r,C(this,X,Md).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},kL=function(e){const i=r=>{this.color=r,C(this,X,za).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},DL=function(e){const i=r=>{this.opacity=r,C(this,X,za).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},LL=function(){const{parentRotation:e,parentDimensions:[i,s]}=this;switch(e){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},yE=function(){const{ctx:e,color:i,opacity:s,thickness:r,parentScale:o,scaleFactor:a}=this;e.lineWidth=r*o/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${i}${tV(s)}`},ML=function(e,i){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",ri,{signal:s}),this.canvas.addEventListener("pointerleave",h(this,_m),{signal:s}),this.canvas.addEventListener("pointermove",h(this,vm),{signal:s}),this.canvas.addEventListener("pointerup",h(this,wm),{signal:s}),this.canvas.removeEventListener("pointerdown",h(this,zl)),this.isEditing=!0,h(this,Hl)||(b(this,Hl,!0),C(this,X,Oc).call(this),this.thickness||(this.thickness=re._defaultThickness),this.color||(this.color=re._defaultColor||Ot._defaultLineColor),this.opacity??(this.opacity=re._defaultOpacity)),this.currentPath.push([e,i]),b(this,$l,!1),C(this,X,yE).call(this),b(this,jo,()=>{C(this,X,OL).call(this),h(this,jo)&&window.requestAnimationFrame(h(this,jo))}),window.requestAnimationFrame(h(this,jo))},vE=function(e,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&i===r)return;const o=this.currentPath;let a=h(this,Nr);if(o.push([e,i]),b(this,$l,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(e,i);return}o.length===3&&(b(this,Nr,a=new Path2D),a.moveTo(...o[0])),C(this,X,VL).call(this,a,...o.at(-3),...o.at(-2),e,i)},NL=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);h(this,Nr).lineTo(...e)},FL=function(e,i){b(this,jo,null),e=Math.min(Math.max(e,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),C(this,X,vE).call(this,e,i),C(this,X,NL).call(this);let s;if(this.currentPath.length!==1)s=C(this,X,jL).call(this);else{const c=[e,i];s=[[c,c.slice(),c.slice(),c]]}const r=h(this,Nr),o=this.currentPath;this.currentPath=[],b(this,Nr,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(C(this,X,vy).call(this),C(this,X,_y).call(this)),C(this,X,Md).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},OL=function(){if(!h(this,$l))return;b(this,$l,!1);const e=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(a=>a[0]),r=i.map(a=>a[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(h(this,Nr)),o.restore()},VL=function(e,i,s,r,o,a,l){const c=(i+r)/2,u=(s+o)/2,f=(r+a)/2,p=(o+l)/2;e.bezierCurveTo(c+2*(r-c)/3,u+2*(o-u)/3,f+2*(r-f)/3,p+2*(o-p)/3,f,p)},jL=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const i=[];let s,[r,o]=e[0];for(s=1;s<e.length-2;s++){const[m,g]=e[s],[_,A]=e[s+1],v=(m+_)/2,w=(g+A)/2,T=[r+2*(m-r)/3,o+2*(g-o)/3],D=[v+2*(m-v)/3,w+2*(g-w)/3];i.push([[r,o],T,D,[v,w]]),[r,o]=[v,w]}const[a,l]=e[s],[c,u]=e[s+1],f=[r+2*(a-r)/3,o+2*(l-o)/3],p=[c+2*(a-c)/3,u+2*(l-u)/3];return i.push([[r,o],f,p,[c,u]]),i},za=function(){if(this.isEmpty()){C(this,X,wy).call(this);return}C(this,X,yE).call(this);const{canvas:e,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),C(this,X,wy).call(this);for(const s of this.bezierPath2D)i.stroke(s)},_E=function(e){this.canvas.removeEventListener("pointerleave",h(this,_m)),this.canvas.removeEventListener("pointermove",h(this,vm)),this.canvas.removeEventListener("pointerup",h(this,wm)),this.canvas.addEventListener("pointerdown",h(this,zl),{signal:this._uiManager._signal}),h(this,js)&&clearTimeout(h(this,js)),b(this,js,setTimeout(()=>{b(this,js,null),this.canvas.removeEventListener("contextmenu",ri)},10)),C(this,X,FL).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},vy=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},_y=function(){b(this,Fr,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),h(this,Fr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=h(this,Fr))==null||e.disconnect(),b(this,Fr,null)},{once:!0})},Oc=function(){if(!h(this,Hl))return;const[e,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*i),C(this,X,wy).call(this)},wE=function(e,i){const s=C(this,X,Ey).call(this),r=(e-s)/h(this,Ul),o=(i-s)/h(this,Bl);this.scaleFactor=Math.min(r,o)},wy=function(){const e=C(this,X,Ey).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},ao=new WeakSet,BL=function(e){const i=new Path2D;for(let s=0,r=e.length;s<r;s++){const[o,a,l,c]=e[s];s===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return i},EE=function(e,i,s){const[r,o,a,l]=i;switch(s){case 0:for(let c=0,u=e.length;c<u;c+=2)e[c]+=r,e[c+1]=l-e[c+1];break;case 90:for(let c=0,u=e.length;c<u;c+=2){const f=e[c];e[c]=e[c+1]+r,e[c+1]=f+o}break;case 180:for(let c=0,u=e.length;c<u;c+=2)e[c]=a-e[c],e[c+1]+=o;break;case 270:for(let c=0,u=e.length;c<u;c+=2){const f=e[c];e[c]=a-e[c+1],e[c+1]=l-f}break;default:throw new Error("Invalid rotation")}return e},UL=function(e,i,s){const[r,o,a,l]=i;switch(s){case 0:for(let c=0,u=e.length;c<u;c+=2)e[c]-=r,e[c+1]=l-e[c+1];break;case 90:for(let c=0,u=e.length;c<u;c+=2){const f=e[c];e[c]=e[c+1]-o,e[c+1]=f-r}break;case 180:for(let c=0,u=e.length;c<u;c+=2)e[c]=a-e[c],e[c+1]-=o;break;case 270:for(let c=0,u=e.length;c<u;c+=2){const f=e[c];e[c]=l-e[c+1],e[c+1]=a-f}break;default:throw new Error("Invalid rotation")}return e},zL=function(e,i,s,r){var u,f;const o=[],a=this.thickness/2,l=e*i+a,c=e*s+a;for(const p of this.paths){const m=[],g=[];for(let _=0,A=p.length;_<A;_++){const[v,w,T,D]=p[_];if(v[0]===D[0]&&v[1]===D[1]&&A===1){const L=e*v[0]+l,Z=e*v[1]+c;m.push(L,Z),g.push(L,Z);break}const F=e*v[0]+l,O=e*v[1]+c,P=e*w[0]+l,S=e*w[1]+c,R=e*T[0]+l,k=e*T[1]+c,M=e*D[0]+l,V=e*D[1]+c;_===0&&(m.push(F,O),g.push(F,O)),m.push(P,S,R,k,M,V),g.push(P,S),_===A-1&&g.push(M,V)}o.push({bezier:C(u=re,ao,EE).call(u,m,r,this.rotation),points:C(f=re,ao,EE).call(f,g,r,this.rotation)})}return o},AE=function(){let e=1/0,i=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[a,l,c,u]of o){const f=nt.bezierBoundingBox(...a,...l,...c,...u);e=Math.min(e,f[0]),s=Math.min(s,f[1]),i=Math.max(i,f[2]),r=Math.max(r,f[3])}return[e,s,i,r]},Ey=function(){return h(this,Fi)?Math.ceil(this.thickness*this.parentScale):0},Md=function(e=!1){if(this.isEmpty())return;if(!h(this,Fi)){C(this,X,za).call(this);return}const i=C(this,X,AE).call(this),s=C(this,X,Ey).call(this);b(this,Ul,Math.max(Ot.MIN_SIZE,i[2]-i[0])),b(this,Bl,Math.max(Ot.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+h(this,Ul)*this.scaleFactor),o=Math.ceil(s+h(this,Bl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=r/a,this.height=o/l,this.setAspectRatio(r,o);const c=this.translationX,u=this.translationY;this.translationX=-i[0],this.translationY=-i[1],C(this,X,Oc).call(this),C(this,X,za).call(this),b(this,Wl,r),b(this,Gl,o),this.setDims(r,o);const f=e?s/this.scaleFactor/2:0;this.translate(c-this.translationX-f,u-this.translationY-f)},x(re,ao),mt(re,"_defaultColor",null),mt(re,"_defaultOpacity",1),mt(re,"_defaultThickness",1),mt(re,"_type","ink"),mt(re,"_editorType",Ct.INK);let gE=re;var on,an,Bo,Or,Uo,uh,Bs,Vr,Us,fs,Em,Dt,Nd,Fd,Ay,SE,$L,HL,bE,Ty,WL;const hf=class hf extends Ot{constructor(e){super({...e,name:"stampEditor"});x(this,Dt);x(this,on,null);x(this,an,null);x(this,Bo,null);x(this,Or,null);x(this,Uo,null);x(this,uh,"");x(this,Bs,null);x(this,Vr,null);x(this,Us,null);x(this,fs,!1);x(this,Em,!1);b(this,Or,e.bitmapUrl),b(this,Uo,e.bitmapFile)}static initialize(e,i){Ot.initialize(e,i)}static get supportedTypes(){return Pt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Pt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Ct.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,i;h(this,an)&&(b(this,on,null),this._uiManager.imageManager.deleteId(h(this,an)),(e=h(this,Bs))==null||e.remove(),b(this,Bs,null),(i=h(this,Vr))==null||i.disconnect(),b(this,Vr,null),h(this,Us)&&(clearTimeout(h(this,Us)),b(this,Us,null))),super.remove()}rebuild(){if(!this.parent){h(this,an)&&C(this,Dt,Ay).call(this);return}super.rebuild(),this.div!==null&&(h(this,an)&&h(this,Bs)===null&&C(this,Dt,Ay).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(h(this,Bo)||h(this,on)||h(this,Or)||h(this,Uo)||h(this,an))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),h(this,on)?C(this,Dt,SE).call(this):C(this,Dt,Ay).call(this),this.width){const[s,r]=this.parentDimensions;this.setAt(e*s,i*r,this.width*s,this.height*r)}return this.div}getImageForAltText(){return h(this,Bs)}static deserialize(e,i,s){if(e instanceof lL)return null;const r=super.deserialize(e,i,s),{rect:o,bitmapUrl:a,bitmapId:l,isSvg:c,accessibilityData:u}=e;l&&s.imageManager.isValidId(l)?b(r,an,l):b(r,Or,a),b(r,fs,c);const[f,p]=r.pageDimensions;return r.width=(o[2]-o[0])/f,r.height=(o[3]-o[1])/p,u&&(r.altTextData=u),r}serialize(e=!1,i=null){if(this.isEmpty())return null;const s={annotationType:Ct.STAMP,bitmapId:h(this,an),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,fs),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=C(this,Dt,Ty).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:r,altText:o}=this.altTextData;if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),i===null)return s;i.stamps||(i.stamps=new Map);const a=h(this,fs)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(h(this,an)))i.stamps.set(h(this,an),{area:a,serialized:s}),s.bitmap=C(this,Dt,Ty).call(this,!1);else if(h(this,fs)){const l=i.stamps.get(h(this,an));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=C(this,Dt,Ty).call(this,!1))}return s}};on=new WeakMap,an=new WeakMap,Bo=new WeakMap,Or=new WeakMap,Uo=new WeakMap,uh=new WeakMap,Bs=new WeakMap,Vr=new WeakMap,Us=new WeakMap,fs=new WeakMap,Em=new WeakMap,Dt=new WeakSet,Nd=function(e,i=!1){if(!e){this.remove();return}b(this,on,e.bitmap),i||(b(this,an,e.id),b(this,fs,e.isSvg)),e.file&&b(this,uh,e.file.name),C(this,Dt,SE).call(this)},Fd=function(){b(this,Bo,null),this._uiManager.enableWaiting(!1),h(this,Bs)&&this.div.focus()},Ay=function(){if(h(this,an)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,an)).then(s=>C(this,Dt,Nd).call(this,s,!0)).finally(()=>C(this,Dt,Fd).call(this));return}if(h(this,Or)){const s=h(this,Or);b(this,Or,null),this._uiManager.enableWaiting(!0),b(this,Bo,this._uiManager.imageManager.getFromUrl(s).then(r=>C(this,Dt,Nd).call(this,r)).finally(()=>C(this,Dt,Fd).call(this)));return}if(h(this,Uo)){const s=h(this,Uo);b(this,Uo,null),this._uiManager.enableWaiting(!0),b(this,Bo,this._uiManager.imageManager.getFromFile(s).then(r=>C(this,Dt,Nd).call(this,r)).finally(()=>C(this,Dt,Fd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=hf.supportedTypesStr;const i=this._uiManager._signal;b(this,Bo,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);C(this,Dt,Nd).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>C(this,Dt,Fd).call(this))),e.click()},SE=function(){const{div:e}=this;let{width:i,height:s}=h(this,on);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const f=Math.min(a*r/i,a*o/s);i*=f,s*=f}const[l,c]=this.parentDimensions;this.setDims(i*l/r,s*c/o),this._uiManager.enableWaiting(!1);const u=b(this,Bs,document.createElement("canvas"));e.append(u),e.hidden=!1,C(this,Dt,bE).call(this,i,s),C(this,Dt,WL).call(this),h(this,Em)||(this.parent.addUndoableEditor(this),b(this,Em,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,uh)&&u.setAttribute("aria-label",h(this,uh))},$L=function(e,i){var a;const[s,r]=this.parentDimensions;this.width=e/s,this.height=i/r,this.setDims(e,i),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,h(this,Us)!==null&&clearTimeout(h(this,Us)),b(this,Us,setTimeout(()=>{b(this,Us,null),C(this,Dt,bE).call(this,e,i)},200))},HL=function(e,i){const{width:s,height:r}=h(this,on);let o=s,a=r,l=h(this,on);for(;o>2*e||a>2*i;){const c=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=f.transferToImageBitmap()}return l},bE=function(e,i){e=Math.ceil(e),i=Math.ceil(i);const s=h(this,Bs);if(!s||s.width===e&&s.height===i)return;s.width=e,s.height=i;const r=h(this,fs)?h(this,on):C(this,Dt,HL).call(this,e,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(e,i).getContext("2d");l.drawImage(r,0,0,r.width,r.height,0,0,e,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,e,i).data,width:e,height:i,channels:4}}).then(c=>{const u=(c==null?void 0:c.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(r,0,0,r.width,r.height,0,0,e,i)},Ty=function(e){if(e){if(h(this,fs)){const r=this._uiManager.imageManager.getSvgUrl(h(this,an));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=h(this,on),i.getContext("2d").drawImage(h(this,on),0,0),i.toDataURL()}if(h(this,fs)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ha.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ha.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(h(this,on),0,0,h(this,on).width,h(this,on).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(h(this,on))},WL=function(){this._uiManager._signal&&(b(this,Vr,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&C(this,Dt,$L).call(this,i.width,i.height)})),h(this,Vr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=h(this,Vr))==null||e.disconnect(),b(this,Vr,null)},{once:!0}))},mt(hf,"_type","stamp"),mt(hf,"_editorType",Ct.STAMP);let TE=hf;var ql,hh,zs,Kl,jr,Br,Ur,vi,zo,dh,fh,On,st,$o,fn,GL,xE,PE,RE,Sy;const Ji=class Ji{constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:s,annotationLayer:r,drawLayer:o,textLayer:a,viewport:l,l10n:c}){x(this,fn);x(this,ql);x(this,hh,!1);x(this,zs,null);x(this,Kl,null);x(this,jr,null);x(this,Br,null);x(this,Ur,null);x(this,vi,new Map);x(this,zo,!1);x(this,dh,!1);x(this,fh,!1);x(this,On,null);x(this,st);const u=[...h(Ji,$o).values()];if(!Ji._initialized){Ji._initialized=!0;for(const f of u)f.initialize(c,t)}t.registerEditorTypes(u),b(this,st,t),this.pageIndex=e,this.div=i,b(this,ql,s),b(this,zs,r),this.viewport=l,b(this,On,a),this.drawLayer=o,h(this,st).addLayer(this)}get isEmpty(){return h(this,vi).size===0}get isInvisible(){return this.isEmpty&&h(this,st).getMode()===Ct.NONE}updateToolbar(t){h(this,st).updateToolbar(t)}updateMode(t=h(this,st).getMode()){switch(C(this,fn,Sy).call(this),t){case Ct.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ct.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ct.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of h(Ji,$o).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=h(this,On))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(h(this,st).getMode()!==Ct.INK)return;if(!t){for(const i of h(this,vi).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){h(this,st).setEditingState(t)}addCommands(t){h(this,st).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=h(this,zs))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of h(this,vi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(h(this,st).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!h(this,zs))return;const e=h(this,zs).getEditableAnnotations();for(const i of e){if(i.hide(),h(this,st).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;b(this,fh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of h(this,vi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(h(this,zs)){const r=h(this,zs).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(h(this,st).isDeletedAnnotationElement(a))continue;let l=e.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=t.get(a),l&&(h(this,st).addChangedExistingAnnotation(l),l.renderAnnotationElement(o),l.show(!1)),o.show()}}C(this,fn,Sy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of h(Ji,$o).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,fh,!1)}getEditableAnnotation(t){var e;return((e=h(this,zs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){h(this,st).getActive()!==t&&h(this,st).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=h(this,On))!=null&&t.div&&!h(this,Br)&&(b(this,Br,C(this,fn,GL).bind(this)),h(this,On).div.addEventListener("pointerdown",h(this,Br),{signal:h(this,st)._signal}),h(this,On).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=h(this,On))!=null&&t.div&&h(this,Br)&&(h(this,On).div.removeEventListener("pointerdown",h(this,Br)),b(this,Br,null),h(this,On).div.classList.remove("highlighting"))}enableClick(){if(h(this,jr))return;const t=h(this,st)._signal;b(this,jr,this.pointerdown.bind(this)),b(this,Kl,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",h(this,jr),{signal:t}),this.div.addEventListener("pointerup",h(this,Kl),{signal:t})}disableClick(){h(this,jr)&&(this.div.removeEventListener("pointerdown",h(this,jr)),this.div.removeEventListener("pointerup",h(this,Kl)),b(this,jr,null),b(this,Kl,null))}attach(t){h(this,vi).set(t.id,t);const{annotationElementId:e}=t;e&&h(this,st).isDeletedAnnotationElement(e)&&h(this,st).removeDeletedAnnotationElement(t)}detach(t){var e;h(this,vi).delete(t.id),(e=h(this,ql))==null||e.removePointerInTextLayer(t.contentDiv),!h(this,fh)&&t.annotationElementId&&h(this,st).addDeletedAnnotationElement(t)}remove(t){this.detach(t),h(this,st).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,h(this,dh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(h(this,st).addDeletedAnnotationElement(t.annotationElementId),Ot.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),h(this,st).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),h(this,st).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!h(this,Ur)&&(t._focusEventsAllowed=!1,b(this,Ur,setTimeout(()=>{b(this,Ur,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:h(this,st)._signal}),e.focus())},0))),t._structTreeParentId=(i=h(this,ql))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return h(this,st).getId()}get _signal(){return h(this,st)._signal}canCreateNewEmptyEditor(){var t;return(t=h(this,fn,xE))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){h(this,st).updateToolbar(t),h(this,st).updateMode(t);const{offsetX:i,offsetY:s}=C(this,fn,RE).call(this),r=this.getNextId(),o=C(this,fn,PE).call(this,{parent:this,id:r,x:i,y:s,uiManager:h(this,st),isCentered:!0,...e});o&&this.add(o)}deserialize(t){var e;return((e=h(Ji,$o).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,h(this,st)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=C(this,fn,PE).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:h(this,st),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(C(this,fn,RE).call(this),!0)}setSelected(t){h(this,st).setSelected(t)}toggleSelected(t){h(this,st).toggleSelected(t)}isSelected(t){return h(this,st).isSelected(t)}unselect(t){h(this,st).unselect(t)}pointerup(t){const{isMac:e}=ti.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&h(this,zo)){if(b(this,zo,!1),!h(this,hh)){b(this,hh,!0);return}if(h(this,st).getMode()===Ct.STAMP){h(this,st).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(h(this,st).getMode()===Ct.HIGHLIGHT&&this.enableTextSelection(),h(this,zo)){b(this,zo,!1);return}const{isMac:e}=ti.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;b(this,zo,!0);const i=h(this,st).getActive();b(this,hh,!i||i.isEmpty())}findNewParent(t,e,i){const s=h(this,st).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=h(this,st).getActive())==null?void 0:t.parent)===this&&(h(this,st).commitOrRemove(),h(this,st).setActiveEditor(null)),h(this,Ur)&&(clearTimeout(h(this,Ur)),b(this,Ur,null));for(const i of h(this,vi).values())(e=h(this,ql))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,h(this,vi).clear(),h(this,st).removeLayer(this)}render({viewport:t}){this.viewport=t,rc(this.div,t);for(const e of h(this,st).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){h(this,st).commitOrRemove(),C(this,fn,Sy).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,rc(this.div,{rotation:i}),e!==i)for(const s of h(this,vi).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return h(this,st).viewParameters.realScale}};ql=new WeakMap,hh=new WeakMap,zs=new WeakMap,Kl=new WeakMap,jr=new WeakMap,Br=new WeakMap,Ur=new WeakMap,vi=new WeakMap,zo=new WeakMap,dh=new WeakMap,fh=new WeakMap,On=new WeakMap,st=new WeakMap,$o=new WeakMap,fn=new WeakSet,GL=function(t){if(h(this,st).unselectAll(),t.target===h(this,On).div){const{isMac:e}=ti.platform;if(t.button!==0||t.ctrlKey&&e)return;h(this,st).showAllEditors("highlight",!0,!0),h(this,On).div.classList.add("free"),pv.startHighlighting(this,h(this,st).direction==="ltr",t),h(this,On).div.addEventListener("pointerup",()=>{h(this,On).div.classList.remove("free")},{once:!0,signal:h(this,st)._signal}),t.preventDefault()}},xE=function(){return h(Ji,$o).get(h(this,st).getMode())},PE=function(t){const e=h(this,fn,xE);return e?new e.prototype.constructor(t):null},RE=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),c=(r+a)/2-t,u=(o+l)/2-e,[f,p]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:f,offsetY:p}},Sy=function(){b(this,dh,!0);for(const t of h(this,vi).values())t.isEmpty()&&t.remove();b(this,dh,!1)},mt(Ji,"_initialized",!1),x(Ji,$o,new Map([rE,gE,TE,pv].map(t=>[t._editorType,t])));let CE=Ji;var $s,Am,je,Ho,Tm,kE,dc,DE,qL;const tn=class tn{constructor({pageIndex:t}){x(this,dc);x(this,$s,null);x(this,Am,0);x(this,je,new Map);x(this,Ho,new Map);this.pageIndex=t}setParent(t){if(!h(this,$s)){b(this,$s,t);return}if(h(this,$s)!==t){if(h(this,je).size>0)for(const e of h(this,je).values())e.remove(),t.append(e);b(this,$s,t)}}static get _svgFactory(){return Pt(this,"_svgFactory",new wT)}highlight(t,e,i,s=!1){const r=li(this,Am)._++,o=C(this,dc,DE).call(this,t.box);o.classList.add("highlight"),t.free&&o.classList.add("free");const a=tn._svgFactory.createElement("defs");o.append(a);const l=tn._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),s&&h(this,Ho).set(r,l);const u=C(this,dc,qL).call(this,a,c),f=tn._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",e),o.setAttribute("fill-opacity",i),f.setAttribute("href",`#${c}`),h(this,je).set(r,o),{id:r,clipPathId:`url(#${u})`}}highlightOutline(t){const e=li(this,Am)._++,i=C(this,dc,DE).call(this,t.box);i.classList.add("highlightOutline");const s=tn._svgFactory.createElement("defs");i.append(s);const r=tn._svgFactory.createElement("path");s.append(r);const o=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",o),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.free){i.classList.add("free");const u=tn._svgFactory.createElement("mask");s.append(u),a=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const f=tn._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=tn._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=tn._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),h(this,je).set(e,i),e}finalizeLine(t,e){const i=h(this,Ho).get(t);h(this,Ho).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){h(this,je).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),h(this,Ho).delete(t)}updatePath(t,e){h(this,Ho).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var i;C(i=tn,Tm,kE).call(i,h(this,je).get(t),e)}show(t,e){h(this,je).get(t).classList.toggle("hidden",!e)}rotate(t,e){h(this,je).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){h(this,je).get(t).setAttribute("fill",e)}changeOpacity(t,e){h(this,je).get(t).setAttribute("fill-opacity",e)}addClass(t,e){h(this,je).get(t).classList.add(e)}removeClass(t,e){h(this,je).get(t).classList.remove(e)}remove(t){h(this,$s)!==null&&(h(this,je).get(t).remove(),h(this,je).delete(t))}destroy(){b(this,$s,null);for(const t of h(this,je).values())t.remove();h(this,je).clear()}};$s=new WeakMap,Am=new WeakMap,je=new WeakMap,Ho=new WeakMap,Tm=new WeakSet,kE=function(t,{x:e=0,y:i=0,width:s=1,height:r=1}={}){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},dc=new WeakSet,DE=function(t){var i;const e=tn._svgFactory.create(1,1,!0);return h(this,$s).append(e),e.setAttribute("aria-hidden",!0),C(i=tn,Tm,kE).call(i,e,t),e},qL=function(t,e){const i=tn._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=tn._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},x(tn,Tm);let IE=tn;var k9=ut.AbortException,D9=ut.AnnotationEditorLayer,L9=ut.AnnotationEditorParamsType,M9=ut.AnnotationEditorType,N9=ut.AnnotationEditorUIManager,KL=ut.AnnotationLayer,XL=ut.AnnotationMode,F9=ut.CMapCompressionType,O9=ut.ColorPicker,V9=ut.DOMSVGFactory,j9=ut.DrawLayer,B9=ut.FeatureTest,PT=ut.GlobalWorkerOptions,U9=ut.ImageKind,z9=ut.InvalidPDFException,$9=ut.MissingPDFException,H9=ut.OPS,W9=ut.Outliner,G9=ut.PDFDataRangeTransport,q9=ut.PDFDateString,K9=ut.PDFWorker,X9=ut.PasswordResponses,Y9=ut.PermissionFlag,Q9=ut.PixelsPerInch,J9=ut.RenderingCancelledException,YL=ut.TextLayer,Z9=ut.UnexpectedResponseException,t8=ut.Util,e8=ut.VerbosityLevel,n8=ut.XfaLayer,i8=ut.build,s8=ut.createValidAbsoluteUrl,r8=ut.fetchData,QL=ut.getDocument,o8=ut.getFilenameFromUrl,a8=ut.getPdfFilenameFromUrl,l8=ut.getXfaPageViewport,c8=ut.isDataScheme,u8=ut.isPdfFile,h8=ut.noContextMenu,d8=ut.normalizeUnicode,f8=ut.renderTextLayer,p8=ut.setLayerDimensions,m8=ut.shadow,g8=ut.updateTextLayer,y8=ut.version;const v8=Object.freeze(Object.defineProperty({__proto__:null,AbortException:k9,AnnotationEditorLayer:D9,AnnotationEditorParamsType:L9,AnnotationEditorType:M9,AnnotationEditorUIManager:N9,AnnotationLayer:KL,AnnotationMode:XL,CMapCompressionType:F9,ColorPicker:O9,DOMSVGFactory:V9,DrawLayer:j9,FeatureTest:B9,GlobalWorkerOptions:PT,ImageKind:U9,InvalidPDFException:z9,MissingPDFException:$9,OPS:H9,Outliner:W9,PDFDataRangeTransport:G9,PDFDateString:q9,PDFWorker:K9,PasswordResponses:X9,PermissionFlag:Y9,PixelsPerInch:Q9,RenderingCancelledException:J9,TextLayer:YL,UnexpectedResponseException:Z9,Util:t8,VerbosityLevel:e8,XfaLayer:n8,build:i8,createValidAbsoluteUrl:s8,fetchData:r8,getDocument:QL,getFilenameFromUrl:o8,getPdfFilenameFromUrl:a8,getXfaPageViewport:l8,isDataScheme:c8,isPdfFile:u8,noContextMenu:h8,normalizeUnicode:d8,renderTextLayer:f8,setLayerDimensions:p8,shadow:m8,updateTextLayer:g8,version:y8},Symbol.toStringTag,{value:"Module"}));var Ge=function(n,t,e){if(e||arguments.length===2)for(var i=0,s=t.length,r;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return n.concat(r||Array.prototype.slice.call(t))},_8=["onCopy","onCut","onPaste"],w8=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],E8=["onFocus","onBlur"],A8=["onInput","onInvalid","onReset","onSubmit"],T8=["onLoad","onError"],S8=["onKeyDown","onKeyPress","onKeyUp"],b8=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],C8=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],x8=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],P8=["onSelect"],R8=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],I8=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],k8=["onScroll"],D8=["onWheel"],L8=["onAnimationStart","onAnimationEnd","onAnimationIteration"],M8=["onTransitionEnd"],N8=["onToggle"],F8=["onChange"],O8=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],_8,!0),w8,!0),E8,!0),A8,!0),T8,!0),S8,!0),b8,!0),C8,!0),x8,!0),P8,!0),R8,!0),I8,!0),k8,!0),D8,!0),L8,!0),M8,!0),F8,!0),N8,!0);function JL(n,t){var e={};return O8.forEach(function(i){var s=n[i];s&&(t?e[i]=function(r){return s(r,t(i))}:e[i]=s)}),e}function Mm(n){var t=!1,e=new Promise(function(i,s){n.then(function(r){return!t&&i(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}function ZL(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(t=0;t<s;t++)n[t]&&(e=ZL(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function D0(){for(var n,t,e=0,i="",s=arguments.length;e<s;e++)(n=arguments[e])&&(t=ZL(n))&&(i&&(i+=" "),i+=t);return i}var V8="Invariant failed";function Wt(n,t){if(!n)throw new Error(V8)}var j8=function(){},B8=j8;const In=xR(B8);var xx=Object.prototype.hasOwnProperty;function Px(n,t,e){for(e of n.keys())if(pu(e,t))return e}function pu(n,t){var e,i,s;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((i=n.length)===t.length)for(;i--&&pu(n[i],t[i]););return i===-1}if(e===Set){if(n.size!==t.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=Px(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=Px(t,s),!s)||!pu(i[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((i=n.byteLength)===t.byteLength)for(;i--&&n.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===t.byteLength)for(;i--&&n[i]===t[i];);return i===-1}if(!e||typeof n=="object"){i=0;for(e in n)if(xx.call(n,e)&&++i&&!xx.call(t,e)||!(e in t)||!pu(n[e],t[e]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}const tM=j.createContext(null);function mu({children:n,type:t}){return N.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const U8="noopener noreferrer nofollow";class z8{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Wt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Wt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Wt(this.pdfDocument),Wt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Wt(Array.isArray(e));const i=e[0];new Promise(s=>{Wt(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{Wt(!1)}):typeof i=="number"?s(i):Wt(!1)}).then(s=>{const r=s+1;Wt(this.pdfViewer),Wt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Wt(this.pdfViewer),Wt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||U8,t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Rx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},L0=typeof document<"u",eM=L0&&window.location.protocol==="file:";function $8(n){return typeof n<"u"}function Fa(n){return $8(n)&&n!==null}function H8(n){return typeof n=="string"}function W8(n){return n instanceof ArrayBuffer}function G8(n){return Wt(L0),n instanceof Blob}function LE(n){return H8(n)&&/^data:/.test(n)}function Ix(n){Wt(LE(n));const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function q8(){return L0&&window.devicePixelRatio||1}const nM="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function kx(){In(!eM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${nM}`)}function K8(){In(!eM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${nM}`)}function lc(n){n!=null&&n.cancel&&n.cancel()}function ME(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function X8(n){return n.name==="RenderingCancelledException"}function Y8(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}function Q8(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Eh(){return j.useReducer(Q8,{value:void 0,error:void 0})}var J8=function(n,t,e,i){function s(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})},Dx=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const{PDFDataRangeTransport:Z8}=v8,tj=(n,t)=>{switch(t){case Rx.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case Rx.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function Lx(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const ej=j.forwardRef(function(t,e){var{children:i,className:s,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:_,onLoadSuccess:A,onPassword:v=tj,onSourceError:w,onSourceSuccess:T,options:D,renderMode:F,rotate:O}=t,P=Dx(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[S,R]=Eh(),{value:k,error:M}=S,[V,L]=Eh(),{value:Z,error:ct}=V,gt=j.useRef(new z8),G=j.useRef([]),z=j.useRef(void 0),tt=j.useRef(void 0);l&&l!==z.current&&Lx(l)&&(In(!pu(l,z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),z.current=l),D&&D!==tt.current&&(In(!pu(D,tt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),tt.current=D);const it=j.useRef({scrollPageIntoView:Mt=>{const{dest:ne,pageNumber:be,pageIndex:_e=be-1}=Mt;if(m){m({dest:ne,pageIndex:_e,pageNumber:be});return}const As=G.current[_e];if(As){As.scrollIntoView();return}In(!1,`An internal link leading to page ${be} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});j.useImperativeHandle(e,()=>({linkService:gt,pages:G,viewer:it}),[]);function It(){T&&T()}function at(){M&&(In(!1,M.toString()),w&&w(M))}function ht(){R({type:"RESET"})}j.useEffect(ht,[l,R]);const de=j.useCallback(()=>J8(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return LE(l)?{data:Ix(l)}:(kx(),{url:l});if(l instanceof Z8)return{range:l};if(W8(l))return{data:l};if(L0&&G8(l))return{data:yield Y8(l)};if(Wt(typeof l=="object"),Wt(Lx(l)),"url"in l&&typeof l.url=="string"){if(LE(l.url)){const{url:Mt}=l,ne=Dx(l,["url"]),be=Ix(Mt);return Object.assign({data:be},ne)}kx()}return l}),[l]);j.useEffect(()=>{const Mt=Mm(de());return Mt.promise.then(ne=>{R({type:"RESOLVE",value:ne})}).catch(ne=>{R({type:"REJECT",error:ne})}),()=>{lc(Mt)}},[de,R]),j.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){at();return}It()}},[k]);function se(){Z&&(A&&A(Z),G.current=new Array(Z.numPages),gt.current.setDocument(Z))}function Yt(){ct&&(In(!1,ct.toString()),g&&g(ct))}j.useEffect(function(){L({type:"RESET"})},[L,k]),j.useEffect(function(){if(!k)return;const ne=Object.assign(Object.assign({},k),D),be=QL(ne);_&&(be.onProgress=_),v&&(be.onPassword=v);const _e=be;return _e.promise.then(As=>{L({type:"RESOLVE",value:As})}).catch(As=>{_e.destroyed||L({type:"REJECT",error:As})}),()=>{_e.destroy()}},[D,L,k]),j.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){Yt();return}se()}},[Z]),j.useEffect(function(){gt.current.setViewer(it.current),gt.current.setExternalLinkRel(o),gt.current.setExternalLinkTarget(a)},[o,a]);const Tt=j.useCallback((Mt,ne)=>{G.current[Mt]=ne},[]),gn=j.useCallback(Mt=>{delete G.current[Mt]},[]),Ri=j.useMemo(()=>({imageResourcesPath:u,linkService:gt.current,onItemClick:m,pdf:Z,registerPage:Tt,renderMode:F,rotate:O,unregisterPage:gn}),[u,m,Z,Tt,F,O,gn]),zt=j.useMemo(()=>JL(P,()=>Z),[P,Z]);function Es(){return N.jsx(tM.Provider,{value:Ri,children:i})}function rr(){return l?Z==null?N.jsx(mu,{type:"loading",children:typeof f=="function"?f():f}):Z===!1?N.jsx(mu,{type:"error",children:typeof r=="function"?r():r}):Es():N.jsx(mu,{type:"no-data",children:typeof p=="function"?p():p})}return N.jsx("div",Object.assign({className:D0("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},zt,{children:rr()}))});function iM(){return j.useContext(tM)}function sM(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(r){e.forEach(function(o){typeof o=="function"?o(r):o&&(o.current=r)})}}const rM=j.createContext(null),oM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},nj=/^H(\d+)$/;function ij(n){return n in oM}function M0(n){return"children"in n}function aM(n){return M0(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function sj(n){const t={};if(M0(n)){const{role:e}=n,i=e.match(nj);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(ij(e)){const s=oM[e];s&&(t.role=s)}}return t}function lM(n){const t={};if(M0(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),aM(n)){const[e]=n.children;if(e){const i=lM(e);return Object.assign(Object.assign({},t),i)}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function rj(n){return n?Object.assign(Object.assign({},sj(n)),lM(n)):null}function cM({className:n,node:t}){const e=j.useMemo(()=>rj(t),[t]),i=j.useMemo(()=>!M0(t)||aM(t)?null:t.children.map((s,r)=>N.jsx(cM,{node:s},r)),[t]);return N.jsx("span",Object.assign({className:n},e,{children:i}))}function N0(){return j.useContext(rM)}function oj(){const n=N0();Wt(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[i,s]=Eh(),{value:r,error:o}=i,{customTextRenderer:a,page:l}=n;function c(){r&&e&&e(r)}function u(){o&&(In(!1,o.toString()),t&&t(o))}return j.useEffect(function(){s({type:"RESET"})},[s,l]),j.useEffect(function(){if(a||!l)return;const p=Mm(l.getStructTree()),m=p;return p.promise.then(g=>{s({type:"RESOLVE",value:g})}).catch(g=>{s({type:"REJECT",error:g})}),()=>lc(m)},[a,l,s]),j.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}c()}},[r]),r?N.jsx(cM,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Mx=XL;function aj(n){const t=N0();Wt(t);const e=Object.assign(Object.assign({},t),n),{_className:i,canvasBackground:s,devicePixelRatio:r=q8(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:f,scale:p}=e,{canvasRef:m}=n;Wt(l);const g=j.useRef(null);function _(){l&&a&&a(ME(l,p))}function A(D){X8(D)||(In(!1,D.toString()),o&&o(D))}const v=j.useMemo(()=>l.getViewport({scale:p*r,rotation:f}),[r,l,f,p]),w=j.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);j.useEffect(function(){if(!l)return;l.cleanup();const{current:F}=g;if(!F)return;F.width=v.width,F.height=v.height,F.style.width=`${Math.floor(w.width)}px`,F.style.height=`${Math.floor(w.height)}px`,F.style.visibility="hidden";const O={annotationMode:c?Mx.ENABLE_FORMS:Mx.ENABLE,canvasContext:F.getContext("2d",{alpha:!1}),viewport:v};s&&(O.background=s);const P=l.render(O),S=P;return P.promise.then(()=>{F.style.visibility="",_()}).catch(A),()=>lc(S)},[s,l,c,v,w]);const T=j.useCallback(()=>{const{current:D}=g;D&&(D.width=0,D.height=0)},[]);return j.useEffect(()=>T,[T]),N.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:sM(m,g),style:{display:"block",userSelect:"none"},children:u?N.jsx(oj,{}):null})}function lj(n){return"str"in n}function cj(){const n=N0();Wt(n);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Wt(o);const[f,p]=Eh(),{value:m,error:g}=f,_=j.useRef(null),A=j.useRef(void 0);In(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){m&&i&&i(m)}function w(){g&&(In(!1,g.toString()),e&&e(g))}j.useEffect(function(){p({type:"RESET"})},[o,p]),j.useEffect(function(){if(!o)return;const R=Mm(o.getTextContent()),k=R;return R.promise.then(M=>{p({type:"RESOLVE",value:M})}).catch(M=>{p({type:"REJECT",error:M})}),()=>lc(k)},[o,p]),j.useEffect(()=>{if(m!==void 0){if(m===!1){w();return}v()}},[m]);const T=j.useCallback(()=>{r&&r()},[r]),D=j.useCallback(S=>{In(!1,S.toString()),s&&s(S)},[s]);function F(){const S=A.current;S&&S.classList.add("active")}function O(){const S=A.current;S&&S.classList.remove("active")}const P=j.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return j.useLayoutEffect(function(){if(!o||!m)return;const{current:R}=_;if(!R)return;R.innerHTML="";const k=o.streamTextContent({includeMarkedContent:!0}),M={container:R,textContentSource:k,viewport:P},V=new YL(M),L=V;return V.render().then(()=>{const Z=document.createElement("div");Z.className="endOfContent",R.append(Z),A.current=Z;const ct=R.querySelectorAll('[role="presentation"]');if(t){let gt=0;m.items.forEach((G,z)=>{if(!lj(G))return;const tt=ct[gt];if(!tt)return;const it=t(Object.assign({pageIndex:a,pageNumber:l,itemIndex:z},G));tt.innerHTML=it,gt+=G.str&&G.hasEOL?2:1})}T()}).catch(D),()=>lc(L)},[t,D,T,o,a,l,m,P]),N.jsx("div",{className:D0("react-pdf__Page__textContent","textLayer"),onMouseUp:O,onMouseDown:F,ref:_})}function uj(){const n=iM(),t=N0();Wt(t);const e=Object.assign(Object.assign({},n),t),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:f,rotate:p,scale:m=1}=e;Wt(u),Wt(c),Wt(s);const[g,_]=Eh(),{value:A,error:v}=g,w=j.useRef(null);In(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function T(){A&&o&&o(A)}function D(){v&&(In(!1,v.toString()),r&&r(v))}j.useEffect(function(){_({type:"RESET"})},[_,c]),j.useEffect(function(){if(!c)return;const R=Mm(c.getAnnotations()),k=R;return R.promise.then(M=>{_({type:"RESOLVE",value:M})}).catch(M=>{_({type:"REJECT",error:M})}),()=>{lc(k)}},[_,c]),j.useEffect(()=>{if(A!==void 0){if(A===!1){D();return}T()}},[A]);function F(){l&&l()}function O(S){In(!1,`${S}`),a&&a(S)}const P=j.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return j.useEffect(function(){if(!u||!c||!s||!A)return;const{current:R}=w;if(!R)return;const k=P.clone({dontFlip:!0}),M={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:R,l10n:null,page:c,viewport:k},V={annotations:A,annotationStorage:u.annotationStorage,div:R,imageResourcesPath:i,linkService:s,page:c,renderForms:f,viewport:k};R.innerHTML="";try{new KL(M).render(V),F()}catch(L){O(L)}return()=>{}},[A,i,s,c,u,f,P]),N.jsx("div",{className:D0("react-pdf__Page__annotations","annotationLayer"),ref:w})}var hj=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const Nx=1;function dj(n){const t=iM(),e=Object.assign(Object.assign({},t),n),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:f,error:p="Failed to load the page.",height:m,inputRef:g,loading:_="Loading page",noData:A="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:w,onGetStructTreeError:T,onGetStructTreeSuccess:D,onGetTextError:F,onGetTextSuccess:O,onLoadError:P,onLoadSuccess:S,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:k,onRenderError:M,onRenderSuccess:V,onRenderTextLayerError:L,onRenderTextLayerSuccess:Z,pageIndex:ct,pageNumber:gt,pdf:G,registerPage:z,renderAnnotationLayer:tt=!0,renderForms:it=!1,renderMode:It="canvas",renderTextLayer:at=!0,rotate:ht,scale:de=Nx,unregisterPage:se,width:Yt}=e,Tt=hj(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[gn,Ri]=Eh(),{value:zt,error:Es}=gn,rr=j.useRef(null);Wt(G);const Mt=Fa(gt)?gt-1:ct??null,ne=gt??(Fa(ct)?ct+1:null),be=ht??(zt?zt.rotate:null),_e=j.useMemo(()=>{if(!zt)return null;let fe=1;const or=de??Nx;if(Yt||m){const ka=zt.getViewport({scale:1,rotation:be});Yt?fe=Yt/ka.width:m&&(fe=m/ka.height)}return or*fe},[m,zt,be,de,Yt]);j.useEffect(function(){return()=>{Fa(Mt)&&s&&se&&se(Mt)}},[s,G,Mt,se]);function As(){if(S){if(!zt||!_e)return;S(ME(zt,_e))}if(s&&z){if(!Fa(Mt)||!rr.current)return;z(Mt,rr.current)}}function n_(){Es&&(In(!1,Es.toString()),P&&P(Es))}j.useEffect(function(){Ri({type:"RESET"})},[Ri,G,Mt]),j.useEffect(function(){if(!G||!ne)return;const or=Mm(G.getPage(ne)),ka=or;return or.promise.then(bc=>{Ri({type:"RESOLVE",value:bc})}).catch(bc=>{Ri({type:"REJECT",error:bc})}),()=>lc(ka)},[Ri,G,ne]),j.useEffect(()=>{if(zt!==void 0){if(zt===!1){n_();return}As()}},[zt,_e]);const Gm=j.useMemo(()=>zt&&Fa(Mt)&&ne&&Fa(be)&&Fa(_e)?{_className:i,canvasBackground:r,customTextRenderer:u,devicePixelRatio:f,onGetAnnotationsError:v,onGetAnnotationsSuccess:w,onGetStructTreeError:T,onGetStructTreeSuccess:D,onGetTextError:F,onGetTextSuccess:O,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:k,onRenderError:M,onRenderSuccess:V,onRenderTextLayerError:L,onRenderTextLayerSuccess:Z,page:zt,pageIndex:Mt,pageNumber:ne,renderForms:it,renderTextLayer:at,rotate:be,scale:_e}:null,[i,r,u,f,v,w,T,D,F,O,R,k,M,V,L,Z,zt,Mt,ne,it,at,be,_e]),zh=j.useMemo(()=>JL(Tt,()=>zt&&(_e?ME(zt,_e):void 0)),[Tt,zt,_e]),Ia=`${Mt}@${_e}/${be}`;function i_(){switch(It){case"custom":return Wt(c),N.jsx(c,{},`${Ia}_custom`);case"none":return null;case"canvas":default:return N.jsx(aj,{canvasRef:o},`${Ia}_canvas`)}}function $h(){return at?N.jsx(cj,{},`${Ia}_text`):null}function Hh(){return tt?N.jsx(uj,{},`${Ia}_annotations`):null}function qm(){return N.jsxs(rM.Provider,{value:Gm,children:[i_(),$h(),Hh(),a]})}function We(){return ne?G===null||zt===void 0||zt===null?N.jsx(mu,{type:"loading",children:typeof _=="function"?_():_}):G===!1||zt===!1?N.jsx(mu,{type:"error",children:typeof p=="function"?p():p}):qm():N.jsx(mu,{type:"no-data",children:typeof A=="function"?A():A})}return N.jsx("div",Object.assign({className:D0(i,l),"data-page-number":ne,ref:sM(g,rr),style:{"--scale-factor":`${_e}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},zh,{children:We()}))}K8();PT.workerSrc="pdf.worker.mjs";const Fx=""+new URL("Leitch_ Mason-D1ziJfnP.pdf",import.meta.url).href;/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uM=(...n)=>n.filter((t,e,i)=>!!t&&i.indexOf(t)===e).join(" ");/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=j.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:o,...a},l)=>j.createElement("svg",{ref:l,...pj,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:uM("lucide",s),...a},[...o.map(([c,u])=>j.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=(n,t)=>{const e=j.forwardRef(({className:i,...s},r)=>j.createElement(mj,{ref:r,iconNode:t,className:uM(`lucide-${fj(n)}`,i),...s}));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=wc("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=wc("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=wc("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=wc("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=wc("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=wc("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=wc("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ej="_themeToggle_1wsh8_1",Aj="_dark_1wsh8_31",Tj="_toggleIcon_1wsh8_75",Sj="_darkIcon_1wsh8_99",kc={themeToggle:Ej,dark:Aj,toggleIcon:Tj,darkIcon:Sj},bj=({isDarkMode:n,onToggle:t})=>N.jsx("button",{className:`${kc.themeToggle} ${n?kc.light:kc.dark}`,onClick:t,"aria-label":`Switch to ${n?"light":"dark"} mode`,children:N.jsx("div",{className:`${kc.toggleIcon} ${n?kc.darkIcon:kc.lightIcon}`,children:n?N.jsx(yj,{size:24}):N.jsx(_j,{size:24})})}),Cj="_navItems_shypa_5",xj="_nav_shypa_5",Pj="_h1_shypa_21",Rj="_header_shypa_25",Ij="_headerTitles_shypa_32",kj="_pdfOverlay_shypa_39",Dj="_pdfPopup_shypa_52",Lj="_buttonContainer_shypa_63",Mj="_closeButton_shypa_72",Nj="_downloadButton_shypa_86",Xi={navItems:Cj,nav:xj,h1:Pj,header:Rj,headerTitles:Ij,pdfOverlay:kj,pdfPopup:Dj,buttonContainer:Lj,closeButton:Mj,downloadButton:Nj};PT.workerSrc=new URL(""+new URL("pdf.worker.min-DGf6LXVo.mjs",import.meta.url).href,import.meta.url).toString();function jx({projectsRef:n}){const t=l=>{l.current.scrollIntoView({behavior:"smooth"})},[e,i]=j.useState(!0),[s,r]=j.useState(!1);j.useEffect(()=>{document.body.setAttribute("data-theme",e?"dark":"light")},[e]);const o=()=>{i(l=>!l)},a=l=>{l.preventDefault(),r(!0)};return N.jsxs("header",{className:Xi.header,children:[N.jsxs("nav",{className:Xi.nav,children:[N.jsxs("div",{className:Xi.headerTitles,children:[N.jsxs("ul",{children:[N.jsx("h1",{className:Xi.h1,children:"Mason Leitch"}),N.jsx("h3",{children:"Software Developer"})]}),N.jsx("ul",{children:N.jsx("li",{style:{fontSize:"1.25em",borderLeft:"1px solid white ",paddingLeft:"10px"},children:N.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),t(n)},children:"Projects"})})})]}),N.jsx("div",{children:N.jsx(bj,{isDarkMode:e,onToggle:o})}),N.jsxs("ul",{className:Xi.navItems,children:[N.jsx("li",{children:N.jsx(Qk,{to:"/",className:Xi.link,children:"Home"})}),N.jsx("li",{children:N.jsx("a",{href:"#",onClick:a,children:"Resume"})}),N.jsx("li",{children:N.jsx("a",{href:"https://www.linkedin.com/in/mason-leitch-78b90a206/",target:"_blank",children:"LinkedIn"})}),N.jsx("li",{children:N.jsx("a",{href:"https://github.com/masonym",target:"_blank",children:"GitHub"})}),N.jsx("li",{children:N.jsx("a",{href:"mailto:nosamleitch@gmail.com",target:"_blank",children:"Contact"})})]})]}),s&&N.jsx("div",{className:Xi.pdfOverlay,children:N.jsxs("div",{className:Xi.pdfPopup,children:[N.jsxs("div",{className:Xi.buttonContainer,children:[N.jsx("a",{href:Fx,download:"Mason_Leitch_Resume.pdf",className:Xi.downloadButton,children:"Download"}),N.jsx("button",{onClick:()=>r(!1),className:Xi.closeButton,children:"Close"})]}),N.jsxs(ej,{file:Fx,options:{workerSrc:"/pdf.worker.js"},children:[N.jsx(dj,{pageNumber:1,renderTextLayer:!1,scale:1.5}),";"]})]})})]})}const Fj="_greetingsText_zjvwb_1",Oj="_heroSection_zjvwb_9",Vj="_backgroundAnimation_zjvwb_21",jj="_gradientAnimation_zjvwb_1",Bj="_content_zjvwb_32",Uj="_mainTitle_zjvwb_41",zj="_fadeInUp_zjvwb_1",$j="_roleText_zjvwb_53",Hj="_cursor_zjvwb_65",Wj="_blink_zjvwb_1",Gj="_greetingsContainer_zjvwb_75",qj="_greetingItem_zjvwb_86",Kj="_fadeIn_zjvwb_1",po={greetingsText:Fj,heroSection:Oj,backgroundAnimation:Vj,gradientAnimation:jj,content:Bj,mainTitle:Uj,fadeInUp:zj,roleText:$j,cursor:Hj,blink:Wj,greetingsContainer:Gj,greetingItem:qj,fadeIn:Kj},Xj={French:"Bonjour",Japanese:"",Spanish:"Hola",Korean:"",Italian:"Ciao",Persian:"",Portuguese:"Ol",Chinese:"",Swahili:"Habari",Arabic:"",Russian:"",Hindi:"",Swedish:"Hej",Bengali:"",Greek:" ",Turkish:"Merhaba",Polish:"Cze",Vietnamese:"Xin cho",Thai:"",Hebrew:"",Finnish:"Hei",Czech:"Ahoj",German:"Hallo",Hungarian:"Szia",Romanian:"Salut",Indonesian:"Halo",Tagalog:"Kamusta"},Bx=["Software Engineer","Full Stack Developer","Problem Solver","Tech Enthusiast"],Yj=()=>{const[n,t]=j.useState([]),e=j.useRef(null),[i,s]=j.useState(0),[r,o]=j.useState(""),[a,l]=j.useState(!1),c=100,u=50,f=2e3;return j.useEffect(()=>{const p=Bx[i];let m;return!a&&r.length===p.length?m=setTimeout(()=>l(!0),f):a&&r.length===0?(l(!1),s(g=>(g+1)%Bx.length)):m=setTimeout(()=>{o(g=>a?p.slice(0,g.length-1):p.slice(0,g.length+1))},a?u:c),()=>clearTimeout(m)},[r,a,i]),j.useEffect(()=>{if(!e.current)return;const p=e.current,m=Object.entries(Xj).filter(([A])=>A!=="English");let g=[];const _=A=>{if(A>=m.length)return;const[v,w]=m[A],T=p.offsetWidth,D=p.offsetHeight,F=100,O=T/2,P=D/2,S=Math.random()*Math.PI*2,R=200,k=Math.min(O,P)-F,M=R+Math.random()*(k-R),V=O+Math.cos(S)*M,L=P+Math.sin(S)*M,Z={id:`${v}-${Date.now()}`,lang:v,greeting:w,style:{left:`${V}px`,top:`${L}px`,opacity:Math.random()*.3+.7}};if(t(ct=>[...ct,Z]),A<m.length-1){const ct=setTimeout(()=>{_(A+1)},Math.random()*300+200);g.push(ct)}};return _(0),()=>{g.forEach(A=>clearTimeout(A)),t([])}},[]),N.jsx("section",{className:po.heroSection,children:N.jsxs("div",{className:po.content,children:[N.jsxs("h1",{className:po.mainTitle,children:["Hi, I'm Mason",N.jsx("span",{className:po.cursor,children:"|"})]}),N.jsxs("div",{className:po.roleText,children:[r,N.jsx("span",{className:po.cursor,children:"|"})]}),N.jsx("div",{ref:e,className:po.greetingsContainer,children:n.map(p=>N.jsx("div",{className:po.greetingItem,style:p.style,children:p.greeting},p.id))})]})})},Qj=""+new URL("profile-portrait-Bk6j36rt.jpg",import.meta.url).href,Jj="_introWrapper_wh8px_5",Zj="_introParagraph_wh8px_16",t7="_greetingAndPortrait_wh8px_25",e7="_portrait_wh8px_34",Dg={introWrapper:Jj,introParagraph:Zj,greetingAndPortrait:t7,portrait:e7};function n7(){return N.jsxs("div",{className:Dg.introWrapper,children:[N.jsx("hr",{style:{color:"white",width:"100%"}}),N.jsxs("div",{className:Dg.greetingAndPortrait,children:[N.jsxs("h1",{style:{textAlign:"left",margin:0},children:["Nice to meet you!  ",N.jsx("br",{}),"I'm ",N.jsx("span",{style:{color:"#2063d6"},children:"Mason"}),"."]}),N.jsx("img",{src:Qj,className:Dg.portrait})]}),N.jsx("div",{className:Dg.introParagraph,children:N.jsxs("p",{children:["I'm from the Greater Vancouver area, and eager to join a talented team building exciting products.",N.jsx("br",{}),N.jsx("br",{}),`I write code, mostly with TypeScript and Next.js, and I love building things that real humans use! I'd love to expand my skill set and learn from others in the industry. I've spent a while learning the "safe" stuff like React, Next.js, and TypeScript, but I'm eager to move outside of the box.`,N.jsx("br",{}),N.jsx("br",{}),"Currently building ",N.jsx("a",{href:"https://github.com/masonym/phace-website",target:"_blank",rel:"noopener noreferrer",children:"Phace"}),", a full-stack booking and e-commerce website for a small business in the medical aesthetics industry, located in Chilliwack, British Columbia. Designed to replace a Wix website and acuity scheduling platform. Built to extend the limitations of off-the-shelf booking tools by building a fully customized frontend integrated with the Square API."]})})]})}function Ux({headerText:n}){return N.jsx("h1",{children:n})}const i7="_card_1muio_3",s7="_imageContainer_1muio_19",r7="_image_1muio_19",o7="_imageOverlay_1muio_36",a7="_overlayLink_1muio_54",l7="_overlayText_1muio_63",c7="_overlayIcon_1muio_68",u7="_content_1muio_73",h7="_client_1muio_80",d7="_title_1muio_86",f7="_description_1muio_92",p7="_technologies_1muio_100",m7="_techTag_1muio_107",g7="_links_1muio_122",y7="_link_1muio_122",v7="_gitHubLogo_1muio_144",_7="_gitHubSection_1muio_150",Ze={card:i7,imageContainer:s7,image:r7,imageOverlay:o7,overlayLink:a7,overlayText:l7,overlayIcon:c7,content:u7,client:h7,title:d7,description:f7,technologies:p7,techTag:m7,links:g7,link:y7,gitHubLogo:v7,gitHubSection:_7};var hM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zx=Hr.createContext&&Hr.createContext(hM),w7=["attr","size","title"];function E7(n,t){if(n==null)return{};var e=A7(n,t),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function A7(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function mv(){return mv=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},mv.apply(this,arguments)}function $x(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function gv(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$x(Object(e),!0).forEach(function(i){T7(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):$x(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function T7(n,t,e){return t=S7(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function S7(n){var t=b7(n,"string");return typeof t=="symbol"?t:t+""}function b7(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function dM(n){return n&&n.map((t,e)=>Hr.createElement(t.tag,gv({key:e},t.attr),dM(t.child)))}function oi(n){return t=>Hr.createElement(C7,mv({attr:gv({},n.attr)},t),dM(n.child))}function C7(n){var t=e=>{var{attr:i,size:s,title:r}=n,o=E7(n,w7),a=s||e.size||"1em",l;return e.className&&(l=e.className),n.className&&(l=(l?l+" ":"")+n.className),Hr.createElement("svg",mv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,o,{className:l,style:gv(gv({color:n.color||e.color},e.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&Hr.createElement("title",null,r),n.children)};return zx!==void 0?Hr.createElement(zx.Consumer,null,e=>t(e)):t(hM)}function x7(n){return oi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"},child:[]}]})(n)}function P7(n){return oi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"},child:[]}]})(n)}function R7(n){return oi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"},child:[]}]})(n)}function Hx({imageSource:n,name:t,description:e,projectLink:i,gitHubLink:s,technologies:r,client:o}){const[a,l]=j.useState(!1),c=j.useRef(null);return N.jsxs("div",{className:`${Ze.card} ${a?Ze.hovered:""}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[N.jsxs("div",{className:Ze.imageContainer,children:[N.jsx("img",{ref:c,src:n,className:Ze.image,alt:t,loading:"lazy"}),N.jsx("div",{className:Ze.imageOverlay,children:N.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:Ze.overlayLink,children:[N.jsx("span",{className:Ze.overlayText,children:"View Project"}),N.jsx(Ox,{className:Ze.overlayIcon})]})})]}),N.jsxs("div",{className:Ze.content,children:[o&&N.jsxs("h2",{className:Ze.client,children:["Client: ",o]}),N.jsx("h3",{className:Ze.title,children:t}),N.jsx("p",{className:Ze.description,children:e}),N.jsx("div",{className:Ze.technologies,children:r.map((u,f)=>N.jsx("span",{className:Ze.techTag,children:u},f))}),N.jsxs("div",{className:Ze.links,children:[N.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:Ze.link,children:[N.jsx(Ox,{size:20}),N.jsx("span",{children:"Live Demo"})]}),s&&N.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:Ze.link,children:[N.jsx(x7,{size:20}),N.jsx("span",{children:"Source Code"})]})]})]})]})}const I7="_projectsSection_bxsxe_1",k7="_filters_bxsxe_6",D7="_filterGroup_bxsxe_12",L7="_filterButtons_bxsxe_22",M7="_filterButton_bxsxe_22",N7="_active_bxsxe_46",F7="_cardContainerWrapper_bxsxe_52",O7="_loading_bxsxe_59",V7="_cardContainer_bxsxe_52",j7="_fadeIn_bxsxe_1",B7="_equalSplit2_bxsxe_71",U7="_equalSplit3_bxsxe_75",z7="_projectImage_bxsxe_79",$7="_techTag_bxsxe_98",Ga={projectsSection:I7,filters:k7,filterGroup:D7,filterButtons:L7,filterButton:M7,active:N7,cardContainerWrapper:F7,loading:O7,cardContainer:V7,fadeIn:j7,equalSplit2:B7,equalSplit3:U7,projectImage:z7,techTag:$7},H7=""+new URL("upcoming-sales-SrwnAzRq.png",import.meta.url).href,W7=""+new URL("phace-Onhvavxp.png",import.meta.url).href,G7=""+new URL("maplestory-tools-CoNKQHEt.png",import.meta.url).href,q7=""+new URL("ada-BIBME2Ix.png",import.meta.url).href,Wx=[{id:1,imageSource:q7,name:"American Defense Alliance Website",description:"A full-stack web application powering the digital presence of the American Defense Alliancea U.S. startup supporting defense contractors, government agencies, and national security stakeholders through high-impact industry events. This project also features a full-stack registration system for events, integrated with Stripe for payment processing, AWS DynamoDB for storage and Resend for confirmation emails, with the help of Stripe webhooks.",projectLink:"https://americandefensealliance.org/",gitHubLink:"https://github.com/masonym/ada-website",technologies:["Next.js","React","SEO","Dynamic Routing","Tailwind CSS","Node.js","TypeScript","AWS","Stripe","Resend"],category:"Website",client:"American Defense Alliance"},{id:2,imageSource:W7,name:"Chilliwack Med-spa Website",description:"A full-stack e-commerce and appointment booking platform built with Next.js, React, and TypeScript. This application features comprehensive Square API integration for payments, bookings, and inventory management, with robust caching mechanisms to optimize API usage. The system includes a sophisticated appointment scheduling system with real-time availability, custom consent form generation, and an admin dashboard for managing products, services, and bookings.",projectLink:"https://www.phace.ca/",gitHubLink:"",technologies:["Next.js","React","JavaScript","TypeScript","Node.js","UI/UX Design","API Integration","AWS Coral authentication"],category:"Website",client:"Phace Medical Aesthetics"}],Gx=[{id:1,imageSource:G7,name:"MapleStory Tools Project",description:"A scalable, React-based web application serving as a repository for various tools for an online game, designed with modular architecture to easily accommodate future game-related calculators and utilities.",projectLink:"https://masonym.dev",gitHubLink:"https://github.com/masonym/masonym.dev",technologies:["React","JavaScript","CSS Modules","Responsive Design"],category:"Web App"},{id:2,imageSource:H7,name:"MapleStory Upcoming Sales Viewer",description:"A React website built in conjunction with Python XML parsing to display upcoming cash shop sales for the MMORPG MapleStory.",projectLink:"https://masonym.dev/ms-upcoming-sales",gitHubLink:"https://github.com/masonym/maple-cs-parser",technologies:["React","Python","XML","API Integration"],category:"Web App"}],qx=n=>n===2?Ga.equalSplit2:n===3?Ga.equalSplit3:"";function K7(){return N.jsxs("div",{id:"projects",className:Ga.projectsSection,children:[N.jsx(Ux,{headerText:"Freelance Projects"}),N.jsx("div",{className:`${Ga.cardContainerWrapper}`,children:N.jsx("div",{className:`${Ga.cardContainer} ${qx(Wx.length)}`,children:Wx.map(n=>N.jsx(Hx,{...n},n.id))})}),N.jsx(Ux,{headerText:"Personal Projects"}),N.jsx("div",{className:`${Ga.cardContainerWrapper}`,children:N.jsx("div",{className:`${Ga.cardContainer} ${qx(Gx.length)}`,children:Gx.map(n=>N.jsx(Hx,{...n},n.id))})})]})}const X7="_footer_1jioi_1",Y7="_footerContent_1jioi_7",Q7="_footerSection_1jioi_16",J7="_footerTitle_1jioi_21",Z7="_footerDescription_1jioi_39",tB="_socialLinks_1jioi_45",eB="_socialLink_1jioi_45",nB="_quickLinks_1jioi_58",iB="_quickLink_1jioi_58",sB="_techStack_1jioi_83",rB="_techItem_1jioi_90",oB="_footerBottom_1jioi_103",aB="_footerLine_1jioi_108",lB="_footerCopyright_1jioi_114",cB="_builtWith_1jioi_122",uB="_reactIcon_1jioi_128",hB="_spin_1jioi_1",dB="_socialLogos_1jioi_142",fB="_footerText_1jioi_148",me={footer:X7,footerContent:Y7,footerSection:Q7,footerTitle:J7,footerDescription:Z7,socialLinks:tB,socialLink:eB,quickLinks:nB,quickLink:iB,techStack:sB,techItem:rB,footerBottom:oB,footerLine:aB,footerCopyright:lB,builtWith:cB,reactIcon:uB,spin:hB,socialLogos:dB,footerText:fB};function pB(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...i)=>n(...i);return new Proxy(e,{get:(i,s)=>s==="create"?n:(t.has(s)||t.set(s,n(s)),t.get(s))})}function F0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const NE=n=>Array.isArray(n);function fM(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}function Df(n){return typeof n=="string"||Array.isArray(n)}function Kx(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function RT(n,t,e,i){if(typeof t=="function"){const[s,r]=Kx(i);t=t(e!==void 0?e:n.custom,s,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,r]=Kx(i);t=t(e!==void 0?e:n.custom,s,r)}return t}function O0(n,t,e){const i=n.getProps();return RT(i,t,e!==void 0?e:i.custom,n)}const IT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kT=["initial",...IT],Nm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ec=new Set(Nm),Kr=n=>n*1e3,Xr=n=>n/1e3,mB={type:"spring",stiffness:500,damping:25,restSpeed:10},gB=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yB={type:"keyframes",duration:.8},vB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_B=(n,{keyframes:t})=>t.length>2?yB:Ec.has(n)?n.startsWith("scale")?gB(t[1]):mB:vB;function DT(n,t){return n?n[t]||n.default||n:void 0}const wB={skipAnimations:!1,useManualTiming:!1},EB=n=>n!==null;function V0(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(EB),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const Si=n=>n;let FE=Si;function AB(n){let t=new Set,e=new Set,i=!1,s=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){r.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const m=f&&i?t:e;return u&&r.add(c),m.has(c)||m.add(c),c},cancel:c=>{e.delete(c),r.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[t,e]=[e,t],t.forEach(a),t.clear(),i=!1,s&&(s=!1,l.process(c))}};return l}const Lg=["read","resolveKeyframes","update","preRender","render","postRender"],TB=40;function pM(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=Lg.reduce((v,w)=>(v[w]=AB(r),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:p}=o,m=()=>{const v=performance.now();e=!1,s.delta=i?1e3/60:Math.max(Math.min(v-s.timestamp,TB),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),f.process(s),p.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(m))},g=()=>{e=!0,i=!0,s.isProcessing||n(m)};return{schedule:Lg.reduce((v,w)=>{const T=o[w];return v[w]=(D,F=!1,O=!1)=>(e||g(),T.schedule(D,F,O)),v},{}),cancel:v=>{for(let w=0;w<Lg.length;w++)o[Lg[w]].cancel(v)},state:s,steps:o}}const{schedule:ee,cancel:da,state:cn,steps:t1}=pM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Si,!0),mM=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,SB=1e-7,bB=12;function CB(n,t,e,i,s){let r,o,a=0;do o=t+(e-t)/2,r=mM(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>SB&&++a<bB);return o}function Fm(n,t,e,i){if(n===t&&e===i)return Si;const s=r=>CB(r,0,1,n,e);return r=>r===0||r===1?r:mM(s(r),t,i)}const gM=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,yM=n=>t=>1-n(1-t),vM=Fm(.33,1.53,.69,.99),LT=yM(vM),_M=gM(LT),wM=n=>(n*=2)<1?.5*LT(n):.5*(2-Math.pow(2,-10*(n-1))),MT=n=>1-Math.sin(Math.acos(n)),EM=yM(MT),AM=gM(MT),TM=n=>/^0[^.\s]+$/u.test(n);function xB(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||TM(n):!0}const SM=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),bM=n=>t=>typeof t=="string"&&t.startsWith(n),CM=bM("--"),PB=bM("var(--"),NT=n=>PB(n)?RB.test(n.split("/*")[0].trim()):!1,RB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,IB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kB(n){const t=IB.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function xM(n,t,e=1){const[i,s]=kB(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return SM(o)?parseFloat(o):o}return NT(s)?xM(s,t,e+1):s}const no=(n,t,e)=>e>t?t:e<n?n:e,Nh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lf={...Nh,transform:n=>no(0,1,n)},Mg={...Nh,default:1},Om=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),vo=Om("deg"),Ks=Om("%"),ot=Om("px"),DB=Om("vh"),LB=Om("vw"),Xx={...Ks,parse:n=>Ks.parse(n)/100,transform:n=>Ks.transform(n*100)},MB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Yx=n=>n===Nh||n===ot,Qx=(n,t)=>parseFloat(n.split(", ")[t]),Jx=(n,t)=>(e,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return Qx(s[1],t);{const r=i.match(/^matrix\((.+)\)$/u);return r?Qx(r[1],n):0}},NB=new Set(["x","y","z"]),FB=Nm.filter(n=>!NB.has(n));function OB(n){const t=[];return FB.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Ah={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:Jx(4,13),y:Jx(5,14)};Ah.translateX=Ah.x;Ah.translateY=Ah.y;const PM=n=>t=>t.test(n),VB={test:n=>n==="auto",parse:n=>n},RM=[Nh,ot,Ks,vo,LB,DB,VB],Zx=n=>RM.find(PM(n)),Ql=new Set;let OE=!1,VE=!1;function IM(){if(VE){const n=Array.from(Ql).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=OB(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}VE=!1,OE=!1,Ql.forEach(n=>n.complete()),Ql.clear()}function kM(){Ql.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(VE=!0)})}function jB(){kM(),IM()}class FT{constructor(t,e,i,s,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ql.add(this),OE||(OE=!0,ee.read(kM),ee.resolveKeyframes(IM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const o=s==null?void 0:s.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&e){const l=i.readValue(e,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&o===void 0&&s.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ql.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ql.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ef=n=>Math.round(n*1e5)/1e5,OT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function BB(n){return n==null}const UB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,VT=(n,t)=>e=>!!(typeof e=="string"&&UB.test(e)&&e.startsWith(n)||t&&!BB(e)&&Object.prototype.hasOwnProperty.call(e,t)),DM=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(OT);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},zB=n=>no(0,255,n),e1={...Nh,transform:n=>Math.round(zB(n))},Ja={test:VT("rgb","red"),parse:DM("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+e1.transform(n)+", "+e1.transform(t)+", "+e1.transform(e)+", "+ef(Lf.transform(i))+")"};function $B(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const jE={test:VT("#"),parse:$B,transform:Ja.transform},tu={test:VT("hsl","hue"),parse:DM("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ks.transform(ef(t))+", "+Ks.transform(ef(e))+", "+ef(Lf.transform(i))+")"},Cn={test:n=>Ja.test(n)||jE.test(n)||tu.test(n),parse:n=>Ja.test(n)?Ja.parse(n):tu.test(n)?tu.parse(n):jE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ja.transform(n):tu.transform(n)},HB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WB(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(OT))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(HB))===null||e===void 0?void 0:e.length)||0)>0}const LM="number",MM="color",GB="var",qB="var(",t2="${}",KB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mf(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(KB,l=>(Cn.test(l)?(i.color.push(r),s.push(MM),e.push(Cn.parse(l))):l.startsWith(qB)?(i.var.push(r),s.push(GB),e.push(l)):(i.number.push(r),s.push(LM),e.push(parseFloat(l))),++r,t2)).split(t2);return{values:e,split:a,indexes:i,types:s}}function NM(n){return Mf(n).values}function FM(n){const{split:t,types:e}=Mf(n),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=e[o];a===LM?r+=ef(s[o]):a===MM?r+=Cn.transform(s[o]):r+=s[o]}return r}}const XB=n=>typeof n=="number"?0:n;function YB(n){const t=NM(n);return FM(n)(t.map(XB))}const fa={test:WB,parse:NM,createTransformer:FM,getAnimatableNone:YB},QB=new Set(["brightness","contrast","saturate","opacity"]);function JB(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(OT)||[];if(!i)return n;const s=e.replace(i,"");let r=QB.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const ZB=/\b([a-z-]*)\(.*?\)/gu,BE={...fa,getAnimatableNone:n=>{const t=n.match(ZB);return t?t.map(JB).join(" "):n}},tU={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot},eU={rotate:vo,rotateX:vo,rotateY:vo,rotateZ:vo,scale:Mg,scaleX:Mg,scaleY:Mg,scaleZ:Mg,skew:vo,skewX:vo,skewY:vo,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:Lf,originX:Xx,originY:Xx,originZ:ot},e2={...Nh,transform:Math.round},jT={...tU,...eU,zIndex:e2,size:ot,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:e2},nU={...jT,color:Cn,backgroundColor:Cn,outlineColor:Cn,fill:Cn,stroke:Cn,borderColor:Cn,borderTopColor:Cn,borderRightColor:Cn,borderBottomColor:Cn,borderLeftColor:Cn,filter:BE,WebkitFilter:BE},BT=n=>nU[n];function OM(n,t){let e=BT(n);return e!==BE&&(e=fa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const iU=new Set(["auto","none","0"]);function sU(n,t,e){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!iU.has(r)&&Mf(r).values.length&&(s=n[i]),i++}if(s&&e)for(const r of t)n[r]=OM(e,s)}class VM extends FT{constructor(t,e,i,s,r){super(t,e,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),NT(c))){const u=xM(c,e.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!MB.has(i)||t.length!==2)return;const[s,r]=t,o=Zx(s),a=Zx(r);if(o!==a)if(Yx(o)&&Yx(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)xB(t[s])&&i.push(s);i.length&&sU(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ah[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var t;const{element:e,name:i,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Ah[i](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function UT(n){return typeof n=="function"}let by;function rU(){by=void 0}const Xs={now:()=>(by===void 0&&Xs.set(cn.isProcessing||wB.useManualTiming?cn.timestamp:performance.now()),by),set:n=>{by=n,queueMicrotask(rU)}},n2=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fa.test(n)||n==="0")&&!n.startsWith("url("));function oU(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function aU(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=n2(s,t),a=n2(r,t);return!o||!a?!1:oU(n)||(e==="spring"||UT(e))&&i}const lU=40;class jM{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xs.now(),this.options={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>lU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&jB(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Xs.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!aU(t,i,s,r))if(o)this.options.duration=0;else{l==null||l(V0(t,this.options,e)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,e);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...u},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Th=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i},BM=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)i+=n(Th(0,s-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function UM(n,t){return t?n*(1e3/t):0}const cU=5;function zM(n,t,e){const i=Math.max(t-cU,0);return UM(e-n(i),t-i)}const ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},n1=.001;function uU({duration:n=ye.duration,bounce:t=ye.bounce,velocity:e=ye.velocity,mass:i=ye.mass}){let s,r,o=1-t;o=no(ye.minDamping,ye.maxDamping,o),n=no(ye.minDuration,ye.maxDuration,Xr(n)),o<1?(s=c=>{const u=c*o,f=u*n,p=u-e,m=UE(c,o),g=Math.exp(-f);return n1-p/m*g},r=c=>{const f=c*o*n,p=f*e+e,m=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-f),_=UE(Math.pow(c,2),o);return(-s(c)+n1>0?-1:1)*((p-m)*g)/_}):(s=c=>{const u=Math.exp(-c*n),f=(c-e)*n+1;return-n1+u*f},r=c=>{const u=Math.exp(-c*n),f=(e-c)*(n*n);return u*f});const a=5/n,l=dU(s,r,a);if(n=Kr(n),isNaN(l))return{stiffness:ye.stiffness,damping:ye.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const hU=12;function dU(n,t,e){let i=e;for(let s=1;s<hU;s++)i=i-n(i)/t(i);return i}function UE(n,t){return n*Math.sqrt(1-t*t)}const zE=2e4;function $M(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<zE;)t+=e,i=n.next(t);return t>=zE?1/0:t}const fU=["duration","bounce"],pU=["stiffness","damping","mass"];function i2(n,t){return t.some(e=>n[e]!==void 0)}function mU(n){let t={velocity:ye.velocity,stiffness:ye.stiffness,damping:ye.damping,mass:ye.mass,isResolvedFromDuration:!1,...n};if(!i2(n,pU)&&i2(n,fU))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,r=2*no(.05,1,1-n.bounce)*Math.sqrt(s);t={...t,mass:ye.mass,stiffness:s,damping:r}}else{const e=uU(n);t={...t,...e,mass:ye.mass},t.isResolvedFromDuration=!0}return t}function HM(n=ye.visualDuration,t=ye.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=mU({...e,velocity:-Xr(e.velocity||0)}),g=p||0,_=c/(2*Math.sqrt(l*u)),A=o-r,v=Xr(Math.sqrt(l/u)),w=Math.abs(A)<5;i||(i=w?ye.restSpeed.granular:ye.restSpeed.default),s||(s=w?ye.restDelta.granular:ye.restDelta.default);let T;if(_<1){const F=UE(v,_);T=O=>{const P=Math.exp(-_*v*O);return o-P*((g+_*v*A)/F*Math.sin(F*O)+A*Math.cos(F*O))}}else if(_===1)T=F=>o-Math.exp(-v*F)*(A+(g+v*A)*F);else{const F=v*Math.sqrt(_*_-1);T=O=>{const P=Math.exp(-_*v*O),S=Math.min(F*O,300);return o-P*((g+_*v*A)*Math.sinh(S)+F*A*Math.cosh(S))/F}}const D={calculatedDuration:m&&f||null,next:F=>{const O=T(F);if(m)a.done=F>=f;else{let P=0;_<1&&(P=F===0?Kr(g):zM(T,F,O));const S=Math.abs(P)<=i,R=Math.abs(o-O)<=s;a.done=S&&R}return a.value=a.done?o:O,a},toString:()=>{const F=Math.min($M(D),zE),O=BM(P=>D.next(F*P).value,F,30);return F+"ms "+O}};return D}function s2({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],p={done:!1,value:f},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,g=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let _=e*t;const A=f+_,v=o===void 0?A:o(A);v!==A&&(_=v-f);const w=S=>-_*Math.exp(-S/i),T=S=>v+w(S),D=S=>{const R=w(S),k=T(S);p.done=Math.abs(R)<=c,p.value=p.done?v:k};let F,O;const P=S=>{m(p.value)&&(F=S,O=HM({keyframes:[p.value,g(p.value)],velocity:zM(T,S,p.value),damping:s,stiffness:r,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:S=>{let R=!1;return!O&&F===void 0&&(R=!0,D(S),P(S)),F!==void 0&&S>=F?O.next(S-F):(!R&&D(S),p)}}}const gU=Fm(.42,0,1,1),yU=Fm(0,0,.58,1),WM=Fm(.42,0,.58,1),vU=n=>Array.isArray(n)&&typeof n[0]!="number",zT=n=>Array.isArray(n)&&typeof n[0]=="number",r2={linear:Si,easeIn:gU,easeInOut:WM,easeOut:yU,circIn:MT,circInOut:AM,circOut:EM,backIn:LT,backInOut:_M,backOut:vM,anticipate:wM},o2=n=>{if(zT(n)){FE(n.length===4);const[t,e,i,s]=n;return Fm(t,e,i,s)}else if(typeof n=="string")return FE(r2[n]!==void 0),r2[n];return n},_U=(n,t)=>e=>t(n(e)),Vm=(...n)=>n.reduce(_U),le=(n,t,e)=>n+(t-n)*e;function i1(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function wU({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,l=2*e-a;s=i1(l,a,n+1/3),r=i1(l,a,n),o=i1(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function yv(n,t){return e=>e>0?t:n}const s1=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},EU=[jE,Ja,tu],AU=n=>EU.find(t=>t.test(n));function a2(n){const t=AU(n);if(!t)return!1;let e=t.parse(n);return t===tu&&(e=wU(e)),e}const l2=(n,t)=>{const e=a2(n),i=a2(t);if(!e||!i)return yv(n,t);const s={...e};return r=>(s.red=s1(e.red,i.red,r),s.green=s1(e.green,i.green,r),s.blue=s1(e.blue,i.blue,r),s.alpha=le(e.alpha,i.alpha,r),Ja.transform(s))},$E=new Set(["none","hidden"]);function TU(n,t){return $E.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function SU(n,t){return e=>le(n,t,e)}function $T(n){return typeof n=="number"?SU:typeof n=="string"?NT(n)?yv:Cn.test(n)?l2:xU:Array.isArray(n)?GM:typeof n=="object"?Cn.test(n)?l2:bU:yv}function GM(n,t){const e=[...n],i=e.length,s=n.map((r,o)=>$T(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}}function bU(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=$T(n[s])(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}}function CU(n,t){var e;const i=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=n.indexes[o][s[o]],l=(e=n.values[a])!==null&&e!==void 0?e:0;i[r]=l,s[o]++}return i}const xU=(n,t)=>{const e=fa.createTransformer(t),i=Mf(n),s=Mf(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?$E.has(n)&&!s.values.length||$E.has(t)&&!i.values.length?TU(n,t):Vm(GM(CU(i,s),s.values),e):yv(n,t)};function qM(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?le(n,t,e):$T(n)(n,t)}function PU(n,t,e){const i=[],s=e||qM,r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(t){const l=Array.isArray(t)?t[o]||Si:t;a=Vm(l,a)}i.push(a)}return i}function RU(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(FE(r===t.length),r===1)return()=>t[0];if(r===2&&n[0]===n[1])return()=>t[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=PU(t,i,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const f=Th(n[u],n[u+1],c);return o[u](f)};return e?c=>l(no(n[0],n[r-1],c)):l}function IU(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Th(0,t,i);n.push(le(e,1,s))}}function kU(n){const t=[0];return IU(t,n.length-1),t}function DU(n,t){return n.map(e=>e*t)}function LU(n,t){return n.map(()=>t||WM).splice(0,n.length-1)}function vv({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=vU(i)?i.map(o2):o2(i),r={done:!1,value:t[0]},o=DU(e&&e.length===t.length?e:kU(t),n),a=RU(o,t,{ease:Array.isArray(s)?s:LU(t,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}const MU=n=>{const t=({timestamp:e})=>n(e);return{start:()=>ee.update(t,!0),stop:()=>da(t),now:()=>cn.isProcessing?cn.timestamp:Xs.now()}},NU={decay:s2,inertia:s2,tween:vv,keyframes:vv,spring:HM},FU=n=>n/100;class HT extends jM{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:e,motionValue:i,element:s,keyframes:r}=this.options,o=(s==null?void 0:s.KeyframeResolver)||FT,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(r,a,e,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=this.options,a=UT(e)?e:NU[e]||vv;let l,c;a!==vv&&typeof t[0]!="number"&&(l=Vm(FU,qM(t[0],t[1])),t=[0,100]);const u=a({...this.options,keyframes:t});r==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=$M(u));const{calculatedDuration:f}=u,p=f+s,m=p*(i+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:i}=this;if(!i){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=i;if(this.startTime===null)return r.next(0);const{delay:p,repeat:m,repeatType:g,repeatDelay:_,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let T=this.currentTime,D=r;if(m){const S=Math.min(this.currentTime,u)/f;let R=Math.floor(S),k=S%1;!k&&S>=1&&(k=1),k===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(g==="reverse"?(k=1-k,_&&(k-=_/f)):g==="mirror"&&(D=o)),T=no(0,1,k)*f}const F=w?{done:!1,value:l[0]}:D.next(T);a&&(F.value=a(F.value));let{done:O}=F;!w&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return P&&s!==void 0&&(F.value=V0(l,this.options,s)),A&&A(F.value),P&&this.finish(),F}get duration(){const{resolved:t}=this;return t?Xr(t.calculatedDuration):0}get time(){return Xr(this.currentTime)}set time(t){t=Kr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Xr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=MU,onPlay:e,startTime:i}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),e&&e();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const OU=new Set(["opacity","clipPath","filter","transform"]);function WT(n){let t;return()=>(t===void 0&&(t=n()),t)}const VU={linearEasing:void 0};function jU(n,t){const e=WT(n);return()=>{var i;return(i=VU[t])!==null&&i!==void 0?i:e()}}const _v=jU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function KM(n){return!!(typeof n=="function"&&_v()||!n||typeof n=="string"&&(n in HE||_v())||zT(n)||Array.isArray(n)&&n.every(KM))}const Od=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,HE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Od([0,.65,.55,1]),circOut:Od([.55,0,1,.45]),backIn:Od([.31,.01,.66,-.59]),backOut:Od([.33,1.53,.69,.99])};function XM(n,t){if(n)return typeof n=="function"&&_v()?BM(n,t):zT(n)?Od(n):Array.isArray(n)?n.map(e=>XM(e,t)||HE.easeOut):HE[n]}function BU(n,t,e,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[t]:e};l&&(c.offset=l);const u=XM(a,s);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function c2(n,t){n.timeline=t,n.onfinish=null}const UU=WT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),wv=10,zU=2e4;function $U(n){return UT(n.type)||n.type==="spring"||!KM(n.ease)}function HU(n,t){const e=new HT({...t,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const s=[];let r=0;for(;!i.done&&r<zU;)i=e.sample(r),s.push(i.value),r+=wv;return{times:void 0,keyframes:s,duration:r-wv,ease:"linear"}}const YM={anticipate:wM,backInOut:_M,circInOut:AM};function WU(n){return n in YM}class u2 extends jM{constructor(t){super(t);const{name:e,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new VM(r,(o,a)=>this.onKeyframesResolved(o,a),e,i,s),this.resolver.scheduleResolve()}initPlayback(t,e){var i;let{duration:s=300,times:r,ease:o,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(typeof o=="string"&&_v()&&WU(o)&&(o=YM[o]),$U(this.options)){const{onComplete:p,onUpdate:m,motionValue:g,element:_,...A}=this.options,v=HU(t,A);t=v.keyframes,t.length===1&&(t[1]=t[0]),s=v.duration,r=v.times,o=v.ease,a="keyframes"}const f=BU(l.owner.current,c,t,{...this.options,duration:s,times:r,ease:o});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(c2(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(V0(t,this.options,e)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:s,times:r,type:a,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return Xr(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return Xr(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.currentTime=Kr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return Si;const{animation:i}=e;c2(i,t)}return Si}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:i,duration:s,type:r,ease:o,times:a}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:p,...m}=this.options,g=new HT({...m,keyframes:i,duration:s,type:r,ease:o,times:a,isGenerator:!0}),_=Kr(this.time);c.setWithVelocity(g.sample(_-wv).value,g.sample(_).value,wv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:i,repeatDelay:s,repeatType:r,damping:o,type:a}=t;return UU()&&i&&OU.has(i)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!s&&r!=="mirror"&&o!==0&&a!=="inertia"}}const GU=WT(()=>window.ScrollTimeline!==void 0);class qU{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=e}attachTimeline(t,e){const i=this.animations.map(s=>GU()&&s.attachTimeline?s.attachTimeline(t):e(s));return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function KU({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const GT=(n,t,e,i={},s,r)=>o=>{const a=DT(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Kr(l);let u={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:r?void 0:s};KU(a)||(u={...u,..._B(n,u)}),u.duration&&(u.duration=Kr(u.duration)),u.repeatDelay&&(u.repeatDelay=Kr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!r&&t.get()!==void 0){const p=V0(u.keyframes,a);if(p!==void 0)return ee.update(()=>{u.onUpdate(p),u.onComplete()}),new qU([])}return!r&&u2.supports(u)?new u2(u):new HT(u)},XU=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),YU=n=>NE(n)?n[n.length-1]||0:n;function qT(n,t){n.indexOf(t)===-1&&n.push(t)}function KT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class XT{constructor(){this.subscriptions=[]}add(t){return qT(this.subscriptions,t),()=>KT(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const h2=30,QU=n=>!isNaN(parseFloat(n));class JU{constructor(t,e={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Xs.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Xs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=QU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new XT);const i=this.events[t].add(e);return t==="change"?()=>{i(),ee.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Xs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>h2)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,h2);return UM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nf(n,t){return new JU(n,t)}function ZU(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Nf(e))}function tz(n,t){const e=O0(n,t);let{transitionEnd:i={},transition:s={},...r}=e||{};r={...r,...i};for(const o in r){const a=YU(r[o]);ZU(n,o,a)}}const YT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ez="framerAppearId",QM="data-"+YT(ez);function JM(n){return n.props[QM]}const Dn=n=>!!(n&&n.getVelocity);function nz(n){return!!(Dn(n)&&n.add)}function WE(n,t){const e=n.getValue("willChange");if(nz(e))return e.add(t)}function iz({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function ZM(n,t,{delay:e=0,transitionOverride:i,type:s}={}){var r;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(o=i);const c=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const f in l){const p=n.getValue(f,(r=n.latestValues[f])!==null&&r!==void 0?r:null),m=l[f];if(m===void 0||u&&iz(u,f))continue;const g={delay:e,...DT(o||{},f)};let _=!1;if(window.MotionHandoffAnimation){const v=JM(n);if(v){const w=window.MotionHandoffAnimation(v,f,ee);w!==null&&(g.startTime=w,_=!0)}}WE(n,f),p.start(GT(f,p,m,n.shouldReduceMotion&&Ec.has(f)?{type:!1}:g,n,_));const A=p.animation;A&&c.push(A)}return a&&Promise.all(c).then(()=>{ee.update(()=>{a&&tz(n,a)})}),c}function GE(n,t,e={}){var i;const s=O0(n,t,e.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(r=e.transitionOverride);const o=s?()=>Promise.all(ZM(n,s,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:p}=r;return sz(n,t,u+c,f,p,e)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(e.delay)])}function sz(n,t,e=0,i=0,s=1,r){const o=[],a=(n.variantChildren.size-1)*i,l=s===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(rz).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(GE(c,t,{...r,delay:e+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function rz(n,t){return n.sortNodePosition(t)}function oz(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>GE(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=GE(n,t,e);else{const s=typeof t=="function"?O0(n,t,e.custom):t;i=Promise.all(ZM(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}const az=kT.length;function t4(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?t4(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<az;e++){const i=kT[e],s=n.props[i];(Df(s)||s===!1)&&(t[i]=s)}return t}const lz=[...IT].reverse(),cz=IT.length;function uz(n){return t=>Promise.all(t.map(({animation:e,options:i})=>oz(n,e,i)))}function hz(n){let t=uz(n),e=d2(),i=!0;const s=l=>(c,u)=>{var f;const p=O0(n,u,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:g,..._}=p;c={...c,..._,...g}}return c};function r(l){t=l(n)}function o(l){const{props:c}=n,u=t4(n.parent)||{},f=[],p=new Set;let m={},g=1/0;for(let A=0;A<cz;A++){const v=lz[A],w=e[v],T=c[v]!==void 0?c[v]:u[v],D=Df(T),F=v===l?w.isActive:null;F===!1&&(g=A);let O=T===u[v]&&T!==c[v]&&D;if(O&&i&&n.manuallyAnimateOnMount&&(O=!1),w.protectedKeys={...m},!w.isActive&&F===null||!T&&!w.prevProp||F0(T)||typeof T=="boolean")continue;const P=dz(w.prevProp,T);let S=P||v===l&&w.isActive&&!O&&D||A>g&&D,R=!1;const k=Array.isArray(T)?T:[T];let M=k.reduce(s(v),{});F===!1&&(M={});const{prevResolvedValues:V={}}=w,L={...V,...M},Z=G=>{S=!0,p.has(G)&&(R=!0,p.delete(G)),w.needsAnimating[G]=!0;const z=n.getValue(G);z&&(z.liveStyle=!1)};for(const G in L){const z=M[G],tt=V[G];if(m.hasOwnProperty(G))continue;let it=!1;NE(z)&&NE(tt)?it=!fM(z,tt):it=z!==tt,it?z!=null?Z(G):p.add(G):z!==void 0&&p.has(G)?Z(G):w.protectedKeys[G]=!0}w.prevProp=T,w.prevResolvedValues=M,w.isActive&&(m={...m,...M}),i&&n.blockInitialAnimation&&(S=!1),S&&(!(O&&P)||R)&&f.push(...k.map(G=>({animation:G,options:{type:v}})))}if(p.size){const A={};p.forEach(v=>{const w=n.getBaseTarget(v),T=n.getValue(v);T&&(T.liveStyle=!0),A[v]=w??null}),f.push({animation:A})}let _=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?t(f):Promise.resolve()}function a(l,c){var u;if(e[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),e[l].isActive=c;const f=o(l);for(const p in e)e[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>e,reset:()=>{e=d2(),i=!0}}}function dz(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!fM(t,n):!1}function Oa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d2(){return{animate:Oa(!0),whileInView:Oa(),whileHover:Oa(),whileTap:Oa(),whileDrag:Oa(),whileFocus:Oa(),exit:Oa()}}class xa{constructor(t){this.isMounted=!1,this.node=t}update(){}}class fz extends xa{constructor(t){super(t),t.animationState||(t.animationState=hz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();F0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let pz=0;class mz extends xa{constructor(){super(...arguments),this.id=pz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const gz={animation:{Feature:fz},exit:{Feature:mz}},Qi={x:!1,y:!1};function e4(){return Qi.x||Qi.y}function yz(n,t,e){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let s=document;const r=(i=void 0)!==null&&i!==void 0?i:s.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}function n4(n,t){const e=yz(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function f2(n){return t=>{t.pointerType==="touch"||e4()||n(t)}}function vz(n,t,e={}){const[i,s,r]=n4(n,e),o=f2(a=>{const{target:l}=a,c=t(a);if(!c||!l)return;const u=f2(f=>{c(f),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const QT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Vd=new WeakSet;function p2(n){return t=>{t.key==="Enter"&&n(t)}}function r1(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _z=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=p2(()=>{if(Vd.has(e))return;r1(e,"down");const s=p2(()=>{r1(e,"up")}),r=()=>r1(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)},wz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ez(n){return wz.has(n.tagName)||n.tabIndex!==-1}const i4=(n,t)=>t?n===t?!0:i4(n,t.parentElement):!1;function m2(n){return QT(n)&&!e4()}function Az(n,t,e={}){const[i,s,r]=n4(n,e),o=a=>{const l=a.currentTarget;if(!m2(a)||Vd.has(l))return;Vd.add(l);const c=t(a),u=(m,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!m2(m)||!Vd.has(l))&&(Vd.delete(l),c&&c(m,{success:g}))},f=m=>{u(m,e.useGlobalTarget||i4(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return i.forEach(a=>{Ez(a)||(a.tabIndex=0),(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>_z(c,s),s)}),r}function Tz(n){return n==="x"||n==="y"?Qi[n]?null:(Qi[n]=!0,()=>{Qi[n]=!1}):Qi.x||Qi.y?null:(Qi.x=Qi.y=!0,()=>{Qi.x=Qi.y=!1})}function jm(n){return{point:{x:n.pageX,y:n.pageY}}}const Sz=n=>t=>QT(t)&&n(t,jm(t));function Ff(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function nf(n,t,e,i){return Ff(n,t,Sz(e),i)}const g2=(n,t)=>Math.abs(n-t);function bz(n,t){const e=g2(n.x,t.x),i=g2(n.y,t.y);return Math.sqrt(e**2+i**2)}class s4{constructor(t,e,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=a1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=bz(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=f,{timestamp:_}=cn;this.history.push({...g,timestamp:_});const{onStart:A,onMove:v}=this.handlers;p||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=o1(p,this.transformPagePoint),ee.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=a1(f.type==="pointercancel"?this.lastMoveEventInfo:o1(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,A),g&&g(f,A)},!QT(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.contextWindow=s||window;const o=jm(t),a=o1(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=cn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=e;u&&u(t,a1(a,this.history)),this.removeListeners=Vm(nf(this.contextWindow,"pointermove",this.handlePointerMove),nf(this.contextWindow,"pointerup",this.handlePointerUp),nf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),da(this.updatePoint)}}function o1(n,t){return t?{point:t(n.point)}:n}function y2(n,t){return{x:n.x-t.x,y:n.y-t.y}}function a1({point:n},t){return{point:n,delta:y2(n,r4(t)),offset:y2(n,Cz(t)),velocity:xz(t,.1)}}function Cz(n){return n[0]}function r4(n){return n[n.length-1]}function xz(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=r4(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>Kr(t)));)e--;if(!i)return{x:0,y:0};const r=Xr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function eu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const o4=1e-4,Pz=1-o4,Rz=1+o4,a4=.01,Iz=0-a4,kz=0+a4;function Ci(n){return n.max-n.min}function Dz(n,t,e){return Math.abs(n-t)<=e}function v2(n,t,e,i=.5){n.origin=i,n.originPoint=le(t.min,t.max,n.origin),n.scale=Ci(e)/Ci(t),n.translate=le(e.min,e.max,n.origin)-n.originPoint,(n.scale>=Pz&&n.scale<=Rz||isNaN(n.scale))&&(n.scale=1),(n.translate>=Iz&&n.translate<=kz||isNaN(n.translate))&&(n.translate=0)}function sf(n,t,e,i){v2(n.x,t.x,e.x,i?i.originX:void 0),v2(n.y,t.y,e.y,i?i.originY:void 0)}function _2(n,t,e){n.min=e.min+t.min,n.max=n.min+Ci(t)}function Lz(n,t,e){_2(n.x,t.x,e.x),_2(n.y,t.y,e.y)}function w2(n,t,e){n.min=t.min-e.min,n.max=n.min+Ci(t)}function rf(n,t,e){w2(n.x,t.x,e.x),w2(n.y,t.y,e.y)}function Mz(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?le(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?le(e,n,i.max):Math.min(n,e)),n}function E2(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function Nz(n,{top:t,left:e,bottom:i,right:s}){return{x:E2(n.x,e,s),y:E2(n.y,t,i)}}function A2(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function Fz(n,t){return{x:A2(n.x,t.x),y:A2(n.y,t.y)}}function Oz(n,t){let e=.5;const i=Ci(n),s=Ci(t);return s>i?e=Th(t.min,t.max-i,n.min):i>s&&(e=Th(n.min,n.max-s,t.min)),no(0,1,e)}function Vz(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const qE=.35;function jz(n=qE){return n===!1?n=0:n===!0&&(n=qE),{x:T2(n,"left","right"),y:T2(n,"top","bottom")}}function T2(n,t,e){return{min:S2(n,t),max:S2(n,e)}}function S2(n,t){return typeof n=="number"?n:n[t]||0}const b2=()=>({translate:0,scale:1,origin:0,originPoint:0}),nu=()=>({x:b2(),y:b2()}),C2=()=>({min:0,max:0}),Ee=()=>({x:C2(),y:C2()});function Di(n){return[n("x"),n("y")]}function l4({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function Bz({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function Uz(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function l1(n){return n===void 0||n===1}function KE({scale:n,scaleX:t,scaleY:e}){return!l1(n)||!l1(t)||!l1(e)}function $a(n){return KE(n)||c4(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function c4(n){return x2(n.x)||x2(n.y)}function x2(n){return n&&n!=="0%"}function Ev(n,t,e){const i=n-e,s=t*i;return e+s}function P2(n,t,e,i,s){return s!==void 0&&(n=Ev(n,s,i)),Ev(n,e,i)+t}function XE(n,t=0,e=1,i,s){n.min=P2(n.min,t,e,i,s),n.max=P2(n.max,t,e,i,s)}function u4(n,{x:t,y:e}){XE(n.x,t.translate,t.scale,t.originPoint),XE(n.y,e.translate,e.scale,e.originPoint)}const R2=.999999999999,I2=1.0000000000001;function zz(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=e[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&su(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,u4(n,o)),i&&$a(r.latestValues)&&su(n,r.latestValues))}t.x<I2&&t.x>R2&&(t.x=1),t.y<I2&&t.y>R2&&(t.y=1)}function iu(n,t){n.min=n.min+t,n.max=n.max+t}function k2(n,t,e,i,s=.5){const r=le(n.min,n.max,s);XE(n,t,e,r,i)}function su(n,t){k2(n.x,t.x,t.scaleX,t.scale,t.originX),k2(n.y,t.y,t.scaleY,t.scale,t.originY)}function h4(n,t){return l4(Uz(n.getBoundingClientRect(),t))}function $z(n,t,e){const i=h4(n,e),{scroll:s}=t;return s&&(iu(i.x,s.offset.x),iu(i.y,s.offset.y)),i}const d4=({current:n})=>n?n.ownerDocument.defaultView:null,Hz=new WeakMap;class Wz{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ee(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(jm(u).point)},r=(u,f)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Tz(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Di(A=>{let v=this.getAxisMotionValue(A).get()||0;if(Ks.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[A];T&&(v=Ci(T)*(parseFloat(v)/100))}}this.originPoint[A]=v}),g&&ee.postRender(()=>g(u,f)),WE(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:_}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:A}=f;if(m&&this.currentDirection===null){this.currentDirection=Gz(A),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),_&&_(u,f)},a=(u,f)=>this.stop(u,f),l=()=>Di(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new s4(t,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:d4(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&ee.postRender(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!Ng(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=Mz(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&eu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Nz(s.layoutBox,e):this.constraints=!1,this.elastic=jz(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Di(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Vz(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!eu(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=$z(i,s.root,this.visualElement.getTransformPagePoint());let o=Fz(s.layout.layoutBox,r);if(e){const a=e(Bz(o));this.hasMutatedConstraints=!!a,a&&(o=l4(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Di(u=>{if(!Ng(u,e,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:i?t[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...r,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return WE(this.visualElement,t),i.start(GT(t,i,0,e,this.visualElement,!1))}stopAnimation(){Di(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Di(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Di(e=>{const{drag:i}=this.getProps();if(!Ng(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[e];r.set(t[e]-le(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!eu(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Di(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Oz({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Di(o=>{if(!Ng(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(le(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Hz.set(this.visualElement,this);const t=this.visualElement.current,e=nf(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();eu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ee.read(i);const o=Ff(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Di(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=qE,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Ng(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function Gz(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class qz extends xa{constructor(t){super(t),this.removeGroupControls=Si,this.removeListeners=Si,this.controls=new Wz(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Si}unmount(){this.removeGroupControls(),this.removeListeners()}}const D2=n=>(t,e)=>{n&&ee.postRender(()=>n(t,e))};class Kz extends xa{constructor(){super(...arguments),this.removePointerDownListener=Si}onPointerDown(t){this.session=new s4(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:d4(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:D2(t),onStart:D2(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&ee.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=nf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const JT=j.createContext(null);function Xz(){const n=j.useContext(JT);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:e,register:i}=n,s=j.useId();j.useEffect(()=>i(s),[]);const r=j.useCallback(()=>e&&e(s),[s,e]);return!t&&e?[!1,r]:[!0]}const f4=j.createContext({}),p4=j.createContext({}),Cy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function L2(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const md={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(ot.test(n))n=parseFloat(n);else return n;const e=L2(n,t.target.x),i=L2(n,t.target.y);return`${e}% ${i}%`}},Yz={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=fa.parse(n);if(s.length>5)return i;const r=fa.createTransformer(n),o=typeof s[0]!="number"?1:0,a=e.x.scale*t.x,l=e.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=le(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),r(s)}},Av={};function Qz(n){Object.assign(Av,n)}const{schedule:ZT,cancel:cQ}=pM(queueMicrotask,!1);class Jz extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;Qz(Zz),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Cy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||t.layoutDependency!==e||e===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||ee.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ZT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function m4(n){const[t,e]=Xz(),i=j.useContext(f4);return N.jsx(Jz,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(p4),isPresent:t,safeToRemove:e})}const Zz={borderRadius:{...md,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:md,borderTopRightRadius:md,borderBottomLeftRadius:md,borderBottomRightRadius:md,boxShadow:Yz},g4=["TopLeft","TopRight","BottomLeft","BottomRight"],t$=g4.length,M2=n=>typeof n=="string"?parseFloat(n):n,N2=n=>typeof n=="number"||ot.test(n);function e$(n,t,e,i,s,r){s?(n.opacity=le(0,e.opacity!==void 0?e.opacity:1,n$(i)),n.opacityExit=le(t.opacity!==void 0?t.opacity:1,0,i$(i))):r&&(n.opacity=le(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,i));for(let o=0;o<t$;o++){const a=`border${g4[o]}Radius`;let l=F2(t,a),c=F2(e,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||N2(l)===N2(c)?(n[a]=Math.max(le(M2(l),M2(c),i),0),(Ks.test(c)||Ks.test(l))&&(n[a]+="%")):n[a]=c}(t.rotate||e.rotate)&&(n.rotate=le(t.rotate||0,e.rotate||0,i))}function F2(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const n$=y4(0,.5,EM),i$=y4(.5,.95,Si);function y4(n,t,e){return i=>i<n?0:i>t?1:e(Th(n,t,i))}function O2(n,t){n.min=t.min,n.max=t.max}function ki(n,t){O2(n.x,t.x),O2(n.y,t.y)}function V2(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function j2(n,t,e,i,s){return n-=t,n=Ev(n,1/e,i),s!==void 0&&(n=Ev(n,1/s,i)),n}function s$(n,t=0,e=1,i=.5,s,r=n,o=n){if(Ks.test(t)&&(t=parseFloat(t),t=le(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=le(r.min,r.max,i);n===r&&(a-=t),n.min=j2(n.min,t,e,a,s),n.max=j2(n.max,t,e,a,s)}function B2(n,t,[e,i,s],r,o){s$(n,t[e],t[i],t[s],t.scale,r,o)}const r$=["x","scaleX","originX"],o$=["y","scaleY","originY"];function U2(n,t,e,i){B2(n.x,t,r$,e?e.x:void 0,i?i.x:void 0),B2(n.y,t,o$,e?e.y:void 0,i?i.y:void 0)}function z2(n){return n.translate===0&&n.scale===1}function v4(n){return z2(n.x)&&z2(n.y)}function $2(n,t){return n.min===t.min&&n.max===t.max}function a$(n,t){return $2(n.x,t.x)&&$2(n.y,t.y)}function H2(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function _4(n,t){return H2(n.x,t.x)&&H2(n.y,t.y)}function W2(n){return Ci(n.x)/Ci(n.y)}function G2(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class l${constructor(){this.members=[]}add(t){qT(this.members,t),t.scheduleRender()}remove(t){if(KT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function c$(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:g}=e;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=n.x.scale*t.x,l=n.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const u$=(n,t)=>n.depth-t.depth;class h${constructor(){this.children=[],this.isDirty=!1}add(t){qT(this.children,t),this.isDirty=!0}remove(t){KT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(u$),this.isDirty=!1,this.children.forEach(t)}}function xy(n){const t=Dn(n)?n.get():n;return XU(t)?t.toValue():t}function d$(n,t){const e=Xs.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(da(i),n(r-t))};return ee.read(i,!0),()=>da(i)}function f$(n){return n instanceof SVGElement&&n.tagName!=="svg"}function p$(n,t,e){const i=Dn(n)?n:Nf(n);return i.start(GT("",i,t,e)),i.animation}const Ha={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},jd=typeof window<"u"&&window.MotionDebug!==void 0,c1=["","X","Y","Z"],m$={visibility:"hidden"},q2=1e3;let g$=0;function u1(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function w4(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=JM(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",ee,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&w4(i)}function E4({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=g$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jd&&(Ha.totalNodes=Ha.resolvedTargetDeltas=Ha.recalculatedProjection=0),this.nodes.forEach(_$),this.nodes.forEach(S$),this.nodes.forEach(b$),this.nodes.forEach(w$),jd&&window.MotionDebug.record(Ha)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new h$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new XT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=f$(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=d$(p,250),Cy.hasAnimatedSinceResize&&(Cy.hasAnimatedSinceResize=!1,this.nodes.forEach(X2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||I$,{onLayoutAnimationStart:A,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!_4(this.targetLayout,g)||m,T=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const D={...DT(_,"layout"),onPlay:A,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D)}else p||X2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(C$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(K2);return}this.isUpdating||this.nodes.forEach(A$),this.isUpdating=!1,this.nodes.forEach(T$),this.nodes.forEach(y$),this.nodes.forEach(v$),this.clearAllSnapshots();const a=Xs.now();cn.delta=no(0,1e3/60,a-cn.timestamp),cn.timestamp=a,cn.isProcessing=!0,t1.update.process(cn),t1.preRender.process(cn),t1.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ZT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(E$),this.sharedNodes.forEach(x$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ee(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!v4(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||$a(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),k$(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ee();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(D$))){const{scroll:u}=this.root;u&&(iu(l.x,u.offset.x),iu(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Ee();if(ki(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:p}=u;u!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&ki(l,o),iu(l.x,f.offset.x),iu(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Ee();ki(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&su(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),$a(u.latestValues)&&su(l,u.latestValues)}return $a(this.latestValues)&&su(l,this.latestValues),l}removeTransform(o){const a=Ee();ki(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!$a(c.latestValues))continue;KE(c.latestValues)&&c.updateSnapshot();const u=Ee(),f=c.measurePageBox();ki(u,f),U2(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return $a(this.latestValues)&&U2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),rf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ee(),this.targetWithTransforms=Ee()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Lz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ki(this.target,this.layout.layoutBox),u4(this.target,this.targetDelta)):ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),rf(this.relativeTargetOrigin,this.target,m.target),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jd&&Ha.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||KE(this.parent.latestValues)||c4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ki(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;zz(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ee());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V2(this.prevProjectionDelta.x,this.projectionDelta.x),V2(this.prevProjectionDelta.y,this.projectionDelta.y)),sf(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!G2(this.projectionDelta.x,this.prevProjectionDelta.x)||!G2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),jd&&Ha.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nu(),this.projectionDelta=nu(),this.projectionDeltaWithTransform=nu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=nu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ee(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,_=m!==g,A=this.getStack(),v=!A||A.members.length<=1,w=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(R$));this.animationProgress=0;let T;this.mixTargetDelta=D=>{const F=D/1e3;Y2(f.x,o.x,F),Y2(f.y,o.y,F),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rf(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P$(this.relativeTarget,this.relativeTargetOrigin,p,F),T&&a$(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ee()),ki(T,this.relativeTarget)),_&&(this.animationValues=u,e$(u,c,this.latestValues,F,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ee.update(()=>{Cy.hasAnimatedSinceResize=!0,this.currentAnimation=p$(0,q2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(q2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&A4(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ee();const f=Ci(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Ci(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ki(a,l),su(a,u),sf(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new l$),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&u1("z",o,c,this.animationValues);for(let u=0;u<c1.length;u++)u1(`rotate${c1[u]}`,o,c,this.animationValues),u1(`skew${c1[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return m$;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=xy(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=xy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!$a(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=c$(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Av){if(p[_]===void 0)continue;const{correct:A,applyTo:v}=Av[_],w=c.transform==="none"?p[_]:A(p[_],f);if(v){const T=v.length;for(let D=0;D<T;D++)c[v[D]]=w}else c[_]=w}return this.options.layoutId&&(c.pointerEvents=f===this?xy(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(K2),this.root.sharedNodes.clear()}}}function y$(n){n.updateLayout()}function v$(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=e.source!==n.layout.source;r==="size"?Di(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=Ci(p);p.min=i[f].min,p.max=p.min+m}):A4(r,e.layoutBox,i)&&Di(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=Ci(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=nu();sf(a,i,e.layoutBox);const l=nu();o?sf(l,n.applyTransform(s,!0),e.measuredBox):sf(l,i,e.layoutBox);const c=!v4(a);let u=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const g=Ee();rf(g,e.layoutBox,p.layoutBox);const _=Ee();rf(_,i,m.layoutBox),_4(g,_)||(u=!0),f.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=g,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function _$(n){jd&&Ha.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function w$(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function E$(n){n.clearSnapshot()}function K2(n){n.clearMeasurements()}function A$(n){n.isLayoutDirty=!1}function T$(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function X2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function S$(n){n.resolveTargetDelta()}function b$(n){n.calcProjection()}function C$(n){n.resetSkewAndRotation()}function x$(n){n.removeLeadSnapshot()}function Y2(n,t,e){n.translate=le(t.translate,0,e),n.scale=le(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function Q2(n,t,e,i){n.min=le(t.min,e.min,i),n.max=le(t.max,e.max,i)}function P$(n,t,e,i){Q2(n.x,t.x,e.x,i),Q2(n.y,t.y,e.y,i)}function R$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const I$={duration:.45,ease:[.4,0,.1,1]},J2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Z2=J2("applewebkit/")&&!J2("chrome/")?Math.round:Si;function tP(n){n.min=Z2(n.min),n.max=Z2(n.max)}function k$(n){tP(n.x),tP(n.y)}function A4(n,t,e){return n==="position"||n==="preserve-aspect"&&!Dz(W2(t),W2(e),.2)}function D$(n){var t;return n!==n.root&&((t=n.scroll)===null||t===void 0?void 0:t.wasRoot)}const L$=E4({attachResizeListener:(n,t)=>Ff(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h1={current:void 0},T4=E4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!h1.current){const n=new L$({});n.mount(window),n.setOptions({layoutScroll:!0}),h1.current=n}return h1.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),M$={pan:{Feature:Kz},drag:{Feature:qz,ProjectionNode:T4,MeasureLayout:m4}};function eP(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=i[s];r&&ee.postRender(()=>r(t,jm(t)))}class N$ extends xa{mount(){const{current:t}=this.node;t&&(this.unmount=vz(t,e=>(eP(this.node,e,"Start"),i=>eP(this.node,i,"End"))))}unmount(){}}class F$ extends xa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vm(Ff(this.node.current,"focus",()=>this.onFocus()),Ff(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nP(n,t,e){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=i[s];r&&ee.postRender(()=>r(t,jm(t)))}class O$ extends xa{mount(){const{current:t}=this.node;t&&(this.unmount=Az(t,e=>(nP(this.node,e,"Start"),(i,{success:s})=>nP(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const YE=new WeakMap,d1=new WeakMap,V$=n=>{const t=YE.get(n.target);t&&t(n)},j$=n=>{n.forEach(V$)};function B$({root:n,...t}){const e=n||document;d1.has(e)||d1.set(e,{});const i=d1.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(j$,{root:n,...t})),i[s]}function U$(n,t,e){const i=B$(t);return YE.set(n,e),i.observe(n),()=>{YE.delete(n),i.unobserve(n)}}const z$={some:0,all:1};class $$ extends xa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:z$[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return U$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(H$(t,e))&&this.startObserver()}unmount(){}}function H$({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const W$={inView:{Feature:$$},tap:{Feature:O$},focus:{Feature:F$},hover:{Feature:N$}},G$={layout:{ProjectionNode:T4,MeasureLayout:m4}},S4=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),j0=j.createContext({}),tS=typeof window<"u",q$=tS?j.useLayoutEffect:j.useEffect,b4=j.createContext({strict:!1});function K$(n,t,e,i,s){var r,o;const{visualElement:a}=j.useContext(j0),l=j.useContext(b4),c=j.useContext(JT),u=j.useContext(S4).reducedMotion,f=j.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=f.current,m=j.useContext(p4);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&X$(f.current,e,s,m);const g=j.useRef(!1);j.useInsertionEffect(()=>{p&&g.current&&p.update(e,c)});const _=e[QM],A=j.useRef(!!_&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return q$(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),ZT.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,_)}),A.current=!1))}),p}function X$(n,t,e,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:C4(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&eu(a),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function C4(n){if(n)return n.options.allowProjection!==!1?n.projection:C4(n.parent)}function Y$(n,t,e){return j.useCallback(i=>{i&&n.mount&&n.mount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):eu(e)&&(e.current=i))},[t])}function B0(n){return F0(n.animate)||kT.some(t=>Df(n[t]))}function x4(n){return!!(B0(n)||n.variants)}function Q$(n,t){if(B0(n)){const{initial:e,animate:i}=n;return{initial:e===!1||Df(e)?e:void 0,animate:Df(i)?i:void 0}}return n.inherit!==!1?t:{}}function J$(n){const{initial:t,animate:e}=Q$(n,j.useContext(j0));return j.useMemo(()=>({initial:t,animate:e}),[iP(t),iP(e)])}function iP(n){return Array.isArray(n)?n.join(" "):n}const sP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sh={};for(const n in sP)Sh[n]={isEnabled:t=>sP[n].some(e=>!!t[e])};function Z$(n){for(const t in n)Sh[t]={...Sh[t],...n[t]}}const tH=Symbol.for("motionComponentSymbol");function eH({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:s}){n&&Z$(n);function r(a,l){let c;const u={...j.useContext(S4),...a,layoutId:nH(a)},{isStatic:f}=u,p=J$(a),m=i(a,f);if(!f&&tS){iH();const g=sH(u);c=g.MeasureLayout,p.visualElement=K$(s,m,u,t,g.ProjectionNode)}return N.jsxs(j0.Provider,{value:p,children:[c&&p.visualElement?N.jsx(c,{visualElement:p.visualElement,...u}):null,e(s,a,Y$(m,p.visualElement,l),m,f,p.visualElement)]})}const o=j.forwardRef(r);return o[tH]=s,o}function nH({layoutId:n}){const t=j.useContext(f4).id;return t&&n!==void 0?t+"-"+n:n}function iH(n,t){j.useContext(b4).strict}function sH(n){const{drag:t,layout:e}=Sh;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const rH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function eS(n){return typeof n!="string"||n.includes("-")?!1:!!(rH.indexOf(n)>-1||/[A-Z]/u.test(n))}function P4(n,{style:t,vars:e},i,s){Object.assign(n.style,t,s&&s.getProjectionStyles(i));for(const r in e)n.style.setProperty(r,e[r])}const R4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I4(n,t,e,i){P4(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(R4.has(s)?s:YT(s),t.attrs[s])}function k4(n,{layout:t,layoutId:e}){return Ec.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!Av[n]||n==="opacity")}function nS(n,t,e){var i;const{style:s}=n,r={};for(const o in s)(Dn(s[o])||t.style&&Dn(t.style[o])||k4(o,n)||((i=e==null?void 0:e.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[o]=s[o]);return r}function D4(n,t,e){const i=nS(n,t,e);for(const s in n)if(Dn(n[s])||Dn(t[s])){const r=Nm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}function oH(n){const t=j.useRef(null);return t.current===null&&(t.current=n()),t.current}function aH({scrapeMotionValuesFromProps:n,createRenderState:t,onMount:e},i,s,r){const o={latestValues:lH(i,s,r,n),renderState:t()};return e&&(o.mount=a=>e(i,a,o)),o}const L4=n=>(t,e)=>{const i=j.useContext(j0),s=j.useContext(JT),r=()=>aH(n,t,i,s);return e?r():oH(r)};function lH(n,t,e,i){const s={},r=i(n,{});for(const p in r)s[p]=xy(r[p]);let{initial:o,animate:a}=n;const l=B0(n),c=x4(n);t&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=e?e.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!F0(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const g=RT(n,p[m]);if(g){const{transitionEnd:_,transition:A,...v}=g;for(const w in v){let T=v[w];if(Array.isArray(T)){const D=u?T.length-1:0;T=T[D]}T!==null&&(s[w]=T)}for(const w in _)s[w]=_[w]}}}return s}const iS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),M4=()=>({...iS(),attrs:{}}),N4=(n,t)=>t&&typeof n=="number"?t.transform(n):n,cH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uH=Nm.length;function hH(n,t,e){let i="",s=!0;for(let r=0;r<uH;r++){const o=Nm[r],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||e){const c=N4(a,jT[o]);if(!l){s=!1;const u=cH[o]||o;i+=`${u}(${c}) `}e&&(t[o]=c)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function sS(n,t,e){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,a=!1;for(const l in t){const c=t[l];if(Ec.has(l)){o=!0;continue}else if(CM(l)){s[l]=c;continue}else{const u=N4(c,jT[l]);l.startsWith("origin")?(a=!0,r[l]=u):i[l]=u}}if(t.transform||(o||e?i.transform=hH(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;i.transformOrigin=`${l} ${c} ${u}`}}function rP(n,t,e){return typeof n=="string"?n:ot.transform(t+e*n)}function dH(n,t,e){const i=rP(t,n.x,n.width),s=rP(e,n.y,n.height);return`${i} ${s}`}const fH={offset:"stroke-dashoffset",array:"stroke-dasharray"},pH={offset:"strokeDashoffset",array:"strokeDasharray"};function mH(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?fH:pH;n[r.offset]=ot.transform(-i);const o=ot.transform(t),a=ot.transform(e);n[r.array]=`${o} ${a}`}function rS(n,{attrX:t,attrY:e,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(sS(n,c,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:g}=n;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(s!==void 0||r!==void 0||m.transform)&&(m.transformOrigin=dH(g,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),i!==void 0&&(p.scale=i),o!==void 0&&mH(p,o,a,l,!1)}const oS=n=>typeof n=="string"&&n.toLowerCase()==="svg",gH={useVisualState:L4({scrapeMotionValuesFromProps:D4,createRenderState:M4,onMount:(n,t,{renderState:e,latestValues:i})=>{ee.read(()=>{try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}),ee.render(()=>{rS(e,i,oS(t.tagName),n.transformTemplate),I4(t,e)})}})},yH={useVisualState:L4({scrapeMotionValuesFromProps:nS,createRenderState:iS})};function F4(n,t,e){for(const i in t)!Dn(t[i])&&!k4(i,e)&&(n[i]=t[i])}function vH({transformTemplate:n},t){return j.useMemo(()=>{const e=iS();return sS(e,t,n),Object.assign({},e.vars,e.style)},[t])}function _H(n,t){const e=n.style||{},i={};return F4(i,e,n),Object.assign(i,vH(n,t)),i}function wH(n,t){const e={},i=_H(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const EH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||EH.has(n)}let O4=n=>!Tv(n);function AH(n){n&&(O4=t=>t.startsWith("on")?!Tv(t):n(t))}try{AH(require("@emotion/is-prop-valid").default)}catch{}function TH(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(O4(s)||e===!0&&Tv(s)||!t&&!Tv(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function SH(n,t,e,i){const s=j.useMemo(()=>{const r=M4();return rS(r,t,oS(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};F4(r,n.style,n),s.style={...r,...s.style}}return s}function bH(n=!1){return(e,i,s,{latestValues:r},o)=>{const l=(eS(e)?SH:wH)(i,r,o,e),c=TH(i,typeof e=="string",n),u=e!==j.Fragment?{...c,...l,ref:s}:{},{children:f}=i,p=j.useMemo(()=>Dn(f)?f.get():f,[f]);return j.createElement(e,{...u,children:p})}}function CH(n,t){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...eS(i)?gH:yH,preloadedFeatures:n,useRender:bH(s),createVisualElement:t,Component:i};return eH(o)}}const QE={current:null},V4={current:!1};function xH(){if(V4.current=!0,!!tS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>QE.current=n.matches;n.addListener(t),t()}else QE.current=!1}function PH(n,t,e){for(const i in t){const s=t[i],r=e[i];if(Dn(s))n.addValue(i,s);else if(Dn(r))n.addValue(i,Nf(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,Nf(o!==void 0?o:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const oP=new WeakMap,RH=[...RM,Cn,fa],IH=n=>RH.find(PM(n)),aP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kH{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Xs.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ee.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=B0(e),this.isVariantNode=x4(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(e,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&Dn(m)&&m.set(l[p],!1)}}mount(t){this.current=t,oP.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),V4.current||xH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oP.delete(this.current),this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Ec.has(t),s=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ee.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Sh){const e=Sh[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ee()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<aP.length;i++){const s=aP[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=PH(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Nf(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){var i;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(i=this.getBaseTargetFromProps(this.props,t))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(SM(s)||TM(s))?s=parseFloat(s):!IH(s)&&fa.test(e)&&(s=OM(t,e)),this.setBaseTarget(t,Dn(s)?s.get():s)),Dn(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const o=RT(this.props,i,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);o&&(s=o[t])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Dn(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new XT),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class j4 extends kH{constructor(){super(...arguments),this.KeyframeResolver=VM}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Dn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function DH(n){return window.getComputedStyle(n)}class LH extends j4{constructor(){super(...arguments),this.type="html",this.renderInstance=P4}readValueFromInstance(t,e){if(Ec.has(e)){const i=BT(e);return i&&i.default||0}else{const i=DH(t),s=(CM(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return h4(t,e)}build(t,e,i){sS(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return nS(t,e,i)}}class MH extends j4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ee}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Ec.has(e)){const i=BT(e);return i&&i.default||0}return e=R4.has(e)?e:YT(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return D4(t,e,i)}build(t,e,i){rS(t,e,this.isSVGTag,i.transformTemplate)}renderInstance(t,e,i,s){I4(t,e,i,s)}mount(t){this.isSVGTag=oS(t.tagName),super.mount(t)}}const NH=(n,t)=>eS(n)?new MH(t):new LH(t,{allowProjection:n!==j.Fragment}),FH=CH({...gz,...W$,...M$,...G$},NH),Ws=pB(FH);function OH(n){return oi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M180.41 203.01c-.72 22.65 10.6 32.68 10.88 39.05a8.164 8.164 0 0 1-4.1 6.27l-12.8 8.96a10.66 10.66 0 0 1-5.63 1.92c-.43-.02-8.19 1.83-20.48-25.61a78.608 78.608 0 0 1-62.61 29.45c-16.28.89-60.4-9.24-58.13-56.21-1.59-38.28 34.06-62.06 70.93-60.05 7.1.02 21.6.37 46.99 6.27v-15.62c2.69-26.46-14.7-46.99-44.81-43.91-2.4.01-19.4-.5-45.84 10.11-7.36 3.38-8.3 2.82-10.75 2.82-7.41 0-4.36-21.48-2.94-24.2 5.21-6.4 35.86-18.35 65.94-18.18a76.857 76.857 0 0 1 55.69 17.28 70.285 70.285 0 0 1 17.67 52.36l-.01 69.29zM93.99 235.4c32.43-.47 46.16-19.97 49.29-30.47 2.46-10.05 2.05-16.41 2.05-27.4-9.67-2.32-23.59-4.85-39.56-4.87-15.15-1.14-42.82 5.63-41.74 32.26-1.24 16.79 11.12 31.4 29.96 30.48zm170.92 23.05c-7.86.72-11.52-4.86-12.68-10.37l-49.8-164.65c-.97-2.78-1.61-5.65-1.92-8.58a4.61 4.61 0 0 1 3.86-5.25c.24-.04-2.13 0 22.25 0 8.78-.88 11.64 6.03 12.55 10.37l35.72 140.83 33.16-140.83c.53-3.22 2.94-11.07 12.8-10.24h17.16c2.17-.18 11.11-.5 12.68 10.37l33.42 142.63L420.98 80.1c.48-2.18 2.72-11.37 12.68-10.37h19.72c.85-.13 6.15-.81 5.25 8.58-.43 1.85 3.41-10.66-52.75 169.9-1.15 5.51-4.82 11.09-12.68 10.37h-18.69c-10.94 1.15-12.51-9.66-12.68-10.75L328.67 110.7l-32.78 136.99c-.16 1.09-1.73 11.9-12.68 10.75h-18.3zm273.48 5.63c-5.88.01-33.92-.3-57.36-12.29a12.802 12.802 0 0 1-7.81-11.91v-10.75c0-8.45 6.2-6.9 8.83-5.89 10.04 4.06 16.48 7.14 28.81 9.6 36.65 7.53 52.77-2.3 56.72-4.48 13.15-7.81 14.19-25.68 5.25-34.95-10.48-8.79-15.48-9.12-53.13-21-4.64-1.29-43.7-13.61-43.79-52.36-.61-28.24 25.05-56.18 69.52-55.95 12.67-.01 46.43 4.13 55.57 15.62 1.35 2.09 2.02 4.55 1.92 7.04v10.11c0 4.44-1.62 6.66-4.87 6.66-7.71-.86-21.39-11.17-49.16-10.75-6.89-.36-39.89.91-38.41 24.97-.43 18.96 26.61 26.07 29.7 26.89 36.46 10.97 48.65 12.79 63.12 29.58 17.14 22.25 7.9 48.3 4.35 55.44-19.08 37.49-68.42 34.44-69.26 34.42zm40.2 104.86c-70.03 51.72-171.69 79.25-258.49 79.25A469.127 469.127 0 0 1 2.83 327.46c-6.53-5.89-.77-13.96 7.17-9.47a637.37 637.37 0 0 0 316.88 84.12 630.22 630.22 0 0 0 241.59-49.55c11.78-5 21.77 7.8 10.12 16.38zm29.19-33.29c-8.96-11.52-59.28-5.38-81.81-2.69-6.79.77-7.94-5.12-1.79-9.47 40.07-28.17 105.88-20.1 113.44-10.63 7.55 9.47-2.05 75.41-39.56 106.91-5.76 4.87-11.27 2.3-8.71-4.1 8.44-21.25 27.39-68.49 18.43-80.02z"},child:[]}]})(n)}function B4(n){return oi({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function U4(n){return oi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function VH(n){return oi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 104.5c171.4 0 303.2 72.2 303.2 151.5S491.3 407.5 320 407.5c-171.4 0-303.2-72.2-303.2-151.5S148.7 104.5 320 104.5m0-16.8C143.3 87.7 0 163 0 256s143.3 168.3 320 168.3S640 349 640 256 496.7 87.7 320 87.7zM218.2 242.5c-7.9 40.5-35.8 36.3-70.1 36.3l13.7-70.6c38 0 63.8-4.1 56.4 34.3zM97.4 350.3h36.7l8.7-44.8c41.1 0 66.6 3 90.2-19.1 26.1-24 32.9-66.7 14.3-88.1-9.7-11.2-25.3-16.7-46.5-16.7h-70.7L97.4 350.3zm185.7-213.6h36.5l-8.7 44.8c31.5 0 60.7-2.3 74.8 10.7 14.8 13.6 7.7 31-8.3 113.1h-37c15.4-79.4 18.3-86 12.7-92-5.4-5.8-17.7-4.6-47.4-4.6l-18.8 96.6h-36.5l32.7-168.6zM505 242.5c-8 41.1-36.7 36.3-70.1 36.3l13.7-70.6c38.2 0 63.8-4.1 56.4 34.3zM384.2 350.3H421l8.7-44.8c43.2 0 67.1 2.5 90.2-19.1 26.1-24 32.9-66.7 14.3-88.1-9.7-11.2-25.3-16.7-46.5-16.7H417l-32.8 168.7z"},child:[]}]})(n)}function jH(n){return oi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"},child:[]}]})(n)}function JE(n){return oi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"},child:[]}]})(n)}function BH(n){return oi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(n)}function UH(n){return oi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(n)}function z4(n){return oi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function zH(n){return oi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(n)}function $H(n){return oi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(n)}function lP(){const n=new Date().getFullYear(),t=[{name:"GitHub",icon:N.jsx(B4,{size:20}),url:"https://github.com/masonym",color:"#333"},{name:"LinkedIn",icon:N.jsx(U4,{size:20}),url:"https://www.linkedin.com/in/mason-leitch-78b90a206/",color:"#0077B5"},{name:"Email",icon:N.jsx(z4,{size:20}),url:"mailto:nosamleitch@gmail.com",color:"#EA4335"}],e=[{name:"Projects",href:"projects"},{name:"Skills",href:"skills"},{name:"Contact",href:"contact"}],i=s=>{const r=document.getElementById(s);r&&r.scrollIntoView({behavior:"smooth"})};return N.jsxs("footer",{className:me.footer,children:[N.jsxs("div",{className:me.footerContent,children:[N.jsxs("div",{className:me.footerSection,children:[N.jsx("h3",{className:me.footerTitle,children:"Mason Leitch"}),N.jsx("p",{className:me.footerDescription,children:"Full Stack Developer passionate about creating innovative web solutions"}),N.jsx("div",{className:me.socialLinks,children:t.map(s=>N.jsx(Ws.a,{href:s.url,className:me.socialLink,whileHover:{scale:1.1,color:s.color},target:"_blank",rel:"noopener noreferrer",title:s.name,children:s.icon},s.name))})]}),N.jsxs("div",{className:me.footerSection,children:[N.jsx("h3",{className:me.footerTitle,children:"Quick Links"}),N.jsx("ul",{className:me.quickLinks,children:e.map(s=>N.jsx("li",{children:N.jsx("button",{onClick:()=>i(s.href),className:me.quickLink,children:s.name})},s.name))})]}),N.jsxs("div",{className:me.footerSection,children:[N.jsx("h3",{className:me.footerTitle,children:"Tech Stack"}),N.jsxs("div",{className:me.techStack,children:[N.jsxs("span",{className:me.techItem,children:[N.jsx(JE,{})," React"]}),N.jsxs("span",{className:me.techItem,children:[N.jsx(BH,{})," JavaScript"]}),N.jsxs("span",{className:me.techItem,children:[N.jsx(zH,{})," Full Stack"]})]})]})]}),N.jsxs("div",{className:me.footerBottom,children:[N.jsx("div",{className:me.footerLine}),N.jsxs("div",{className:me.footerCopyright,children:[N.jsxs("p",{children:[" ",n," Mason Leitch. All rights reserved."]}),N.jsxs("p",{className:me.builtWith,children:["Built with ",N.jsx(JE,{className:me.reactIcon})," React"]})]})]})]})}const HH="_contactSection_nz25u_1",WH="_contactContent_nz25u_10",GH="_contactHeader_nz25u_15",qH="_title_nz25u_20",KH="_subtitle_nz25u_40",XH="_contactCards_nz25u_48",YH="_contactCard_nz25u_48",QH="_emailContainer_nz25u_77",JH="_emailButton_nz25u_81",ZH="_copyHint_nz25u_103",tW="_socialLinks_nz25u_121",eW="_socialLink_nz25u_121",nW="_contactFooter_nz25u_144",Gn={contactSection:HH,contactContent:WH,contactHeader:GH,title:qH,subtitle:KH,contactCards:XH,contactCard:YH,emailContainer:QH,emailButton:JH,copyHint:ZH,socialLinks:tW,socialLink:eW,contactFooter:nW};function iW(){const[n,t]=j.useState(!1),e="nosamleitch@gmail.com",i=()=>{navigator.clipboard.writeText(e),t(!0),setTimeout(()=>t(!1),2e3)},s=[{name:"GitHub",icon:N.jsx(B4,{size:24}),url:"https://github.com/masonym"},{name:"LinkedIn",icon:N.jsx(U4,{size:24}),url:"https://www.linkedin.com/in/mason-leitch-78b90a206/",color:"#0077B5"},{name:"Email",icon:N.jsx(z4,{size:24}),action:i,color:"#EA4335"}];return N.jsx("section",{id:"contact",className:Gn.contactSection,children:N.jsxs(Ws.div,{className:Gn.contactContent,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[N.jsxs("div",{className:Gn.contactHeader,children:[N.jsx("h2",{className:Gn.title,children:"Get in Touch"}),N.jsx("p",{className:Gn.subtitle,children:"Let's collaborate on your next project or discuss opportunities"})]}),N.jsxs("div",{className:Gn.contactCards,children:[N.jsxs(Ws.div,{className:Gn.contactCard,whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[N.jsx("h3",{children:"Ready to Start?"}),N.jsx("p",{children:"I'm currently open to new opportunities and interesting projects. Whether you have a question or just want to say hi, I'll try my best to get back to you!"}),N.jsx("div",{className:Gn.emailContainer,children:N.jsxs("button",{className:Gn.emailButton,onClick:i,children:[e,N.jsx("span",{className:Gn.copyHint,children:n?"Copied!":"Click to copy"})]})})]}),N.jsxs(Ws.div,{className:Gn.contactCard,whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[N.jsx("h3",{children:"Connect with Me"}),N.jsx("p",{children:"Follow me on social media to stay updated with my latest projects and tech adventures."}),N.jsx("div",{className:Gn.socialLinks,children:s.map(r=>N.jsxs(Ws.a,{href:r.url,onClick:r.action,className:Gn.socialLink,whileHover:{scale:1.1,color:r.color},target:"_blank",rel:"noopener noreferrer",title:r.name,children:[r.icon,N.jsx("span",{children:r.name})]},r.name))})]})]}),N.jsxs("div",{className:Gn.contactFooter,children:[N.jsx("p",{children:"Based in British Columbia, Canada "}),N.jsx("p",{children:"Available for remote opportunities worldwide"})]})]})})}function sW(){return N.jsxs("div",{children:[N.jsx("h1",{children:"Oops! You seem to be lost."}),N.jsx("p",{children:"Click here to go home:"}),N.jsx(Qk,{to:"/",children:"Home"})]})}const rW="_container_1a7qi_1",oW="_calendar_1a7qi_25",aW="_door_1a7qi_39",lW="_disabled_1a7qi_53",cW="_opened_1a7qi_59",uW="_doorFront_1a7qi_63",hW="_doorBack_1a7qi_63",dW="_modal_1a7qi_99",fW="_modalContent_1a7qi_114",pW="_close_1a7qi_124",bs={container:rW,calendar:oW,door:aW,disabled:lW,opened:cW,doorFront:uW,doorBack:hW,modal:dW,modalContent:fW,close:pW};function mW(){const[n,t]=j.useState([]),[e,i]=j.useState(null),[s,r]=j.useState({}),[o,a]=j.useState([]),l=new Date,c=l.getDate(),u=l.getMonth(),f=_=>{const A=Math.sin(_++)*1e4;return A-Math.floor(A)},p=(_,A)=>{const v=[..._];for(let w=v.length-1;w>0;w--){const T=Math.floor(f(A+w)*(w+1));[v[w],v[T]]=[v[T],v[w]]}return v};j.useEffect(()=>{const _=Array.from({length:25},(T,D)=>D+1),A=new Date().getFullYear(),v=p(_,A);a(v);const w=localStorage.getItem("openedDoors");w&&t(JSON.parse(w))},[]),j.useEffect(()=>{n.length>0&&localStorage.setItem("openedDoors",JSON.stringify(n))},[n]);const m=async _=>{if(!s[_])try{const A=await fetch(`/ascii/day${_}.txt`);if(!A.ok)throw new Error("Failed to load ASCII art");const v=await A.text();r(w=>({...w,[_]:v}))}catch(A){return console.error("Error loading ASCII art:",A),"ASCII art not found"}},g=async _=>{u===11&&_<=c&&(await m(_),n.includes(_)||t([...n,_]),setTimeout(()=>{i(_)},600))};return N.jsxs("div",{className:bs.container,children:[N.jsx("h1",{children:"Advent Calendar"}),N.jsx("div",{className:bs.calendar,children:o.map(_=>N.jsxs("div",{className:`${bs.door} ${n.includes(_)?bs.opened:""} ${u===11&&_<=c?"":bs.disabled}`,onClick:()=>g(_),children:[N.jsx("div",{className:bs.doorFront,children:_}),N.jsx("div",{className:bs.doorBack,children:n.includes(_)?"":_})]},_))}),e&&N.jsx("div",{className:bs.modal,onClick:()=>i(null),children:N.jsxs("div",{className:bs.modalContent,onClick:_=>_.stopPropagation(),children:[N.jsx("span",{className:bs.close,onClick:()=>i(null),children:""}),N.jsx("pre",{children:s[e]||"Loading..."})]})})]})}const gW="_skillsSection_fd86h_1",yW="_title_fd86h_6",vW="_skillsContainer_fd86h_13",_W="_categoryCard_fd86h_21",wW="_categoryTitle_fd86h_28",EW="_skillsList_fd86h_36",AW="_skillItem_fd86h_42",TW="_skillHeader_fd86h_50",SW="_skillIcon_fd86h_57",bW="_skillName_fd86h_62",CW="_skillDetails_fd86h_68",Yi={skillsSection:gW,title:yW,skillsContainer:vW,categoryCard:_W,categoryTitle:wW,skillsList:EW,skillItem:AW,skillHeader:TW,skillIcon:SW,skillName:bW,skillDetails:CW},xW=()=>{const n=[{title:"Frontend Development",items:[{name:"React & Next.js",icon:N.jsx(JE,{}),details:["Next.js 13+ App Router","Advanced React Patterns & Hooks","Context Providers & State Management","Performance Optimization & SSR"]},{name:"TypeScript",icon:N.jsx(R7,{}),details:["Centralized TypeScript Interfaces","Advanced Type Systems","Custom Hooks Development","Type-Safe API Integration"]},{name:"UI & Styling",icon:N.jsx(P7,{}),details:["Tailwind CSS Architecture","Responsive Design Patterns","Accessible Component Design","Dynamic UI Components"]}]},{title:"Backend Development",items:[{name:"Python Development",icon:N.jsx(jH,{}),details:["Django Web Applications","AutoCAD Integration & DXF","ETL Pipeline Development","Structural Engineering Tools"]},{name:"PHP",icon:N.jsx(VH,{}),details:["Laravel Framework","Object-Oriented Design","Technical Tool Development"]},{name:"Data Engineering",icon:N.jsx(UH,{}),details:["AWS DynamoDB Design","Data Mining Solutions","Automated Analysis Tools","Large Dataset Processing"]}]},{title:"Cloud & Infrastructure",items:[{name:"AWS Services",icon:N.jsx(OH,{}),details:["DynamoDB & S3 Integration","Lambda Functions","CloudFront CDN","API Gateway"]},{name:"Development Tools",icon:N.jsx($H,{}),details:["Git Version Control","AutoCAD Integration","Technical Documentation","CI/CD Workflows"]}]}],t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.2}}},e={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5}}};return N.jsxs("section",{id:"skills",className:Yi.skillsSection,children:[N.jsx("h2",{className:Yi.title,children:"Technical Expertise"}),N.jsx("div",{className:Yi.skillsContainer,children:n.map((i,s)=>N.jsxs(Ws.div,{className:Yi.categoryCard,variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},children:[N.jsx("h3",{className:Yi.categoryTitle,children:i.title}),N.jsx("div",{className:Yi.skillsList,children:i.items.map((r,o)=>N.jsxs(Ws.div,{className:Yi.skillItem,variants:e,children:[N.jsxs("div",{className:Yi.skillHeader,children:[N.jsx("span",{className:Yi.skillIcon,children:r.icon}),N.jsx("h4",{className:Yi.skillName,children:r.name})]}),N.jsx("ul",{className:Yi.skillDetails,children:r.details.map((a,l)=>N.jsx("li",{children:a},l))})]},o))})]},s))})]})},PW="_container_1n1rp_1",RW="_header_1n1rp_17",IW="_heartIcon_1n1rp_44",kW="_pulse_1n1rp_1",DW="_addTaskForm_1n1rp_59",LW="_taskInput_1n1rp_65",MW="_addButton_1n1rp_82",NW="_taskList_1n1rp_100",FW="_taskItem_1n1rp_106",OW="_taskLeft_1n1rp_131",VW="_taskRight_1n1rp_140",jW="_checkbox_1n1rp_158",BW="_taskText_1n1rp_186",UW="_completed_1n1rp_195",zW="_dateContainer_1n1rp_200",$W="_calendarIcon_1n1rp_216",HW="_dateInput_1n1rp_220",WW="_deleteButton_1n1rp_231",GW="_emptyState_1n1rp_249",qW="_loadingState_1n1rp_249",KW="_spin_1n1rp_1",xe={container:PW,header:RW,heartIcon:IW,pulse:kW,addTaskForm:DW,taskInput:LW,addButton:MW,taskList:NW,taskItem:FW,taskLeft:OW,taskRight:VW,checkbox:jW,taskText:BW,completed:UW,dateContainer:zW,calendarIcon:$W,dateInput:HW,deleteButton:WW,emptyState:GW,loadingState:qW,spin:KW},XW=()=>{};var cP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},YW=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[e++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[e++],o=n[e++],a=n[e++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[e++],o=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},H4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=r>>2,f=(r&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(e[u],e[f],e[p],e[m])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray($4(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):YW(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=e[n.charAt(s++)],a=s<n.length?e[n.charAt(s)]:0;++s;const c=s<n.length?e[n.charAt(s)]:64;++s;const f=s<n.length?e[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||f==null)throw new QW;const p=r<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),f!==64){const g=c<<6&192|f;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JW=function(n){const t=$4(n);return H4.encodeByteArray(t,!0)},Sv=function(n){return JW(n).replace(/\./g,"")},ZW=function(n){try{return H4.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=()=>tG().__FIREBASE_DEFAULTS__,nG=()=>{if(typeof process>"u"||typeof cP>"u")return;const n=cP.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&ZW(n[1]);return t&&JSON.parse(t)},aS=()=>{try{return XW()||eG()||nG()||iG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sG=n=>{var t,e;return(e=(t=aS())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},rG=n=>{const t=sG(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},W4=()=>{var n;return(n=aS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aG(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sv(JSON.stringify(e)),Sv(JSON.stringify(o)),""].join(".")}const of={};function cG(){const n={prod:[],emulator:[]};for(const t of Object.keys(of))of[t]?n.emulator.push(t):n.prod.push(t);return n}function uG(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let uP=!1;function hG(n,t){if(typeof window>"u"||typeof document>"u"||!lS(window.location.host)||of[n]===t||of[n]||uP)return;of[n]=t;function e(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=cG().prod.length>0;function o(){const p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{uP=!0,o()},p}function u(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=uG(i),m=e("text"),g=document.getElementById(m)||document.createElement("span"),_=e("learnmore"),A=document.getElementById(_)||document.createElement("a"),v=e("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;a(T),u(A,_);const D=c();l(w,v),T.append(w,g,A,D),document.body.appendChild(T)}r?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dG(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fG(){var n;const t=(n=aS())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pG(){return!fG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mG(){try{return typeof indexedDB=="object"}catch{return!1}}function gG(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="FirebaseError";class Fh extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=yG,Object.setPrototypeOf(this,Fh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G4.prototype.create)}}class G4{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?vG(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fh(s,a,i)}}function vG(n,t){return n.replace(_G,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const _G=/\{\$([^}]+)}/g;function bv(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const r=n[s],o=t[s];if(hP(r)&&hP(o)){if(!bv(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function hP(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n){return n&&n._delegate?n._delegate:n}class Of{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new oG;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(AG(t))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Wa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wa){return this.instances.has(t)}getOptions(t=Wa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&t(o,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:EG(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Wa){return this.component?this.component.multipleInstances?t:Wa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EG(n){return n===Wa?void 0:n}function AG(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new wG(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xt||(xt={}));const SG={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},bG=xt.INFO,CG={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},xG=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=CG[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class q4{constructor(t){this.name=t,this._logLevel=bG,this._logHandler=xG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?SG[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...t),this._logHandler(this,xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...t),this._logHandler(this,xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...t),this._logHandler(this,xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...t),this._logHandler(this,xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...t),this._logHandler(this,xt.ERROR,...t)}}const PG=(n,t)=>t.some(e=>n instanceof e);let dP,fP;function RG(){return dP||(dP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IG(){return fP||(fP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K4=new WeakMap,ZE=new WeakMap,X4=new WeakMap,f1=new WeakMap,cS=new WeakMap;function kG(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(sa(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&K4.set(e,n)}).catch(()=>{}),cS.set(t,n),t}function DG(n){if(ZE.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});ZE.set(n,t)}let tA={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return ZE.get(n);if(t==="objectStoreNames")return n.objectStoreNames||X4.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return sa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function LG(n){tA=n(tA)}function MG(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(p1(this),t,...e);return X4.set(i,t.sort?t.sort():[t]),sa(i)}:IG().includes(n)?function(...t){return n.apply(p1(this),t),sa(K4.get(this))}:function(...t){return sa(n.apply(p1(this),t))}}function NG(n){return typeof n=="function"?MG(n):(n instanceof IDBTransaction&&DG(n),PG(n,RG())?new Proxy(n,tA):n)}function sa(n){if(n instanceof IDBRequest)return kG(n);if(f1.has(n))return f1.get(n);const t=NG(n);return t!==n&&(f1.set(n,t),cS.set(t,n)),t}const p1=n=>cS.get(n);function FG(n,t,{blocked:e,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,t),a=sa(o);return i&&o.addEventListener("upgradeneeded",l=>{i(sa(o.result),l.oldVersion,l.newVersion,sa(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const OG=["get","getKey","getAll","getAllKeys","count"],VG=["put","add","delete","clear"],m1=new Map;function pP(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(m1.get(t))return m1.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=VG.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OG.includes(e)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[e](...a),s&&l.done]))[0]};return m1.set(t,r),r}LG(n=>({...n,get:(t,e,i)=>pP(t,e)||n.get(t,e,i),has:(t,e)=>!!pP(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(BG(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function BG(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const eA="@firebase/app",mP="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new q4("@firebase/app"),UG="@firebase/app-compat",zG="@firebase/analytics-compat",$G="@firebase/analytics",HG="@firebase/app-check-compat",WG="@firebase/app-check",GG="@firebase/auth",qG="@firebase/auth-compat",KG="@firebase/database",XG="@firebase/data-connect",YG="@firebase/database-compat",QG="@firebase/functions",JG="@firebase/functions-compat",ZG="@firebase/installations",tq="@firebase/installations-compat",eq="@firebase/messaging",nq="@firebase/messaging-compat",iq="@firebase/performance",sq="@firebase/performance-compat",rq="@firebase/remote-config",oq="@firebase/remote-config-compat",aq="@firebase/storage",lq="@firebase/storage-compat",cq="@firebase/firestore",uq="@firebase/ai",hq="@firebase/firestore-compat",dq="firebase",fq="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="[DEFAULT]",pq={[eA]:"fire-core",[UG]:"fire-core-compat",[$G]:"fire-analytics",[zG]:"fire-analytics-compat",[WG]:"fire-app-check",[HG]:"fire-app-check-compat",[GG]:"fire-auth",[qG]:"fire-auth-compat",[KG]:"fire-rtdb",[XG]:"fire-data-connect",[YG]:"fire-rtdb-compat",[QG]:"fire-fn",[JG]:"fire-fn-compat",[ZG]:"fire-iid",[tq]:"fire-iid-compat",[eq]:"fire-fcm",[nq]:"fire-fcm-compat",[iq]:"fire-perf",[sq]:"fire-perf-compat",[rq]:"fire-rc",[oq]:"fire-rc-compat",[aq]:"fire-gcs",[lq]:"fire-gcs-compat",[cq]:"fire-fst",[hq]:"fire-fst-compat",[uq]:"fire-vertex","fire-js":"fire-js",[dq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map,mq=new Map,iA=new Map;function gP(n,t){try{n.container.addComponent(t)}catch(e){io.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function xv(n){const t=n.name;if(iA.has(t))return io.debug(`There were multiple attempts to register component ${t}.`),!1;iA.set(t,n);for(const e of Cv.values())gP(e,n);for(const e of mq.values())gP(e,n);return!0}function gq(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function yq(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ra=new G4("app","Firebase",vq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Of("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=fq;function Y4(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:nA,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw ra.create("bad-app-name",{appName:String(s)});if(e||(e=W4()),!e)throw ra.create("no-options");const r=Cv.get(s);if(r){if(bv(e,r.options)&&bv(i,r.config))return r;throw ra.create("duplicate-app",{appName:s})}const o=new TG(s);for(const l of iA.values())o.addComponent(l);const a=new _q(e,i,o);return Cv.set(s,a),a}function Eq(n=nA){const t=Cv.get(n);if(!t&&n===nA&&W4())return Y4();if(!t)throw ra.create("no-app",{appName:n});return t}function gu(n,t,e){var i;let s=(i=pq[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${t}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),io.warn(a.join(" "));return}xv(new Of(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq="firebase-heartbeat-database",Tq=1,Vf="firebase-heartbeat-store";let g1=null;function Q4(){return g1||(g1=FG(Aq,Tq,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Vf)}catch(e){console.warn(e)}}}}).catch(n=>{throw ra.create("idb-open",{originalErrorMessage:n.message})})),g1}async function Sq(n){try{const e=(await Q4()).transaction(Vf),i=await e.objectStore(Vf).get(J4(n));return await e.done,i}catch(t){if(t instanceof Fh)io.warn(t.message);else{const e=ra.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});io.warn(e.message)}}}async function yP(n,t){try{const i=(await Q4()).transaction(Vf,"readwrite");await i.objectStore(Vf).put(t,J4(n)),await i.done}catch(e){if(e instanceof Fh)io.warn(e.message);else{const i=ra.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});io.warn(i.message)}}}function J4(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=1024,Cq=30;class xq{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Rq(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vP();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>Cq){const o=Iq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){io.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vP(),{heartbeatsToSend:i,unsentEntries:s}=Pq(this._heartbeatsCache.heartbeats),r=Sv(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return io.warn(e),""}}}function vP(){return new Date().toISOString().substring(0,10)}function Pq(n,t=bq){const e=[];let i=n.slice();for(const s of n){const r=e.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),_P(e)>t){r.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),_P(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class Rq{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mG()?gG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Sq(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return yP(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return yP(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function _P(n){return Sv(JSON.stringify({version:2,heartbeats:n})).length}function Iq(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(n){xv(new Of("platform-logger",t=>new jG(t),"PRIVATE")),xv(new Of("heartbeat",t=>new xq(t),"PRIVATE")),gu(eA,mP,n),gu(eA,mP,"esm2017"),gu("fire-js","")}kq("");var Dq="firebase",Lq="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gu(Dq,Lq,"app");var wP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oa,Z4;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(k,M,V){for(var L=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)L[Z-2]=arguments[Z];return S.prototype[M].apply(k,L)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,S,R){R||(R=0);var k=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)k[M]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(M=0;16>M;++M)k[M]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],M=P.g[2];var V=P.g[3],L=S+(V^R&(M^V))+k[0]+3614090360&4294967295;S=R+(L<<7&4294967295|L>>>25),L=V+(M^S&(R^M))+k[1]+3905402710&4294967295,V=S+(L<<12&4294967295|L>>>20),L=M+(R^V&(S^R))+k[2]+606105819&4294967295,M=V+(L<<17&4294967295|L>>>15),L=R+(S^M&(V^S))+k[3]+3250441966&4294967295,R=M+(L<<22&4294967295|L>>>10),L=S+(V^R&(M^V))+k[4]+4118548399&4294967295,S=R+(L<<7&4294967295|L>>>25),L=V+(M^S&(R^M))+k[5]+1200080426&4294967295,V=S+(L<<12&4294967295|L>>>20),L=M+(R^V&(S^R))+k[6]+2821735955&4294967295,M=V+(L<<17&4294967295|L>>>15),L=R+(S^M&(V^S))+k[7]+4249261313&4294967295,R=M+(L<<22&4294967295|L>>>10),L=S+(V^R&(M^V))+k[8]+1770035416&4294967295,S=R+(L<<7&4294967295|L>>>25),L=V+(M^S&(R^M))+k[9]+2336552879&4294967295,V=S+(L<<12&4294967295|L>>>20),L=M+(R^V&(S^R))+k[10]+4294925233&4294967295,M=V+(L<<17&4294967295|L>>>15),L=R+(S^M&(V^S))+k[11]+2304563134&4294967295,R=M+(L<<22&4294967295|L>>>10),L=S+(V^R&(M^V))+k[12]+1804603682&4294967295,S=R+(L<<7&4294967295|L>>>25),L=V+(M^S&(R^M))+k[13]+4254626195&4294967295,V=S+(L<<12&4294967295|L>>>20),L=M+(R^V&(S^R))+k[14]+2792965006&4294967295,M=V+(L<<17&4294967295|L>>>15),L=R+(S^M&(V^S))+k[15]+1236535329&4294967295,R=M+(L<<22&4294967295|L>>>10),L=S+(M^V&(R^M))+k[1]+4129170786&4294967295,S=R+(L<<5&4294967295|L>>>27),L=V+(R^M&(S^R))+k[6]+3225465664&4294967295,V=S+(L<<9&4294967295|L>>>23),L=M+(S^R&(V^S))+k[11]+643717713&4294967295,M=V+(L<<14&4294967295|L>>>18),L=R+(V^S&(M^V))+k[0]+3921069994&4294967295,R=M+(L<<20&4294967295|L>>>12),L=S+(M^V&(R^M))+k[5]+3593408605&4294967295,S=R+(L<<5&4294967295|L>>>27),L=V+(R^M&(S^R))+k[10]+38016083&4294967295,V=S+(L<<9&4294967295|L>>>23),L=M+(S^R&(V^S))+k[15]+3634488961&4294967295,M=V+(L<<14&4294967295|L>>>18),L=R+(V^S&(M^V))+k[4]+3889429448&4294967295,R=M+(L<<20&4294967295|L>>>12),L=S+(M^V&(R^M))+k[9]+568446438&4294967295,S=R+(L<<5&4294967295|L>>>27),L=V+(R^M&(S^R))+k[14]+3275163606&4294967295,V=S+(L<<9&4294967295|L>>>23),L=M+(S^R&(V^S))+k[3]+4107603335&4294967295,M=V+(L<<14&4294967295|L>>>18),L=R+(V^S&(M^V))+k[8]+1163531501&4294967295,R=M+(L<<20&4294967295|L>>>12),L=S+(M^V&(R^M))+k[13]+2850285829&4294967295,S=R+(L<<5&4294967295|L>>>27),L=V+(R^M&(S^R))+k[2]+4243563512&4294967295,V=S+(L<<9&4294967295|L>>>23),L=M+(S^R&(V^S))+k[7]+1735328473&4294967295,M=V+(L<<14&4294967295|L>>>18),L=R+(V^S&(M^V))+k[12]+2368359562&4294967295,R=M+(L<<20&4294967295|L>>>12),L=S+(R^M^V)+k[5]+4294588738&4294967295,S=R+(L<<4&4294967295|L>>>28),L=V+(S^R^M)+k[8]+2272392833&4294967295,V=S+(L<<11&4294967295|L>>>21),L=M+(V^S^R)+k[11]+1839030562&4294967295,M=V+(L<<16&4294967295|L>>>16),L=R+(M^V^S)+k[14]+4259657740&4294967295,R=M+(L<<23&4294967295|L>>>9),L=S+(R^M^V)+k[1]+2763975236&4294967295,S=R+(L<<4&4294967295|L>>>28),L=V+(S^R^M)+k[4]+1272893353&4294967295,V=S+(L<<11&4294967295|L>>>21),L=M+(V^S^R)+k[7]+4139469664&4294967295,M=V+(L<<16&4294967295|L>>>16),L=R+(M^V^S)+k[10]+3200236656&4294967295,R=M+(L<<23&4294967295|L>>>9),L=S+(R^M^V)+k[13]+681279174&4294967295,S=R+(L<<4&4294967295|L>>>28),L=V+(S^R^M)+k[0]+3936430074&4294967295,V=S+(L<<11&4294967295|L>>>21),L=M+(V^S^R)+k[3]+3572445317&4294967295,M=V+(L<<16&4294967295|L>>>16),L=R+(M^V^S)+k[6]+76029189&4294967295,R=M+(L<<23&4294967295|L>>>9),L=S+(R^M^V)+k[9]+3654602809&4294967295,S=R+(L<<4&4294967295|L>>>28),L=V+(S^R^M)+k[12]+3873151461&4294967295,V=S+(L<<11&4294967295|L>>>21),L=M+(V^S^R)+k[15]+530742520&4294967295,M=V+(L<<16&4294967295|L>>>16),L=R+(M^V^S)+k[2]+3299628645&4294967295,R=M+(L<<23&4294967295|L>>>9),L=S+(M^(R|~V))+k[0]+4096336452&4294967295,S=R+(L<<6&4294967295|L>>>26),L=V+(R^(S|~M))+k[7]+1126891415&4294967295,V=S+(L<<10&4294967295|L>>>22),L=M+(S^(V|~R))+k[14]+2878612391&4294967295,M=V+(L<<15&4294967295|L>>>17),L=R+(V^(M|~S))+k[5]+4237533241&4294967295,R=M+(L<<21&4294967295|L>>>11),L=S+(M^(R|~V))+k[12]+1700485571&4294967295,S=R+(L<<6&4294967295|L>>>26),L=V+(R^(S|~M))+k[3]+2399980690&4294967295,V=S+(L<<10&4294967295|L>>>22),L=M+(S^(V|~R))+k[10]+4293915773&4294967295,M=V+(L<<15&4294967295|L>>>17),L=R+(V^(M|~S))+k[1]+2240044497&4294967295,R=M+(L<<21&4294967295|L>>>11),L=S+(M^(R|~V))+k[8]+1873313359&4294967295,S=R+(L<<6&4294967295|L>>>26),L=V+(R^(S|~M))+k[15]+4264355552&4294967295,V=S+(L<<10&4294967295|L>>>22),L=M+(S^(V|~R))+k[6]+2734768916&4294967295,M=V+(L<<15&4294967295|L>>>17),L=R+(V^(M|~S))+k[13]+1309151649&4294967295,R=M+(L<<21&4294967295|L>>>11),L=S+(M^(R|~V))+k[4]+4149444226&4294967295,S=R+(L<<6&4294967295|L>>>26),L=V+(R^(S|~M))+k[11]+3174756917&4294967295,V=S+(L<<10&4294967295|L>>>22),L=M+(S^(V|~R))+k[2]+718787259&4294967295,M=V+(L<<15&4294967295|L>>>17),L=R+(V^(M|~S))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+V&4294967295}i.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,k=this.B,M=this.h,V=0;V<S;){if(M==0)for(;V<=R;)s(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<S;)if(k[M++]=P.charCodeAt(V++),M==this.blockSize){s(this,k),M=0;break}}else for(;V<S;)if(k[M++]=P[V++],M==this.blockSize){s(this,k),M=0;break}}this.h=M,this.o+=S},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var k=0;32>k;k+=8)P[R++]=this.g[S]>>>k&255;return P};function r(P,S){var R=a;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function o(P,S){this.h=S;for(var R=[],k=!0,M=P.length-1;0<=M;M--){var V=P[M]|0;k&&V==S||(R[M]=V,k=!1)}this.g=R}var a={};function l(P){return-128<=P&&128>P?r(P,function(S){return new o([S|0],0>S?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return A(c(-P));for(var S=[],R=1,k=0;P>=R;k++)S[k]=P/R|0,R*=4294967296;return new o(S,0)}function u(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return A(u(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(S,8)),k=f,M=0;M<P.length;M+=8){var V=Math.min(8,P.length-M),L=parseInt(P.substring(M,M+V),S);8>V?(V=c(Math.pow(S,V)),k=k.j(V).add(c(L))):(k=k.j(R),k=k.add(c(L)))}return k}var f=l(0),p=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-A(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var k=this.i(R);P+=(0<=k?k:4294967296+k)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(g(this))return"0";if(_(this))return"-"+A(this).toString(P);for(var S=c(Math.pow(P,6)),R=this,k="";;){var M=D(R,S).g;R=v(R,M.j(S));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=M,g(R))return V+k;for(;6>V.length;)V="0"+V;k=V+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function g(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=v(this,P),_(P)?-1:g(P)?0:1};function A(P){for(var S=P.g.length,R=[],k=0;k<S;k++)R[k]=~P.g[k];return new o(R,~P.h).add(p)}n.abs=function(){return _(this)?A(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0,M=0;M<=S;M++){var V=k+(this.i(M)&65535)+(P.i(M)&65535),L=(V>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);k=L>>>16,V&=65535,L&=65535,R[M]=L<<16|V}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(P,S){return P.add(A(S))}n.j=function(P){if(g(this)||g(P))return f;if(_(this))return _(P)?A(this).j(A(P)):A(A(this).j(P));if(_(P))return A(this.j(A(P)));if(0>this.l(m)&&0>P.l(m))return c(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],k=0;k<2*S;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<P.g.length;M++){var V=this.i(k)>>>16,L=this.i(k)&65535,Z=P.i(M)>>>16,ct=P.i(M)&65535;R[2*k+2*M]+=L*ct,w(R,2*k+2*M),R[2*k+2*M+1]+=V*ct,w(R,2*k+2*M+1),R[2*k+2*M+1]+=L*Z,w(R,2*k+2*M+1),R[2*k+2*M+2]+=V*Z,w(R,2*k+2*M+2)}for(k=0;k<S;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=S;k<2*S;k++)R[k]=0;return new o(R,0)};function w(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function T(P,S){this.g=P,this.h=S}function D(P,S){if(g(S))throw Error("division by zero");if(g(P))return new T(f,f);if(_(P))return S=D(A(P),S),new T(A(S.g),A(S.h));if(_(S))return S=D(P,A(S)),new T(A(S.g),S.h);if(30<P.g.length){if(_(P)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var R=p,k=S;0>=k.l(P);)R=F(R),k=F(k);var M=O(R,1),V=O(k,1);for(k=O(k,2),R=O(R,2);!g(k);){var L=V.add(k);0>=L.l(P)&&(M=M.add(R),V=L),k=O(k,1),R=O(R,1)}return S=v(P,M.j(S)),new T(M,S)}for(M=f;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),V=c(R),L=V.j(S);_(L)||0<L.l(P);)R-=k,V=c(R),L=V.j(S);g(V)&&(V=p),M=M.add(V),P=v(P,L)}return new T(M,P)}n.A=function(P){return D(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)&P.i(k);return new o(R,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)|P.i(k);return new o(R,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)^P.i(k);return new o(R,this.h^P.h)};function F(P){for(var S=P.g.length+1,R=[],k=0;k<S;k++)R[k]=P.i(k)<<1|P.i(k-1)>>>31;return new o(R,P.h)}function O(P,S){var R=S>>5;S%=32;for(var k=P.g.length-R,M=[],V=0;V<k;V++)M[V]=0<S?P.i(V+R)>>>S|P.i(V+R+1)<<32-S:P.i(V+R);return new o(M,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Z4=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,oa=o}).apply(typeof wP<"u"?wP:typeof self<"u"?self:typeof window<"u"?window:{});var Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t3,Bd,e3,Py,sA,n3,i3,s3;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fg=="object"&&Fg];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function s(d,y){if(y)t:{var E=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in E))break t;E=E[B]}d=d[d.length-1],I=E[d],y=y(I),y!=I&&y!=null&&t(E,d,{configurable:!0,writable:!0,value:y})}}function r(d,y){d instanceof String&&(d+="");var E=0,I=!1,B={next:function(){if(!I&&E<d.length){var U=E++;return{value:y(U,d[U]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(d){return d||function(){return r(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,E){return d.call.apply(d.bind,arguments)}function f(d,y,E){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),d.apply(y,B)}}return function(){return d.apply(y,arguments)}}function p(d,y,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function g(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(I,B,U){for(var q=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)q[$t-2]=arguments[$t];return y.prototype[B].apply(I,q)}}function _(d){const y=d.length;if(0<y){const E=Array(y);for(let I=0;I<y;I++)E[I]=d[I];return E}return[]}function A(d,y){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(l(I)){const B=d.length||0,U=I.length||0;d.length=B+U;for(let q=0;q<U;q++)d[B+q]=I[q]}else d.push(I)}}class v{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function w(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function D(d){return D[" "](d),d}D[" "]=function(){};var F=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function O(d,y,E){for(const I in d)y.call(E,d[I],I,d)}function P(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,y){let E,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(E in I)d[E]=I[E];for(let U=0;U<R.length;U++)E=R[U],Object.prototype.hasOwnProperty.call(I,E)&&(d[E]=I[E])}}function M(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function V(d){a.setTimeout(()=>{throw d},0)}function L(){var d=tt;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,E){const I=ct.get();I.set(y,E),this.h?this.h.next=I:this.g=I,this.h=I}}var ct=new v(()=>new gt,d=>d.reset());class gt{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let G,z=!1,tt=new Z,it=()=>{const d=a.Promise.resolve(void 0);G=()=>{d.then(It)}};var It=()=>{for(var d;d=L();){try{d.h.call(d.g)}catch(E){V(E)}var y=ct;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}z=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return d}();function se(d,y){if(ht.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(F){t:{try{D(y.nodeName);var B=!0;break t}catch{}B=!1}B||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Yt[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&se.aa.h.call(this)}}g(se,ht);var Yt={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),gn=0;function Ri(d,y,E,I,B){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!I,this.ha=B,this.key=++gn,this.da=this.fa=!1}function zt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Es(d){this.src=d,this.g={},this.h=0}Es.prototype.add=function(d,y,E,I,B){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var q=Mt(d,y,I,B);return-1<q?(y=d[q],E||(y.fa=!1)):(y=new Ri(y,this.src,U,!!I,B),y.fa=E,d.push(y)),y};function rr(d,y){var E=y.type;if(E in d.g){var I=d.g[E],B=Array.prototype.indexOf.call(I,y,void 0),U;(U=0<=B)&&Array.prototype.splice.call(I,B,1),U&&(zt(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Mt(d,y,E,I){for(var B=0;B<d.length;++B){var U=d[B];if(!U.da&&U.listener==y&&U.capture==!!E&&U.ha==I)return B}return-1}var ne="closure_lm_"+(1e6*Math.random()|0),be={};function _e(d,y,E,I,B){if(Array.isArray(y)){for(var U=0;U<y.length;U++)_e(d,y[U],E,I,B);return null}return E=qm(E),d&&d[Tt]?d.K(y,E,c(I)?!!I.capture:!!I,B):As(d,y,E,!1,I,B)}function As(d,y,E,I,B,U){if(!y)throw Error("Invalid event type");var q=c(B)?!!B.capture:!!B,$t=$h(d);if($t||(d[ne]=$t=new Es(d)),E=$t.add(y,E,I,q,U),E.proxy)return E;if(I=n_(),E.proxy=I,I.src=d,I.listener=E,d.addEventListener)de||(B=q),B===void 0&&(B=!1),d.addEventListener(y.toString(),I,B);else if(d.attachEvent)d.attachEvent(Ia(y.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function n_(){function d(E){return y.call(d.src,d.listener,E)}const y=i_;return d}function Gm(d,y,E,I,B){if(Array.isArray(y))for(var U=0;U<y.length;U++)Gm(d,y[U],E,I,B);else I=c(I)?!!I.capture:!!I,E=qm(E),d&&d[Tt]?(d=d.i,y=String(y).toString(),y in d.g&&(U=d.g[y],E=Mt(U,E,I,B),-1<E&&(zt(U[E]),Array.prototype.splice.call(U,E,1),U.length==0&&(delete d.g[y],d.h--)))):d&&(d=$h(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Mt(y,E,I,B)),(E=-1<d?y[d]:null)&&zh(E))}function zh(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Tt])rr(y.i,d);else{var E=d.type,I=d.proxy;y.removeEventListener?y.removeEventListener(E,I,d.capture):y.detachEvent?y.detachEvent(Ia(E),I):y.addListener&&y.removeListener&&y.removeListener(I),(E=$h(y))?(rr(E,d),E.h==0&&(E.src=null,y[ne]=null)):zt(d)}}}function Ia(d){return d in be?be[d]:be[d]="on"+d}function i_(d,y){if(d.da)d=!0;else{y=new se(y,this);var E=d.listener,I=d.ha||d.src;d.fa&&zh(d),d=E.call(I,y)}return d}function $h(d){return d=d[ne],d instanceof Es?d:null}var Hh="__closure_events_fn_"+(1e9*Math.random()>>>0);function qm(d){return typeof d=="function"?d:(d[Hh]||(d[Hh]=function(y){return d.handleEvent(y)}),d[Hh])}function We(){at.call(this),this.i=new Es(this),this.M=this,this.F=null}g(We,at),We.prototype[Tt]=!0,We.prototype.removeEventListener=function(d,y,E,I){Gm(this,d,y,E,I)};function fe(d,y){var E,I=d.F;if(I)for(E=[];I;I=I.F)E.push(I);if(d=d.M,I=y.type||y,typeof y=="string")y=new ht(y,d);else if(y instanceof ht)y.target=y.target||d;else{var B=y;y=new ht(I,d),k(y,B)}if(B=!0,E)for(var U=E.length-1;0<=U;U--){var q=y.g=E[U];B=or(q,I,!0,y)&&B}if(q=y.g=d,B=or(q,I,!0,y)&&B,B=or(q,I,!1,y)&&B,E)for(U=0;U<E.length;U++)q=y.g=E[U],B=or(q,I,!1,y)&&B}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],I=0;I<E.length;I++)zt(E[I]);delete d.g[y],d.h--}}this.F=null},We.prototype.K=function(d,y,E,I){return this.i.add(String(d),y,!1,E,I)},We.prototype.L=function(d,y,E,I){return this.i.add(String(d),y,!0,E,I)};function or(d,y,E,I){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,U=0;U<y.length;++U){var q=y[U];if(q&&!q.da&&q.capture==E){var $t=q.listener,Je=q.ha||q.src;q.fa&&rr(d.i,q),B=$t.call(Je,I)!==!1&&B}}return B&&!I.defaultPrevented}function ka(d,y,E){if(typeof d=="function")E&&(d=p(d,E));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function bc(d){d.g=ka(()=>{d.g=null,d.i&&(d.i=!1,bc(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class RN extends at{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:bc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wh(d){at.call(this),this.h=d,this.g={}}g(Wh,at);var QS=[];function JS(d){O(d.g,function(y,E){this.g.hasOwnProperty(E)&&zh(y)},d),d.g={}}Wh.prototype.N=function(){Wh.aa.N.call(this),JS(this)},Wh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var s_=a.JSON.stringify,IN=a.JSON.parse,kN=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function r_(){}r_.prototype.h=null;function ZS(d){return d.h||(d.h=d.i())}function tb(){}var Gh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function o_(){ht.call(this,"d")}g(o_,ht);function a_(){ht.call(this,"c")}g(a_,ht);var Da={},eb=null;function Km(){return eb=eb||new We}Da.La="serverreachability";function nb(d){ht.call(this,Da.La,d)}g(nb,ht);function qh(d){const y=Km();fe(y,new nb(y))}Da.STAT_EVENT="statevent";function ib(d,y){ht.call(this,Da.STAT_EVENT,d),this.stat=y}g(ib,ht);function Mn(d){const y=Km();fe(y,new ib(y,d))}Da.Ma="timingevent";function sb(d,y){ht.call(this,Da.Ma,d),this.size=y}g(sb,ht);function Kh(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function Xh(){this.g=!0}Xh.prototype.xa=function(){this.g=!1};function DN(d,y,E,I,B,U){d.info(function(){if(d.g)if(U)for(var q="",$t=U.split("&"),Je=0;Je<$t.length;Je++){var kt=$t[Je].split("=");if(1<kt.length){var yn=kt[0];kt=kt[1];var vn=yn.split("_");q=2<=vn.length&&vn[1]=="type"?q+(yn+"="+kt+"&"):q+(yn+"=redacted&")}}else q=null;else q=U;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+y+`
`+E+`
`+q})}function LN(d,y,E,I,B,U,q){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+y+`
`+E+`
`+U+" "+q})}function Cc(d,y,E,I){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+NN(d,E)+(I?" "+I:"")})}function MN(d,y){d.info(function(){return"TIMEOUT: "+y})}Xh.prototype.info=function(){};function NN(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var I=E[d];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var U=B[0];if(U!="noop"&&U!="stop"&&U!="close")for(var q=1;q<B.length;q++)B[q]=""}}}}return s_(E)}catch{return y}}var Xm={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},l_;function Ym(){}g(Ym,r_),Ym.prototype.g=function(){return new XMLHttpRequest},Ym.prototype.i=function(){return{}},l_=new Ym;function co(d,y,E,I){this.j=d,this.i=y,this.l=E,this.R=I||1,this.U=new Wh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ob}function ob(){this.i=null,this.g="",this.h=!1}var ab={},c_={};function u_(d,y,E){d.L=1,d.v=tg(ar(y)),d.m=E,d.P=!0,lb(d,null)}function lb(d,y){d.F=Date.now(),Qm(d),d.A=ar(d.v);var E=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),Ab(E.i,"t",I),d.C=0,E=d.j.J,d.h=new ob,d.g=Bb(d.j,E?y:null,!d.m),0<d.O&&(d.M=new RN(p(d.Y,d,d.g),d.O)),y=d.U,E=d.g,I=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(QS[0]=B.toString()),B=QS);for(var U=0;U<B.length;U++){var q=_e(E,B[U],I||y.handleEvent,!1,y.h||y);if(!q)break;y.g[q.key]=q}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),qh(),DN(d.i,d.u,d.A,d.l,d.R,d.m)}co.prototype.ca=function(d){d=d.target;const y=this.M;y&&lr(d)==3?y.j():this.Y(d)},co.prototype.Y=function(d){try{if(d==this.g)t:{const vn=lr(this.g);var y=this.g.Ba();const Rc=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||Rb(this.g)))){this.J||vn!=4||y==7||(y==8||0>=Rc?qh(3):qh(2)),h_(this);var E=this.g.Z();this.X=E;e:if(cb(this)){var I=Rb(this.g);d="";var B=I.length,U=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){La(this),Yh(this);var q="";break e}this.h.i=new a.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,d+=this.h.i.decode(I[y],{stream:!(U&&y==B-1)});I.length=0,this.h.g+=d,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=E==200,LN(this.i,this.u,this.A,this.l,this.R,vn,E),this.o){if(this.T&&!this.K){e:{if(this.g){var $t,Je=this.g;if(($t=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w($t)){var kt=$t;break e}}kt=null}if(E=kt)Cc(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,d_(this,E);else{this.o=!1,this.s=3,Mn(12),La(this),Yh(this);break t}}if(this.P){E=!0;let qi;for(;!this.J&&this.C<q.length;)if(qi=FN(this,q),qi==c_){vn==4&&(this.s=4,Mn(14),E=!1),Cc(this.i,this.l,null,"[Incomplete Response]");break}else if(qi==ab){this.s=4,Mn(15),Cc(this.i,this.l,q,"[Invalid Chunk]"),E=!1;break}else Cc(this.i,this.l,qi,null),d_(this,qi);if(cb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||q.length!=0||this.h.h||(this.s=1,Mn(16),E=!1),this.o=this.o&&E,!E)Cc(this.i,this.l,q,"[Invalid Chunked Response]"),La(this),Yh(this);else if(0<q.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),v_(yn),yn.M=!0,Mn(11))}}else Cc(this.i,this.l,q,null),d_(this,q);vn==4&&La(this),this.o&&!this.J&&(vn==4?Fb(this.j,this):(this.o=!1,Qm(this)))}else ZN(this.g),E==400&&0<q.indexOf("Unknown SID")?(this.s=3,Mn(12)):(this.s=0,Mn(13)),La(this),Yh(this)}}}catch{}finally{}};function cb(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function FN(d,y){var E=d.C,I=y.indexOf(`
`,E);return I==-1?c_:(E=Number(y.substring(E,I)),isNaN(E)?ab:(I+=1,I+E>y.length?c_:(y=y.slice(I,I+E),d.C=I+E,y)))}co.prototype.cancel=function(){this.J=!0,La(this)};function Qm(d){d.S=Date.now()+d.I,ub(d,d.I)}function ub(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Kh(p(d.ba,d),y)}function h_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}co.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(MN(this.i,this.A),this.L!=2&&(qh(),Mn(17)),La(this),this.s=2,Yh(this)):ub(this,this.S-d)};function Yh(d){d.j.G==0||d.J||Fb(d.j,d)}function La(d){h_(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,JS(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function d_(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||f_(E.h,d))){if(!d.K&&f_(E.h,d)&&E.G==3){try{var I=E.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)og(E),sg(E);else break t;y_(E),Mn(18)}}else E.za=B[1],0<E.za-E.T&&37500>B[2]&&E.F&&E.v==0&&!E.C&&(E.C=Kh(p(E.Za,E),6e3));if(1>=fb(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Na(E,11)}else if((d.K||E.g==d)&&og(E),!w(y))for(B=E.Da.g.parse(y),y=0;y<B.length;y++){let kt=B[y];if(E.T=kt[0],kt=kt[1],E.G==2)if(kt[0]=="c"){E.K=kt[1],E.ia=kt[2];const yn=kt[3];yn!=null&&(E.la=yn,E.j.info("VER="+E.la));const vn=kt[4];vn!=null&&(E.Aa=vn,E.j.info("SVER="+E.Aa));const Rc=kt[5];Rc!=null&&typeof Rc=="number"&&0<Rc&&(I=1.5*Rc,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const qi=d.g;if(qi){const lg=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lg){var U=I.h;U.g||lg.indexOf("spdy")==-1&&lg.indexOf("quic")==-1&&lg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(p_(U,U.h),U.h=null))}if(I.D){const __=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;__&&(I.ya=__,Qt(I.I,I.D,__))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var q=d;if(I.qa=jb(I,I.J?I.ia:null,I.W),q.K){pb(I.h,q);var $t=q,Je=I.L;Je&&($t.I=Je),$t.B&&(h_($t),Qm($t)),I.g=q}else Mb(I);0<E.i.length&&rg(E)}else kt[0]!="stop"&&kt[0]!="close"||Na(E,7);else E.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Na(E,7):g_(E):kt[0]!="noop"&&E.l&&E.l.ta(kt),E.v=0)}}qh(4)}catch{}}var ON=class{constructor(d,y){this.g=d,this.map=y}};function hb(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function db(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fb(d){return d.h?1:d.g?d.g.size:0}function f_(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function p_(d,y){d.g?d.g.add(y):d.h=y}function pb(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}hb.prototype.cancel=function(){if(this.i=mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function mb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return _(d.i)}function VN(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],E=d.length,I=0;I<E;I++)y.push(d[I]);return y}y=[],E=0;for(I in d)y[E++]=d[I];return y}function jN(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const I in d)y[E++]=I;return y}}}function gb(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=jN(d),I=VN(d),B=I.length,U=0;U<B;U++)y.call(void 0,I[U],E&&E[U],d)}var yb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BN(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var I=d[E].indexOf("="),B=null;if(0<=I){var U=d[E].substring(0,I);B=d[E].substring(I+1)}else U=d[E];y(U,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ma(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ma){this.h=d.h,Jm(this,d.j),this.o=d.o,this.g=d.g,Zm(this,d.s),this.l=d.l;var y=d.i,E=new Zh;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),vb(this,E),this.m=d.m}else d&&(y=String(d).match(yb))?(this.h=!1,Jm(this,y[1]||"",!0),this.o=Qh(y[2]||""),this.g=Qh(y[3]||"",!0),Zm(this,y[4]),this.l=Qh(y[5]||"",!0),vb(this,y[6]||"",!0),this.m=Qh(y[7]||"")):(this.h=!1,this.i=new Zh(null,this.h))}Ma.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Jh(y,_b,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Jh(y,_b,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Jh(E,E.charAt(0)=="/"?$N:zN,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Jh(E,WN)),d.join("")};function ar(d){return new Ma(d)}function Jm(d,y,E){d.j=E?Qh(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Zm(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function vb(d,y,E){y instanceof Zh?(d.i=y,GN(d.i,d.h)):(E||(y=Jh(y,HN)),d.i=new Zh(y,d.h))}function Qt(d,y,E){d.i.set(y,E)}function tg(d){return Qt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Qh(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Jh(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,UN),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function UN(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _b=/[#\/\?@]/g,zN=/[#\?:]/g,$N=/[#\?]/g,HN=/[#\?@]/g,WN=/#/g;function Zh(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function uo(d){d.g||(d.g=new Map,d.h=0,d.i&&BN(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Zh.prototype,n.add=function(d,y){uo(this),this.i=null,d=xc(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function wb(d,y){uo(d),y=xc(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Eb(d,y){return uo(d),y=xc(d,y),d.g.has(y)}n.forEach=function(d,y){uo(this),this.g.forEach(function(E,I){E.forEach(function(B){d.call(y,B,I,this)},this)},this)},n.na=function(){uo(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let I=0;I<y.length;I++){const B=d[I];for(let U=0;U<B.length;U++)E.push(y[I])}return E},n.V=function(d){uo(this);let y=[];if(typeof d=="string")Eb(this,d)&&(y=y.concat(this.g.get(xc(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},n.set=function(d,y){return uo(this),this.i=null,d=xc(this,d),Eb(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Ab(d,y,E){wb(d,y),0<E.length&&(d.i=null,d.g.set(xc(d,y),_(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var I=y[E];const U=encodeURIComponent(String(I)),q=this.V(I);for(I=0;I<q.length;I++){var B=U;q[I]!==""&&(B+="="+encodeURIComponent(String(q[I]))),d.push(B)}}return this.i=d.join("&")};function xc(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function GN(d,y){y&&!d.j&&(uo(d),d.i=null,d.g.forEach(function(E,I){var B=I.toLowerCase();I!=B&&(wb(this,I),Ab(this,B,E))},d)),d.j=y}function qN(d,y){const E=new Xh;if(a.Image){const I=new Image;I.onload=m(ho,E,"TestLoadImage: loaded",!0,y,I),I.onerror=m(ho,E,"TestLoadImage: error",!1,y,I),I.onabort=m(ho,E,"TestLoadImage: abort",!1,y,I),I.ontimeout=m(ho,E,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else y(!1)}function KN(d,y){const E=new Xh,I=new AbortController,B=setTimeout(()=>{I.abort(),ho(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:I.signal}).then(U=>{clearTimeout(B),U.ok?ho(E,"TestPingServer: ok",!0,y):ho(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),ho(E,"TestPingServer: error",!1,y)})}function ho(d,y,E,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(E)}catch{}}function XN(){this.g=new kN}function YN(d,y,E){const I=E||"";try{gb(d,function(B,U){let q=B;c(B)&&(q=s_(B)),y.push(I+U+"="+encodeURIComponent(q))})}catch(B){throw y.push(I+"type="+encodeURIComponent("_badmap")),B}}function eg(d){this.l=d.Ub||null,this.j=d.eb||!1}g(eg,r_),eg.prototype.g=function(){return new ng(this.l,this.j)},eg.prototype.i=function(d){return function(){return d}}({});function ng(d,y){We.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ng,We),n=ng.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,ed(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,td(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ed(this)),this.g&&(this.readyState=3,ed(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?td(this):ed(this),this.readyState==3&&Tb(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,td(this))},n.Qa=function(d){this.g&&(this.response=d,td(this))},n.ga=function(){this.g&&td(this)};function td(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ed(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function ed(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ng.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Sb(d){let y="";return O(d,function(E,I){y+=I,y+=":",y+=E,y+=`\r
`}),y}function m_(d,y,E){t:{for(I in E){var I=!1;break t}I=!0}I||(E=Sb(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Qt(d,y,E))}function pe(d){We.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(pe,We);var QN=/^https?$/i,JN=["POST","PUT"];n=pe.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():l_.g(),this.v=this.o?ZS(this.o):ZS(l_),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(U){bb(this,U);return}if(d=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)E.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())E.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(U=>U.toLowerCase()=="content-type"),B=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JN,y,void 0))||I||B||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,q]of E)this.g.setRequestHeader(U,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pb(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){bb(this,U)}};function bb(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Cb(d),ig(d)}function Cb(d){d.A||(d.A=!0,fe(d,"complete"),fe(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,fe(this,"complete"),fe(this,"abort"),ig(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ig(this,!0)),pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xb(this):this.bb())},n.bb=function(){xb(this)};function xb(d){if(d.h&&typeof o<"u"&&(!d.v[1]||lr(d)!=4||d.Z()!=2)){if(d.u&&lr(d)==4)ka(d.Ea,0,d);else if(fe(d,"readystatechange"),lr(d)==4){d.h=!1;try{const q=d.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var E;if(!(E=y)){var I;if(I=q===0){var B=String(d.D).match(yb)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),I=!QN.test(B?B.toLowerCase():"")}E=I}if(E)fe(d,"complete"),fe(d,"success");else{d.m=6;try{var U=2<lr(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",Cb(d)}}finally{ig(d)}}}}function ig(d,y){if(d.g){Pb(d);const E=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||fe(d,"ready");try{E.onreadystatechange=I}catch{}}}function Pb(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function lr(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),IN(y)}};function Rb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ZN(d){const y={};d=(d.g&&2<=lr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(w(d[I]))continue;var E=M(d[I]);const B=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const U=y[B]||[];y[B]=U,U.push(E)}P(y,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nd(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function Ib(d){this.Aa=0,this.i=[],this.j=new Xh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nd("baseRetryDelayMs",5e3,d),this.cb=nd("retryDelaySeedMs",1e4,d),this.Wa=nd("forwardChannelMaxRetries",2,d),this.wa=nd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new hb(d&&d.concurrentRequestLimit),this.Da=new XN,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ib.prototype,n.la=8,n.G=1,n.connect=function(d,y,E,I){Mn(0),this.W=d,this.H=y||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=jb(this,null,this.W),rg(this)};function g_(d){if(kb(d),d.G==3){var y=d.U++,E=ar(d.I);if(Qt(E,"SID",d.K),Qt(E,"RID",y),Qt(E,"TYPE","terminate"),id(d,E),y=new co(d,d.j,y),y.L=2,y.v=tg(ar(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=y.v,E=!0),E||(y.g=Bb(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qm(y)}Vb(d)}function sg(d){d.g&&(v_(d),d.g.cancel(),d.g=null)}function kb(d){sg(d),d.u&&(a.clearTimeout(d.u),d.u=null),og(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function rg(d){if(!db(d.h)&&!d.s){d.s=!0;var y=d.Ga;G||it(),z||(G(),z=!0),tt.add(y,d),d.B=0}}function t6(d,y){return fb(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Kh(p(d.Ga,d,y),Ob(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const B=new co(this,this.j,d);let U=this.o;if(this.S&&(U?(U=S(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(B.H=U,U=null),this.P)t:{for(var y=0,E=0;E<this.i.length;E++){e:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=E;break t}if(y===4096||E===this.i.length-1){y=E+1;break t}}y=1e3}else y=1e3;y=Lb(this,B,y),E=ar(this.I),Qt(E,"RID",d),Qt(E,"CVER",22),this.D&&Qt(E,"X-HTTP-Session-Id",this.D),id(this,E),U&&(this.O?y="headers="+encodeURIComponent(String(Sb(U)))+"&"+y:this.m&&m_(E,this.m,U)),p_(this.h,B),this.Ua&&Qt(E,"TYPE","init"),this.P?(Qt(E,"$req",y),Qt(E,"SID","null"),B.T=!0,u_(B,E,null)):u_(B,E,y),this.G=2}}else this.G==3&&(d?Db(this,d):this.i.length==0||db(this.h)||Db(this))};function Db(d,y){var E;y?E=y.l:E=d.U++;const I=ar(d.I);Qt(I,"SID",d.K),Qt(I,"RID",E),Qt(I,"AID",d.T),id(d,I),d.m&&d.o&&m_(I,d.m,d.o),E=new co(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Lb(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),p_(d.h,E),u_(E,I,y)}function id(d,y){d.H&&O(d.H,function(E,I){Qt(y,I,E)}),d.l&&gb({},function(E,I){Qt(y,I,E)})}function Lb(d,y,E){E=Math.min(d.i.length,E);var I=d.l?p(d.l.Na,d.l,d):null;t:{var B=d.i;let U=-1;for(;;){const q=["count="+E];U==-1?0<E?(U=B[0].g,q.push("ofs="+U)):U=0:q.push("ofs="+U);let $t=!0;for(let Je=0;Je<E;Je++){let kt=B[Je].g;const yn=B[Je].map;if(kt-=U,0>kt)U=Math.max(0,B[Je].g-100),$t=!1;else try{YN(yn,q,"req"+kt+"_")}catch{I&&I(yn)}}if($t){I=q.join("&");break t}}}return d=d.i.splice(0,E),y.D=d,I}function Mb(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;G||it(),z||(G(),z=!0),tt.add(y,d),d.v=0}}function y_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Kh(p(d.Fa,d),Ob(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Nb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Kh(p(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mn(10),sg(this),Nb(this))};function v_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Nb(d){d.g=new co(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=ar(d.qa);Qt(y,"RID","rpc"),Qt(y,"SID",d.K),Qt(y,"AID",d.T),Qt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Qt(y,"TO",d.ja),Qt(y,"TYPE","xmlhttp"),id(d,y),d.m&&d.o&&m_(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=tg(ar(y)),E.m=null,E.P=!0,lb(E,d)}n.Za=function(){this.C!=null&&(this.C=null,sg(this),y_(this),Mn(19))};function og(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Fb(d,y){var E=null;if(d.g==y){og(d),v_(d),d.g=null;var I=2}else if(f_(d.h,y))E=y.D,pb(d.h,y),I=1;else return;if(d.G!=0){if(y.o)if(I==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var B=d.B;I=Km(),fe(I,new sb(I,E)),rg(d)}else Mb(d);else if(B=y.s,B==3||B==0&&0<y.X||!(I==1&&t6(d,y)||I==2&&y_(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),B){case 1:Na(d,5);break;case 4:Na(d,10);break;case 3:Na(d,6);break;default:Na(d,2)}}}function Ob(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function Na(d,y){if(d.j.info("Error code "+y),y==2){var E=p(d.fb,d),I=d.Xa;const B=!I;I=new Ma(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jm(I,"https"),tg(I),B?qN(I.toString(),E):KN(I.toString(),E)}else Mn(2);d.G=0,d.l&&d.l.sa(y),Vb(d),kb(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function Vb(d){if(d.G=0,d.ka=[],d.l){const y=mb(d.h);(y.length!=0||d.i.length!=0)&&(A(d.ka,y),A(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function jb(d,y,E){var I=E instanceof Ma?ar(E):new Ma(E);if(I.g!="")y&&(I.g=y+"."+I.g),Zm(I,I.s);else{var B=a.location;I=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var U=new Ma(null);I&&Jm(U,I),y&&(U.g=y),B&&Zm(U,B),E&&(U.l=E),I=U}return E=d.D,y=d.ya,E&&y&&Qt(I,E,y),Qt(I,"VER",d.la),id(d,I),I}function Bb(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new pe(new eg({eb:E})):new pe(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ub(){}n=Ub.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ag(){}ag.prototype.g=function(d,y){return new ai(d,y)};function ai(d,y){We.call(this),this.g=new Ib(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!w(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Pc(this)}g(ai,We),ai.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ai.prototype.close=function(){g_(this.g)},ai.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=s_(d),d=E);y.i.push(new ON(y.Ya++,d)),y.G==3&&rg(y)},ai.prototype.N=function(){this.g.l=null,delete this.j,g_(this.g),delete this.g,ai.aa.N.call(this)};function zb(d){o_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){t:{for(const E in y){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}g(zb,o_);function $b(){a_.call(this),this.status=1}g($b,a_);function Pc(d){this.g=d}g(Pc,Ub),Pc.prototype.ua=function(){fe(this.g,"a")},Pc.prototype.ta=function(d){fe(this.g,new zb(d))},Pc.prototype.sa=function(d){fe(this.g,new $b)},Pc.prototype.ra=function(){fe(this.g,"b")},ag.prototype.createWebChannel=ag.prototype.g,ai.prototype.send=ai.prototype.o,ai.prototype.open=ai.prototype.m,ai.prototype.close=ai.prototype.close,s3=function(){return new ag},i3=function(){return Km()},n3=Da,sA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xm.NO_ERROR=0,Xm.TIMEOUT=8,Xm.HTTP_ERROR=6,Py=Xm,rb.COMPLETE="complete",e3=rb,tb.EventType=Gh,Gh.OPEN="a",Gh.CLOSE="b",Gh.ERROR="c",Gh.MESSAGE="d",We.prototype.listen=We.prototype.K,Bd=tb,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,t3=pe}).apply(typeof Fg<"u"?Fg:typeof self<"u"?self:typeof window<"u"?window:{});const EP="@firebase/firestore",AP="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new q4("@firebase/firestore");function Vc(){return cc.logLevel}function Q(n,...t){if(cc.logLevel<=xt.DEBUG){const e=t.map(uS);cc.debug(`Firestore (${Oh}): ${n}`,...e)}}function so(n,...t){if(cc.logLevel<=xt.ERROR){const e=t.map(uS);cc.error(`Firestore (${Oh}): ${n}`,...e)}}function pa(n,...t){if(cc.logLevel<=xt.WARN){const e=t.map(uS);cc.warn(`Firestore (${Oh}): ${n}`,...e)}}function uS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,r3(n,i,e)}function r3(n,t,e){let i=`FIRESTORE (${Oh}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw so(i),new Error(i)}function Nt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||r3(t,s,i)}function pt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Fh{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Mq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(xn.UNAUTHENTICATED))}shutdown(){}}class Nq{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Fq{constructor(t){this.t=t,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Nt(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve();let r=new Jl;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Jl,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Jl)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nt(typeof i.accessToken=="string",31837,{l:i}),new o3(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string",2055,{h:t}),new xn(t)}}class Oq{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vq{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new Oq(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TP{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jq{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yq(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Nt(this.o===void 0,3512);const i=r=>{r.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TP(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Nt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new TP(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Bq(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<e&&(i+=t.charAt(s[r]%62))}return i}}function yt(n,t){return n<t?-1:n>t?1:0}function rA(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return yt(i,s);{const r=a3(),o=Uq(r.encode(SP(n,e)),r.encode(SP(t,e)));return o!==0?o:yt(i,s)}}e+=i>65535?2:1}return yt(n.length,t.length)}function SP(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function Uq(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return yt(n[e],t[e]);return yt(n.length,t.length)}function bh(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="__name__";class xs{constructor(t,e,i){e===void 0?e=0:e>t.length&&lt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&lt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return xs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xs?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const r=xs.compareSegments(t.get(s),e.get(s));if(r!==0)return r}return yt(t.length,e.length)}static compareSegments(t,e){const i=xs.isNumericId(t),s=xs.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?xs.extractNumericId(t).compare(xs.extractNumericId(e)):rA(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return oa.fromString(t.substring(4,t.length-2))}}class Kt extends xs{construct(t,e,i){return new Kt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new Kt(e)}static emptyPath(){return new Kt([])}}const zq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends xs{construct(t,e,i){return new hn(t,e,i)}static isValidIdentifier(t){return zq.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bP}static keyField(){return new hn([bP])}static fromServerFormat(t){const e=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new hn(e)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Kt.fromString(t))}static fromName(t){return new rt(Kt.fromString(t).popFirst(5))}static empty(){return new rt(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Kt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(n,t,e){if(!e)throw new Y($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function $q(n,t,e,i){if(t===!0&&i===!0)throw new Y($.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function CP(n){if(!rt.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xP(n){if(rt.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function c3(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function U0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function aa(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=U0(n);throw new Y($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,t){const e={typeString:n};return t&&(e.value=t),e}function Bm(n,t){if(!c3(n))throw new Y($.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const o=n[i];if(s&&typeof o!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${i}' field to equal '${r.value}'`;break}}if(e)throw new Y($.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=-62135596800,RP=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(t){return Zt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*RP);return new Zt(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<PP)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RP}_compareTo(t){return this.seconds===t.seconds?yt(this.nanoseconds,t.nanoseconds):yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Bm(t,Zt._jsonSchema))return new Zt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-PP;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:ke("string",Zt._jsonSchemaVersion),seconds:ke("number"),nanoseconds:ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(t){return new ft(t)}static min(){return new ft(new Zt(0,0))}static max(){return new ft(new Zt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function Hq(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(i===1e9?new Zt(e+1,0):new Zt(e,i));return new ma(s,rt.empty(),t)}function Wq(n){return new ma(n.readTime,n.key,jf)}class ma{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ma(ft.min(),rt.empty(),jf)}static max(){return new ma(ft.max(),rt.empty(),jf)}}function Gq(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(n.documentKey,t.documentKey),e!==0?e:yt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(n){if(n.code!==$.FAILED_PRECONDITION||n.message!==qq)throw n;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new H((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(e,r).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof H?e:H.resolve(e)}catch(e){return H.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):H.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):H.reject(e)}static resolve(t){return new H((e,i)=>{e(t)})}static reject(t){return new H((e,i)=>{i(t)})}static waitFor(t){return new H((e,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&e()},l=>i(l))}),o=!0,r===s&&e()})}static or(t){let e=H.resolve(!1);for(const i of t)e=e.next(s=>s?H.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,r)=>{i.push(e.call(this,s,r))}),this.waitFor(i)}static mapArray(t,e){return new H((i,s)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;e(t[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(t,e){return new H((i,s)=>{const r=()=>{t()===!0?e().next(()=>{r()},s):i()};r()})}}function Xq(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function jh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}z0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=-1;function $0(n){return n==null}function Pv(n){return n===0&&1/n==-1/0}function Yq(n){return typeof n=="number"&&Number.isInteger(n)&&!Pv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="";function Qq(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=IP(t)),t=Jq(n.get(e),t);return IP(t)}function Jq(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":e+="";break;case u3:e+="";break;default:e+=r}}return e}function IP(n){return n+u3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Pa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function h3(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e){this.comparator=t,this.root=e||un.EMPTY}insert(t,e){return new he(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,un.BLACK,null,null))}remove(t){return new he(this.comparator,this.root.remove(t,this.comparator).copy(null,null,un.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Og(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Og(this.root,t,this.comparator,!1)}getReverseIterator(){return new Og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Og(this.root,t,this.comparator,!0)}}class Og{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?i(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class un{constructor(t,e,i,s,r){this.key=t,this.value=e,this.color=i??un.RED,this.left=s??un.EMPTY,this.right=r??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,r){return new un(t??this.key,e??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,i),null):r===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return un.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw lt(27949);return t+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(t,e,i,s,r){return this}insert(t,e,i){return new un(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.comparator=t,this.data=new he(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DP(this.data.getIterator())}getIteratorFrom(t){return new DP(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof He)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new He(this.comparator);return e.data=t,e}}class DP{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t){this.fields=t,t.sort(hn.comparator)}static empty(){return new Ai([])}unionWith(t){let e=new He(hn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ai(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return bh(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new d3("Invalid base64 string: "+r):r}}(t);return new mn(e)}static fromUint8Array(t){const e=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new mn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const Zq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(Nt(!!n,39018),typeof n=="string"){let t=0;const e=Zq.exec(n);if(Nt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ya(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="server_timestamp",p3="__type__",m3="__previous_value__",g3="__local_write_time__";function fS(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[p3])===null||e===void 0?void 0:e.stringValue)===f3}function H0(n){const t=n.mapValue.fields[m3];return fS(t)?H0(t):t}function Bf(n){const t=ga(n.mapValue.fields[g3].timestampValue);return new Zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(t,e,i,s,r,o,a,l,c,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Rv="(default)";class Uf{constructor(t,e){this.projectId=t,this.database=e||Rv}static empty(){return new Uf("","")}get isDefaultDatabase(){return this.database===Rv}isEqual(t){return t instanceof Uf&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="__type__",v3="__max__",Vg={mapValue:{fields:{__type__:{stringValue:v3}}}},_3="__vector__",Iv="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fS(n)?4:nK(n)?9007199254740991:eK(n)?10:11:lt(28295,{value:n})}function sr(n,t){if(n===t)return!0;const e=va(n);if(e!==va(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Bf(n).isEqual(Bf(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=ga(s.timestampValue),a=ga(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,r){return ya(s.bytesValue).isEqual(ya(r.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,r){return Ae(s.geoPointValue.latitude)===Ae(r.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(r.geoPointValue.longitude)}(n,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ae(s.integerValue)===Ae(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Ae(s.doubleValue),a=Ae(r.doubleValue);return o===a?Pv(o)===Pv(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return bh(n.arrayValue.values||[],t.arrayValue.values||[],sr);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(kP(o)!==kP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(n,t);default:return lt(52216,{left:n})}}function zf(n,t){return(n.values||[]).find(e=>sr(e,t))!==void 0}function Ch(n,t){if(n===t)return 0;const e=va(n),i=va(t);if(e!==i)return yt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Ae(r.integerValue||r.doubleValue),l=Ae(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return LP(n.timestampValue,t.timestampValue);case 4:return LP(Bf(n),Bf(t));case 5:return rA(n.stringValue,t.stringValue);case 6:return function(r,o){const a=ya(r),l=ya(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=yt(a[c],l[c]);if(u!==0)return u}return yt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const a=yt(Ae(r.latitude),Ae(o.latitude));return a!==0?a:yt(Ae(r.longitude),Ae(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return MP(n.arrayValue,t.arrayValue);case 10:return function(r,o){var a,l,c,u;const f=r.fields||{},p=o.fields||{},m=(a=f[Iv])===null||a===void 0?void 0:a.arrayValue,g=(l=p[Iv])===null||l===void 0?void 0:l.arrayValue,_=yt(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:MP(m,g)}(n.mapValue,t.mapValue);case 11:return function(r,o){if(r===Vg.mapValue&&o===Vg.mapValue)return 0;if(r===Vg.mapValue)return 1;if(o===Vg.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=rA(l[f],u[f]);if(p!==0)return p;const m=Ch(a[l[f]],c[u[f]]);if(m!==0)return m}return yt(l.length,u.length)}(n.mapValue,t.mapValue);default:throw lt(23264,{le:e})}}function LP(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return yt(n,t);const e=ga(n),i=ga(t),s=yt(e.seconds,i.seconds);return s!==0?s:yt(e.nanos,i.nanos)}function MP(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const r=Ch(e[s],i[s]);if(r)return r}return yt(e.length,i.length)}function xh(n){return oA(n)}function oA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ga(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return ya(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return rt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const r of e.values||[])s?s=!1:i+=",",i+=oA(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${oA(e.fields[o])}`;return s+"}"}(n.mapValue):lt(61005,{value:n})}function Ry(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=H0(n);return t?16+Ry(t):16;case 5:return 2*n.stringValue.length;case 6:return ya(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Ry(r),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Pa(i.fields,(r,o)=>{s+=r.length+Ry(o)}),s}(n.mapValue);default:throw lt(13486,{value:n})}}function NP(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function aA(n){return!!n&&"integerValue"in n}function pS(n){return!!n&&"arrayValue"in n}function FP(n){return!!n&&"nullValue"in n}function OP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iy(n){return!!n&&"mapValue"in n}function eK(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[y3])===null||e===void 0?void 0:e.stringValue)===_3}function af(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=af(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=af(n.arrayValue.values[e]);return t}return Object.assign({},n)}function nK(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===v3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.value=t}static empty(){return new Jn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Iy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=af(e)}setAll(t){let e=hn.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,s),i={},s=[],e=a.popLast()}o?i[a.lastSegment()]=af(o):s.push(a.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,i,s)}delete(t){const e=this.field(t.popLast());Iy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Iy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Pa(e,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Jn(af(this.value))}}function w3(n){const t=[];return Pa(n.fields,(e,i)=>{const s=new hn([e]);if(Iy(i)){const r=w3(i.mapValue).fields;if(r.length===0)t.push(s);else for(const o of r)t.push(s.child(o))}else t.push(s)}),new Ai(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,e,i,s,r,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Rn(t,0,ft.min(),ft.min(),ft.min(),Jn.empty(),0)}static newFoundDocument(t,e,i,s){return new Rn(t,1,e,ft.min(),i,s,0)}static newNoDocument(t,e){return new Rn(t,2,e,ft.min(),ft.min(),Jn.empty(),0)}static newUnknownDocument(t,e){return new Rn(t,3,e,ft.min(),ft.min(),Jn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,e){this.position=t,this.inclusive=e}}function VP(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const r=t[s],o=n.position[s];if(r.field.isKeyField()?i=rt.comparator(rt.fromName(o.referenceValue),e.key):i=Ch(o,e.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function jP(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!sr(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,e="asc"){this.field=t,this.dir=e}}function iK(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{}class Ie extends E3{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new rK(t,e,i):e==="array-contains"?new lK(t,i):e==="in"?new cK(t,i):e==="not-in"?new uK(t,i):e==="array-contains-any"?new hK(t,i):new Ie(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new oK(t,i):new aK(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ch(e,this.value)):e!==null&&va(this.value)===va(e)&&this.matchesComparison(Ch(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ws extends E3{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new ws(t,e)}matches(t){return A3(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function A3(n){return n.op==="and"}function T3(n){return sK(n)&&A3(n)}function sK(n){for(const t of n.filters)if(t instanceof ws)return!1;return!0}function lA(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+xh(n.value);if(T3(n))return n.filters.map(t=>lA(t)).join(",");{const t=n.filters.map(e=>lA(e)).join(",");return`${n.op}(${t})`}}function S3(n,t){return n instanceof Ie?function(i,s){return s instanceof Ie&&i.op===s.op&&i.field.isEqual(s.field)&&sr(i.value,s.value)}(n,t):n instanceof ws?function(i,s){return s instanceof ws&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&S3(o,s.filters[a]),!0):!1}(n,t):void lt(19439)}function b3(n){return n instanceof Ie?function(e){return`${e.field.canonicalString()} ${e.op} ${xh(e.value)}`}(n):n instanceof ws?function(e){return e.op.toString()+" {"+e.getFilters().map(b3).join(" ,")+"}"}(n):"Filter"}class rK extends Ie{constructor(t,e,i){super(t,e,i),this.key=rt.fromName(i.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class oK extends Ie{constructor(t,e){super(t,"in",e),this.keys=C3("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class aK extends Ie{constructor(t,e){super(t,"not-in",e),this.keys=C3("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function C3(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>rt.fromName(i.referenceValue))}class lK extends Ie{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return pS(e)&&zf(e.arrayValue,this.value)}}class cK extends Ie{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&zf(this.value.arrayValue,e)}}class uK extends Ie{constructor(t,e){super(t,"not-in",e)}matches(t){if(zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!zf(this.value.arrayValue,e)}}class hK extends Ie{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!pS(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>zf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t,e=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Pe=null}}function BP(n,t=null,e=[],i=[],s=null,r=null,o=null){return new dK(n,t,e,i,s,r,o)}function mS(n){const t=pt(n);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>lA(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),$0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>xh(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>xh(i)).join(",")),t.Pe=e}return t.Pe}function gS(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!iK(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!S3(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!jP(n.startAt,t.startAt)&&jP(n.endAt,t.endAt)}function cA(n){return rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,e=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function fK(n,t,e,i,s,r,o,a){return new Bh(n,t,e,i,s,r,o,a)}function yS(n){return new Bh(n)}function UP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function x3(n){return n.collectionGroup!==null}function lf(n){const t=pt(n);if(t.Te===null){t.Te=[];const e=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),e.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new He(hn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new $f(r,i))}),e.has(hn.keyField().canonicalString())||t.Te.push(new $f(hn.keyField(),i))}return t.Te}function Ys(n){const t=pt(n);return t.Ie||(t.Ie=pK(t,lf(n))),t.Ie}function pK(n,t){if(n.limitType==="F")return BP(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new $f(s.field,r)});const e=n.endAt?new kv(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new kv(n.startAt.position,n.startAt.inclusive):null;return BP(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function uA(n,t){const e=n.filters.concat([t]);return new Bh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function hA(n,t,e){return new Bh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function W0(n,t){return gS(Ys(n),Ys(t))&&n.limitType===t.limitType}function P3(n){return`${mS(Ys(n))}|lt:${n.limitType}`}function jc(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>b3(s)).join(", ")}]`),$0(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>xh(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>xh(s)).join(",")),`Target(${i})`}(Ys(n))}; limitType=${n.limitType})`}function G0(n,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):rt.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,t)&&function(i,s){for(const r of lf(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=VP(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,lf(i),s)||i.endAt&&!function(o,a,l){const c=VP(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,lf(i),s))}(n,t)}function mK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R3(n){return(t,e)=>{let i=!1;for(const s of lf(n)){const r=gK(s,t,e);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function gK(n,t,e){const i=n.field.isKeyField()?rt.comparator(t.key,e.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Ch(l,c):lt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Pa(this.inner,(e,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return h3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=new he(rt.comparator);function ro(){return yK}const I3=new he(rt.comparator);function Ud(...n){let t=I3;for(const e of n)t=t.insert(e.key,e);return t}function k3(n){let t=I3;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Za(){return cf()}function D3(){return cf()}function cf(){return new Ac(n=>n.toString(),(n,t)=>n.isEqual(t))}const vK=new he(rt.comparator),_K=new He(rt.comparator);function At(...n){let t=_K;for(const e of n)t=t.add(e);return t}const wK=new He(yt);function EK(){return wK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pv(t)?"-0":t}}function L3(n){return{integerValue:""+n}}function AK(n,t){return Yq(t)?L3(t):vS(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this._=void 0}}function TK(n,t,e){return n instanceof Dv?function(s,r){const o={fields:{[p3]:{stringValue:f3},[g3]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&fS(r)&&(r=H0(r)),r&&(o.fields[m3]=r),{mapValue:o}}(e,t):n instanceof Hf?N3(n,t):n instanceof Wf?F3(n,t):function(s,r){const o=M3(s,r),a=zP(o)+zP(s.Ee);return aA(o)&&aA(s.Ee)?L3(a):vS(s.serializer,a)}(n,t)}function SK(n,t,e){return n instanceof Hf?N3(n,t):n instanceof Wf?F3(n,t):e}function M3(n,t){return n instanceof Lv?function(i){return aA(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Dv extends q0{}class Hf extends q0{constructor(t){super(),this.elements=t}}function N3(n,t){const e=O3(t);for(const i of n.elements)e.some(s=>sr(s,i))||e.push(i);return{arrayValue:{values:e}}}class Wf extends q0{constructor(t){super(),this.elements=t}}function F3(n,t){let e=O3(t);for(const i of n.elements)e=e.filter(s=>!sr(s,i));return{arrayValue:{values:e}}}class Lv extends q0{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function zP(n){return Ae(n.integerValue||n.doubleValue)}function O3(n){return pS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bK(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof Hf&&s instanceof Hf||i instanceof Wf&&s instanceof Wf?bh(i.elements,s.elements,sr):i instanceof Lv&&s instanceof Lv?sr(i.Ee,s.Ee):i instanceof Dv&&s instanceof Dv}(n.transform,t.transform)}class CK{constructor(t,e){this.version=t,this.transformResults=e}}class vs{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new vs}static exists(t){return new vs(void 0,t)}static updateTime(t){return new vs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ky(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class K0{}function V3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new _S(n.key,vs.none()):new Um(n.key,n.data,vs.none());{const e=n.data,i=Jn.empty();let s=new He(hn.comparator);for(let r of t.fields)if(!s.has(r)){let o=e.field(r);o===null&&r.length>1&&(r=r.popLast(),o=e.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Ra(n.key,i,new Ai(s.toArray()),vs.none())}}function xK(n,t,e){n instanceof Um?function(s,r,o){const a=s.value.clone(),l=HP(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Ra?function(s,r,o){if(!ky(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=HP(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(j3(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function uf(n,t,e,i){return n instanceof Um?function(r,o,a,l){if(!ky(r.precondition,o))return a;const c=r.value.clone(),u=WP(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ra?function(r,o,a,l){if(!ky(r.precondition,o))return a;const c=WP(r.fieldTransforms,l,o),u=o.data;return u.setAll(j3(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(f=>f.field))}(n,t,e,i):function(r,o,a){return ky(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function PK(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),r=M3(i.transform,s||null);r!=null&&(e===null&&(e=Jn.empty()),e.set(i.field,r))}return e||null}function $P(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&bh(i,s,(r,o)=>bK(r,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Um extends K0{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ra extends K0{constructor(t,e,i,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function j3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function HP(n,t,e){const i=new Map;Nt(n.length===e.length,32656,{Ae:e.length,Re:n.length});for(let s=0;s<e.length;s++){const r=n[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,SK(o,a,e[s]))}return i}function WP(n,t,e){const i=new Map;for(const s of n){const r=s.transform,o=e.data.field(s.field);i.set(s.field,TK(r,o,t))}return i}class _S extends K0{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RK extends K0{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&xK(r,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=uf(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=uf(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=D3();return this.mutations.forEach(s=>{const r=t.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=e.has(s.key)?null:a;const l=V3(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ft.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),At())}isEqual(t){return this.batchId===t.batchId&&bh(this.mutations,t.mutations,(e,i)=>$P(e,i))&&bh(this.baseMutations,t.baseMutations,(e,i)=>$P(e,i))}}class wS{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Nt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let s=function(){return vK}();const r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new wS(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,bt;function LK(n){switch(n){case $.OK:return lt(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function B3(n){if(n===void 0)return so("GRPC error has no .code"),$.UNKNOWN;switch(n){case Pe.OK:return $.OK;case Pe.CANCELLED:return $.CANCELLED;case Pe.UNKNOWN:return $.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return $.INTERNAL;case Pe.UNAVAILABLE:return $.UNAVAILABLE;case Pe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Pe.NOT_FOUND:return $.NOT_FOUND;case Pe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Pe.ABORTED:return $.ABORTED;case Pe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Pe.DATA_LOSS:return $.DATA_LOSS;default:return lt(39323,{code:n})}}(bt=Pe||(Pe={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK=new oa([4294967295,4294967295],0);function GP(n){const t=a3().encode(n),e=new Z4;return e.update(t),new Uint8Array(e.digest())}function qP(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new oa([e,i],0),new oa([s,r],0)]}class ES{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new zd(`Invalid padding: ${e}`);if(i<0)throw new zd(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new zd(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new zd(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=oa.fromNumber(this.fe)}pe(t,e,i){let s=t.add(e.multiply(oa.fromNumber(i)));return s.compare(MK)===1&&(s=new oa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=GP(t),[i,s]=qP(e);for(let r=0;r<this.hashCount;r++){const o=this.pe(i,s,r);if(!this.ye(o))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new ES(r,s,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.fe===0)return;const e=GP(t),[i,s]=qP(e);for(let r=0;r<this.hashCount;r++){const o=this.pe(i,s,r);this.we(o)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,e,i,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,zm.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new X0(ft.min(),s,new he(yt),ro(),At())}}class zm{constructor(t,e,i,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new zm(i,e,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=s}}class U3{constructor(t,e){this.targetId=t,this.De=e}}class z3{constructor(t,e,i=mn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class KP{constructor(){this.ve=0,this.Ce=XP(),this.Fe=mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=At(),e=At(),i=At();return this.Ce.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:lt(38017,{changeType:r})}}),new zm(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=XP()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NK{constructor(t){this.We=t,this.Ge=new Map,this.ze=ro(),this.je=jg(),this.Je=jg(),this.He=new he(yt)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:lt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,s)=>{this.nt(s)&&e(s)})}it(t){const e=t.targetId,i=t.De.count,s=this.st(e);if(s){const r=s.target;if(cA(r))if(i===0){const o=new rt(r.path);this.Xe(e,o,Rn.newNoDocument(o,ft.min()))}else Nt(i===1,20013,{expectedCount:i});else{const o=this.ot(e);if(o!==i){const a=this._t(t),l=a?this.ut(a,t,o):1;if(l!==0){this.rt(e);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,c)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=e;let o,a;try{o=ya(i).toUint8Array()}catch(l){if(l instanceof d3)return pa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ES(o,s,r)}catch(l){return pa(l instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let s=0;return i.forEach(r=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Xe(e,r,null),s++)}),s}Pt(t){const e=new Map;this.Ge.forEach((r,o)=>{const a=this.st(o);if(a){if(r.current&&cA(a.target)){const l=new rt(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Rn.newNoDocument(l,t))}r.Ne&&(e.set(o,r.Le()),r.ke())}});let i=At();this.Je.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ze.forEach((r,o)=>o.setReadTime(t));const s=new X0(t,e,this.He,this.ze,i);return this.ze=ro(),this.je=jg(),this.Je=jg(),this.He=new he(yt),s}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const s=this.tt(t);this.It(t,e)?s.qe(e,1):s.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new KP,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new He(yt),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new He(yt),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||Q("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new KP),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function jg(){return new he(rt.comparator)}function XP(){return new he(rt.comparator)}const FK={asc:"ASCENDING",desc:"DESCENDING"},OK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VK={and:"AND",or:"OR"};class jK{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function dA(n,t){return n.useProto3Json||$0(t)?t:{value:t}}function Mv(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function BK(n,t){return Mv(n,t.toTimestamp())}function Qs(n){return Nt(!!n,49232),ft.fromTimestamp(function(e){const i=ga(e);return new Zt(i.seconds,i.nanos)}(n))}function AS(n,t){return fA(n,t).canonicalString()}function fA(n,t){const e=function(s){return new Kt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function H3(n){const t=Kt.fromString(n);return Nt(X3(t),10190,{key:t.toString()}),t}function pA(n,t){return AS(n.databaseId,t.path)}function y1(n,t){const e=H3(t);if(e.get(1)!==n.databaseId.projectId)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new rt(G3(e))}function W3(n,t){return AS(n.databaseId,t)}function UK(n){const t=H3(n);return t.length===4?Kt.emptyPath():G3(t)}function mA(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function G3(n){return Nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function YP(n,t,e){return{name:pA(n,t),fields:e.value.mapValue.fields}}function zK(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:lt(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Nt(u===void 0||typeof u=="string",58123),mn.fromBase64String(u||"")):(Nt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),mn.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:B3(c.code);return new Y(u,c.message||"")}(o);e=new z3(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=y1(n,i.document.name),r=Qs(i.document.updateTime),o=i.document.createTime?Qs(i.document.createTime):ft.min(),a=new Jn({mapValue:{fields:i.document.fields}}),l=Rn.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];e=new Dy(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=y1(n,i.document),r=i.readTime?Qs(i.readTime):ft.min(),o=Rn.newNoDocument(s,r),a=i.removedTargetIds||[];e=new Dy([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=y1(n,i.document),r=i.removedTargetIds||[];e=new Dy([],r,s,null)}else{if(!("filter"in t))return lt(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new DK(s,r),a=i.targetId;e=new U3(a,o)}}return e}function $K(n,t){let e;if(t instanceof Um)e={update:YP(n,t.key,t.value)};else if(t instanceof _S)e={delete:pA(n,t.key)};else if(t instanceof Ra)e={update:YP(n,t.key,t.data),updateMask:JK(t.fieldMask)};else{if(!(t instanceof RK))return lt(16599,{Rt:t.type});e={verify:pA(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof Dv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lv)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw lt(20930,{transform:o.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:BK(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:lt(27497)}(n,t.precondition)),e}function HK(n,t){return n&&n.length>0?(Nt(t!==void 0,14353),n.map(e=>function(s,r){let o=s.updateTime?Qs(s.updateTime):Qs(r);return o.isEqual(ft.min())&&(o=Qs(r)),new CK(o,s.transformResults||[])}(e,t))):[]}function WK(n,t){return{documents:[W3(n,t.path)]}}function GK(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=W3(n,s);const r=function(c){if(c.length!==0)return K3(ws.create(c,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Bc(p.field),direction:XK(p.dir)}}(u))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=dA(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{Vt:e,parent:s}}function qK(n){let t=UK(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Nt(i===1,65062);const u=e.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let r=[];e.where&&(r=function(f){const p=q3(f);return p instanceof ws&&T3(p)?p.getFilters():[p]}(e.where));let o=[];e.orderBy&&(o=function(f){return f.map(p=>function(g){return new $f(Uc(g.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(e.orderBy));let a=null;e.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,$0(p)?null:p}(e.limit));let l=null;e.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new kv(m,p)}(e.startAt));let c=null;return e.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new kv(m,p)}(e.endAt)),fK(t,s,o,r,a,"F",l,c)}function KK(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function q3(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Uc(e.unaryFilter.field);return Ie.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Uc(e.unaryFilter.field);return Ie.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uc(e.unaryFilter.field);return Ie.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uc(e.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(n):n.fieldFilter!==void 0?function(e){return Ie.create(Uc(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ws.create(e.compositeFilter.filters.map(i=>q3(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(e.compositeFilter.op))}(n):lt(30097,{filter:n})}function XK(n){return FK[n]}function YK(n){return OK[n]}function QK(n){return VK[n]}function Bc(n){return{fieldPath:n.canonicalString()}}function Uc(n){return hn.fromServerFormat(n.fieldPath)}function K3(n){return n instanceof Ie?function(e){if(e.op==="=="){if(OP(e.value))return{unaryFilter:{field:Bc(e.field),op:"IS_NAN"}};if(FP(e.value))return{unaryFilter:{field:Bc(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(OP(e.value))return{unaryFilter:{field:Bc(e.field),op:"IS_NOT_NAN"}};if(FP(e.value))return{unaryFilter:{field:Bc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bc(e.field),op:YK(e.op),value:e.value}}}(n):n instanceof ws?function(e){const i=e.getFilters().map(s=>K3(s));return i.length===1?i[0]:{compositeFilter:{op:QK(e.op),filters:i}}}(n):lt(54877,{filter:n})}function JK(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function X3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,e,i,s,r=ft.min(),o=ft.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Ko(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(t){this.gt=t}}function tX(n){const t=qK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hA(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(){this.Dn=new nX}addToCollectionParentIndex(t,e){return this.Dn.add(e),H.resolve()}getCollectionParents(t,e){return H.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return H.resolve()}deleteFieldIndex(t,e){return H.resolve()}deleteAllFieldIndexes(t){return H.resolve()}createTargetIndexes(t,e){return H.resolve()}getDocumentsMatchingTarget(t,e){return H.resolve(null)}getIndexType(t,e){return H.resolve(0)}getFieldIndexes(t,e){return H.resolve([])}getNextCollectionGroupToUpdate(t){return H.resolve(null)}getMinOffset(t,e){return H.resolve(ma.min())}getMinOffsetFromCollectionGroup(t,e){return H.resolve(ma.min())}updateCollectionGroup(t,e,i){return H.resolve()}updateIndexEntries(t,e){return H.resolve()}}class nX{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new He(Kt.comparator),r=!s.has(i);return this.index[e]=s.add(i),r}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new He(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y3=41943040;class Yn{static withCacheSize(t){return new Yn(t,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(Y3,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Ph(0)}static ur(){return new Ph(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="LruGarbageCollector",iX=1048576;function ZP([n,t],[e,i]){const s=yt(n,e);return s===0?yt(t,i):s}class sX{constructor(t){this.Tr=t,this.buffer=new He(ZP),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();ZP(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class rX{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){Q(JP,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){jh(e)?Q(JP,"Ignoring IndexedDB error during garbage collection: ",e):await Vh(e)}await this.Rr(3e5)})}}class oX{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return H.resolve(z0.ue);const i=new sX(e);return this.Vr.forEachTarget(t,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(t,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(QP)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QP):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,s,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(t,s))).next(f=>(i=f,a=Date.now(),this.removeTargets(t,i,e))).next(f=>(r=f,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(f=>(c=Date.now(),Vc()<=xt.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:f})))}}function aX(n,t){return new oX(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(){this.changes=new Ac(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Rn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?H.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&uf(i.mutation,s,Ai.empty(),Zt.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,At()).next(()=>i))}getLocalViewOfDocuments(t,e,i=At()){const s=Za();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(r=>{let o=Ud();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Za();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,At()))}populateOverlays(t,e,i){const s=[];return i.forEach(r=>{e.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,s){let r=ro();const o=cf(),a=function(){return cf()}();return e.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Ra)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),uf(u.mutation,c,u.mutation.getFieldMask(),Zt.now())):o.set(c.key,Ai.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),e.forEach((c,u)=>{var f;return a.set(c,new cX(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=cf();let s=new he((o,a)=>o-a),r=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(c===null)return;let u=i.get(l)||Ai.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(s.get(a.batchId)||At()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=D3();u.forEach(p=>{if(!r.has(p)){const m=V3(e.get(p),i.get(p));m!==null&&f.set(p,m),r=r.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return H.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(o){return rt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):x3(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-r.size):H.resolve(Za());let a=jf,l=r;return o.next(c=>H.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),r.get(u)?H.resolve():this.remoteDocumentCache.getEntry(t,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,At())).next(u=>({batchId:a,changes:k3(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(i=>{let s=Ud();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const r=e.collectionGroup;let o=Ud();return this.indexManager.getCollectionParents(t,r).next(a=>H.forEach(a,l=>{const c=function(f,p){return new Bh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r,s))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Rn.newInvalidDocument(u)))});let a=Ud();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&uf(u.mutation,c,Ai.empty(),Zt.now()),G0(e,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hX{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return H.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(s){return{id:s.id,version:s.version,createTime:Qs(s.createTime)}}(e)),H.resolve()}getNamedQuery(t,e){return H.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(s){return{name:s.name,query:tX(s.bundledQuery),readTime:Qs(s.readTime)}}(e)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(){this.overlays=new he(rt.comparator),this.kr=new Map}getOverlay(t,e){return H.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Za();return H.forEach(e,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,r)=>{this.wt(t,e,r)}),H.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.kr.delete(i)),H.resolve()}getOverlaysForCollection(t,e,i){const s=Za(),r=e.length+1,o=new rt(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let r=new he((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Za(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Za(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return H.resolve(a)}wt(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new kK(e,i));let r=this.kr.get(e);r===void 0&&(r=At(),this.kr.set(e,r)),this.kr.set(e,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(t){return H.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.qr=new He(Xe.Qr),this.$r=new He(Xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new Xe(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new Xe(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new rt(new Kt([])),i=new Xe(e,t),s=new Xe(e,t+1),r=[];return this.$r.forEachInRange([i,s],o=>{this.Wr(o),r.push(o.key)}),r}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new rt(new Kt([])),i=new Xe(e,t),s=new Xe(e,t+1);let r=At();return this.$r.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){const e=new Xe(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Xe{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return rt.comparator(t.key,e.key)||yt(t.Hr,e.Hr)}static Ur(t,e){return yt(t.Hr,e.Hr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new He(Xe.Qr)}checkEmpty(t){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IK(r,e,i,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new Xe(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(t,e){return H.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Xr(i),r=s<0?0:s;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?dS:this.er-1)}getAllMutationBatches(t){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Xe(e,0),s=new Xe(e,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([i,s],o=>{const a=this.Zr(o.Hr);r.push(a)}),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new He(yt);return e.forEach(s=>{const r=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([r,o],a=>{i=i.add(a.Hr)})}),H.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let r=i;rt.isDocumentKey(r)||(r=r.child(""));const o=new Xe(new rt(r),0);let a=new He(yt);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),H.resolve(this.ei(a))}ei(t){const e=[];return t.forEach(i=>{const s=this.Zr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){Nt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return H.forEach(e.mutations,s=>{const r=new Xe(s.key,e.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new Xe(e,0),s=this.Yr.firstAfterOrEqual(i);return H.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,H.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mX{constructor(t){this.ni=t,this.docs=function(){return new he(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),r=s?s.size:0,o=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return H.resolve(i?i.document.mutableCopy():Rn.newInvalidDocument(e))}getEntries(t,e){let i=ro();return e.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Rn.newInvalidDocument(s))}),H.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let r=ro();const o=e.path,a=new rt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Gq(Wq(u),i)<=0||(s.has(u.key)||G0(e,u))&&(r=r.insert(u.key,u.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(t,e,i,s){lt(9500)}ri(t,e){return H.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new gX(this)}getSize(t){return H.resolve(this.size)}}class gX extends lX{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Or.addEntry(t,s)):this.Or.removeEntry(i)}),H.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(t){this.persistence=t,this.ii=new Ac(e=>mS(e),gS),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.si=0,this.oi=new TS,this.targetCount=0,this._i=Ph.ar()}forEachTarget(t,e){return this.ii.forEach((i,s)=>e(s)),H.resolve()}getLastRemoteSnapshotVersion(t){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return H.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),H.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new Ph(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,H.resolve()}updateTargetData(t,e){return this.hr(e),H.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,H.resolve()}removeTargets(t,e,i){let s=0;const r=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.ii.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),H.waitFor(r).next(()=>s)}getTargetCount(t){return H.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return H.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),H.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),H.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),H.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return H.resolve(i)}containsKey(t,e){return H.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(t,e){this.ai={},this.overlays={},this.ui=new z0(0),this.ci=!1,this.ci=!0,this.li=new fX,this.referenceDelegate=t(this),this.hi=new yX(this),this.indexManager=new eX,this.remoteDocumentCache=function(s){return new mX(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new ZK(e),this.Ti=new hX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new dX,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new pX(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){Q("MemoryPersistence","Starting transaction:",t);const s=new vX(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ei(t,e){return H.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class vX extends Kq{constructor(t){super(),this.currentSequenceNumber=t}}class SS{constructor(t){this.persistence=t,this.Ai=new TS,this.Ri=null}static Vi(t){return new SS(t)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),H.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),H.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(r=>this.mi.add(r.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.mi,i=>{const s=rt.fromPath(i);return this.fi(t,s).next(r=>{r||e.removeEntry(s,ft.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return H.or([()=>H.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Nv{constructor(t,e){this.persistence=t,this.gi=new Ac(i=>Qq(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=aX(this,e)}static Vi(t,e){return new Nv(t,e)}Ii(){}di(t){return H.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return H.forEach(this.gi,(i,s)=>this.Sr(t,i,s).next(r=>r?H.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ri(t,o=>this.Sr(t,o,e).next(a=>{a||(i++,r.removeEntry(o,ft.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),H.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),H.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),H.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),H.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ry(t.data.value)),e}Sr(t,e,i){return H.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.gi.get(e);return H.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=s}static Es(t,e){let i=At(),s=At();for(const r of e.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new bS(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return pG()?8:Xq(dG())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,s){const r={result:null};return this.ps(t,e).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ys(t,e,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new _X;return this.ws(t,e,o).next(a=>{if(r.result=a,this.Rs)return this.Ss(t,e,o,a.size)})}).next(()=>r.result)}Ss(t,e,i,s){return i.documentReadCount<this.Vs?(Vc()<=xt.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",jc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Vc()<=xt.DEBUG&&Q("QueryEngine","Query:",jc(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Vc()<=xt.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",jc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ys(e))):H.resolve())}ps(t,e){if(UP(e))return H.resolve(null);let i=Ys(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=hA(e,null,"F"),i=Ys(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const o=At(...r);return this.gs.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.bs(e,a);return this.Ds(e,c,o,l.readTime)?this.ps(t,hA(e,null,"F")):this.vs(t,c,e,l)}))})))}ys(t,e,i,s){return UP(e)||s.isEqual(ft.min())?H.resolve(null):this.gs.getDocuments(t,i).next(r=>{const o=this.bs(e,r);return this.Ds(e,o,i,s)?H.resolve(null):(Vc()<=xt.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jc(e)),this.vs(t,o,e,Hq(s,jf)).next(a=>a))})}bs(t,e){let i=new He(R3(t));return e.forEach((s,r)=>{G0(t,r)&&(i=i.add(r))}),i}Ds(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}ws(t,e,i){return Vc()<=xt.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",jc(e)),this.gs.getDocumentsMatchingQuery(t,e,ma.min(),i)}vs(t,e,i,s){return this.gs.getDocumentsMatchingQuery(t,i,s).next(r=>(e.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="LocalStore",EX=3e8;class AX{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.Fs=new he(yt),this.Ms=new Ac(r=>mS(r),gS),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uX(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function TX(n,t,e,i){return new AX(n,t,e,i)}async function J3(n,t){const e=pt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=At();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function SX(n,t){const e=pt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=e.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=H.resolve();return p.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(_=>{const A=c.docVersions.get(g);Nt(A!==null,48541),_.version.compareTo(A)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,r).next(()=>r.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=At();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function Z3(n){const t=pt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function bX(n,t){const e=pt(n),i=t.snapshotVersion;let s=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=e.Os.newChangeBuffer({trackRemovals:!0});s=e.Fs;const a=[];t.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(e.hi.removeMatchingKeys(r,u.removedDocuments,f).next(()=>e.hi.addMatchingKeys(r,u.addedDocuments,f)));let m=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(mn.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,i)),s=s.insert(f,m),function(_,A,v){return _.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=EX?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(e.hi.updateTargetData(r,m))});let l=ro(),c=At();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(CX(r,o,t.documentUpdates).next(u=>{l=u.Ls,c=u.ks})),!i.isEqual(ft.min())){const u=e.hi.getLastRemoteSnapshotVersion(r).next(f=>e.hi.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return H.waitFor(a).next(()=>o.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(e.Fs=s,r))}function CX(n,t,e){let i=At(),s=At();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let o=ro();return e.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ft.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Q(CS,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:s}})}function xX(n,t){const e=pt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=dS),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function PX(n,t){const e=pt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.hi.getTargetData(i,t).next(r=>r?(s=r,H.resolve(s)):e.hi.allocateTargetId(i).next(o=>(s=new Ko(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function gA(n,t,e){const i=pt(n),s=i.Fs.get(t),r=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!jh(o))throw o;Q(CS,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(s.target)}function tR(n,t,e){const i=pt(n);let s=ft.min(),r=At();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=pt(l),p=f.Ms.get(u);return p!==void 0?H.resolve(f.Fs.get(p)):f.hi.getTargetData(c,u)}(i,o,Ys(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,t,e?s:ft.min(),e?r:At())).next(a=>(RX(i,mK(t),a),{documents:a,qs:r})))}function RX(n,t,e){let i=n.xs.get(t)||ft.min();e.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.xs.set(t,i)}class eR{constructor(){this.activeTargetIds=EK()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class IX{constructor(){this.Fo=new eR,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new eR,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kX{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="ConnectivityMonitor";class iR{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(nR,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Q(nR,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg=null;function yA(){return Bg===null?Bg=function(){return 268435456+Math.round(2147483648*Math.random())}():Bg++,"0x"+Bg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="RestConnection",DX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LX{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Rv?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,r){const o=yA(),a=this.Go(t,e.toUriEncodedString());Q(v1,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,r);const{host:c}=new URL(a),u=lS(c);return this.jo(t,a,l,i,u).then(f=>(Q(v1,`Received RPC '${t}' ${o}: `,f),f),f=>{throw pa(v1,`RPC '${t}' ${o} failed with error: `,f,"url: ",a,"request:",i),f})}Jo(t,e,i,s,r,o){return this.Wo(t,e,i,s,r)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}Go(t,e){const i=DX[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class NX extends LX{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,s,r){const o=yA();return new Promise((a,l)=>{const c=new t3;c.setWithCredentials(!0),c.listenOnce(e3.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Py.NO_ERROR:const f=c.getResponseJson();Q(En,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),a(f);break;case Py.TIMEOUT:Q(En,`RPC '${t}' ${o} timed out`),l(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case Py.HTTP_ERROR:const p=c.getStatus();if(Q(En,`RPC '${t}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const _=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(g.status);l(new Y(_,g.message))}else l(new Y($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y($.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:t,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{Q(En,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(s);Q(En,`RPC '${t}' ${o} sending request:`,s),c.send(e,"POST",u,i,15)})}P_(t,e,i){const s=yA(),r=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=s3(),a=i3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const u=r.join("");Q(En,`Creating RPC '${t}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);this.T_(f);let p=!1,m=!1;const g=new MX({Ho:A=>{m?Q(En,`Not sending because RPC '${t}' stream ${s} is closed:`,A):(p||(Q(En,`Opening RPC '${t}' stream ${s} transport.`),f.open(),p=!0),Q(En,`RPC '${t}' stream ${s} sending:`,A),f.send(A))},Yo:()=>f.close()}),_=(A,v,w)=>{A.listen(v,T=>{try{w(T)}catch(D){setTimeout(()=>{throw D},0)}})};return _(f,Bd.EventType.OPEN,()=>{m||(Q(En,`RPC '${t}' stream ${s} transport opened.`),g.s_())}),_(f,Bd.EventType.CLOSE,()=>{m||(m=!0,Q(En,`RPC '${t}' stream ${s} transport closed`),g.__(),this.I_(f))}),_(f,Bd.EventType.ERROR,A=>{m||(m=!0,pa(En,`RPC '${t}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),g.__(new Y($.UNAVAILABLE,"The operation could not be completed")))}),_(f,Bd.EventType.MESSAGE,A=>{var v;if(!m){const w=A.data[0];Nt(!!w,16349);const T=w,D=(T==null?void 0:T.error)||((v=T[0])===null||v===void 0?void 0:v.error);if(D){Q(En,`RPC '${t}' stream ${s} received error:`,D);const F=D.status;let O=function(R){const k=Pe[R];if(k!==void 0)return B3(k)}(F),P=D.message;O===void 0&&(O=$.INTERNAL,P="Unknown error status: "+F+" with message "+D.message),m=!0,g.__(new Y(O,P)),f.close()}else Q(En,`RPC '${t}' stream ${s} received:`,w),g.a_(w)}}),_(a,n3.STAT_EVENT,A=>{A.stat===sA.PROXY?Q(En,`RPC '${t}' stream ${s} detected buffering proxy`):A.stat===sA.NOPROXY&&Q(En,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.o_()},0),g}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}function _1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n){return new jK(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t,e,i=1e3,s=1.5,r=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=s,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,e-i);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="PersistentStream";class eN{constructor(t,e,i,s,r,o,a,l){this.Fi=t,this.w_=i,this.S_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tN(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===$.RESOURCE_EXHAUSTED?(so(e.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===e&&this.W_(i,s)},i=>{t(()=>{const s=new Y($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return Q(sR,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(Q(sR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FX extends eN{constructor(t,e,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,o),this.serializer=r}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=zK(this.serializer,t),i=function(r){if(!("targetChange"in r))return ft.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?Qs(o.readTime):ft.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=mA(this.serializer),e.addTarget=function(r,o){let a;const l=o.target;if(a=cA(l)?{documents:WK(r,l)}:{query:GK(r,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$3(r,o.resumeToken);const c=dA(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ft.min())>0){a.readTime=Mv(r,o.snapshotVersion.toTimestamp());const c=dA(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=KK(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=mA(this.serializer),e.removeTarget=t,this.k_(e)}}class OX extends eN{constructor(t,e,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,o),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Nt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Nt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Nt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=HK(t.writeResults,t.commitTime),i=Qs(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=mA(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>$K(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VX{}class jX extends VX{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Wo(t,fA(e,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Y($.UNKNOWN,r.toString())})}Jo(t,e,i,s,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(t,fA(e,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class BX{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(so(e),this._a=!1):Q("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="RemoteStore";class UX{constructor(t,e,i,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{Tc(this)&&(Q(uc,"Restarting streams for network reachability change."),await async function(l){const c=pt(l);c.Ia.add(4),await $m(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Q0(c)}(this))})}),this.Aa=new BX(i,s)}}async function Q0(n){if(Tc(n))for(const t of n.da)await t(!0)}async function $m(n){for(const t of n.da)await t(!1)}function nN(n,t){const e=pt(n);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),IS(e)?RS(e):Uh(e).x_()&&PS(e,t))}function xS(n,t){const e=pt(n),i=Uh(e);e.Ta.delete(t),i.x_()&&iN(e,t),e.Ta.size===0&&(i.x_()?i.B_():Tc(e)&&e.Aa.set("Unknown"))}function PS(n,t){if(n.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ft.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Uh(n).H_(t)}function iN(n,t){n.Ra.$e(t),Uh(n).Y_(t)}function RS(n){n.Ra=new NK({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.Ta.get(t)||null,lt:()=>n.datastore.serializer.databaseId}),Uh(n).start(),n.Aa.aa()}function IS(n){return Tc(n)&&!Uh(n).M_()&&n.Ta.size>0}function Tc(n){return pt(n).Ia.size===0}function sN(n){n.Ra=void 0}async function zX(n){n.Aa.set("Online")}async function $X(n){n.Ta.forEach((t,e)=>{PS(n,t)})}async function HX(n,t){sN(n),IS(n)?(n.Aa.la(t),RS(n)):n.Aa.set("Unknown")}async function WX(n,t,e){if(n.Aa.set("Online"),t instanceof z3&&t.state===2&&t.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(n,t)}catch(i){Q(uc,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Fv(n,i)}else if(t instanceof Dy?n.Ra.Ye(t):t instanceof U3?n.Ra.it(t):n.Ra.et(t),!e.isEqual(ft.min()))try{const i=await Z3(n.localStore);e.compareTo(i)>=0&&await function(r,o){const a=r.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.Ta.get(c);u&&r.Ta.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.Ta.get(l);if(!u)return;r.Ta.set(l,u.withResumeToken(mn.EMPTY_BYTE_STRING,u.snapshotVersion)),iN(r,l);const f=new Ko(u.target,l,c,u.sequenceNumber);PS(r,f)}),r.remoteSyncer.applyRemoteEvent(a)}(n,e)}catch(i){Q(uc,"Failed to raise snapshot:",i),await Fv(n,i)}}async function Fv(n,t,e){if(!jh(t))throw t;n.Ia.add(1),await $m(n),n.Aa.set("Offline"),e||(e=()=>Z3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Q(uc,"Retrying IndexedDB access"),await e(),n.Ia.delete(1),await Q0(n)})}function rN(n,t){return t().catch(e=>Fv(n,e,t))}async function J0(n){const t=pt(n),e=_a(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:dS;for(;GX(t);)try{const s=await xX(t.localStore,i);if(s===null){t.Pa.length===0&&e.B_();break}i=s.batchId,qX(t,s)}catch(s){await Fv(t,s)}oN(t)&&aN(t)}function GX(n){return Tc(n)&&n.Pa.length<10}function qX(n,t){n.Pa.push(t);const e=_a(n);e.x_()&&e.Z_&&e.X_(t.mutations)}function oN(n){return Tc(n)&&!_a(n).M_()&&n.Pa.length>0}function aN(n){_a(n).start()}async function KX(n){_a(n).na()}async function XX(n){const t=_a(n);for(const e of n.Pa)t.X_(e.mutations)}async function YX(n,t,e){const i=n.Pa.shift(),s=wS.from(i,t,e);await rN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await J0(n)}async function QX(n,t){t&&_a(n).Z_&&await async function(i,s){if(function(o){return LK(o)&&o!==$.ABORTED}(s.code)){const r=i.Pa.shift();_a(i).N_(),await rN(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await J0(i)}}(n,t),oN(n)&&aN(n)}async function rR(n,t){const e=pt(n);e.asyncQueue.verifyOperationInProgress(),Q(uc,"RemoteStore received new credentials");const i=Tc(e);e.Ia.add(3),await $m(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await Q0(e)}async function JX(n,t){const e=pt(n);t?(e.Ia.delete(2),await Q0(e)):t||(e.Ia.add(2),await $m(e),e.Aa.set("Unknown"))}function Uh(n){return n.Va||(n.Va=function(e,i,s){const r=pt(e);return r.ia(),new FX(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Zo:zX.bind(null,n),e_:$X.bind(null,n),n_:HX.bind(null,n),J_:WX.bind(null,n)}),n.da.push(async t=>{t?(n.Va.N_(),IS(n)?RS(n):n.Aa.set("Unknown")):(await n.Va.stop(),sN(n))})),n.Va}function _a(n){return n.ma||(n.ma=function(e,i,s){const r=pt(e);return r.ia(),new OX(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:KX.bind(null,n),n_:QX.bind(null,n),ea:XX.bind(null,n),ta:YX.bind(null,n)}),n.da.push(async t=>{t?(n.ma.N_(),await J0(n)):(await n.ma.stop(),n.Pa.length>0&&(Q(uc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t,e,i,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Jl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,r){const o=Date.now()+i,a=new kS(t,e,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DS(n,t){if(so("AsyncQueue",`${t}: ${n}`),jh(n))return new Y($.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{static emptySet(t){return new yu(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||rt.comparator(e.key,i.key):(e,i)=>rt.comparator(e.key,i.key),this.keyedMap=Ud(),this.sortedSet=new he(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof yu)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new yu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.fa=new he(rt.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):lt(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Rh{constructor(t,e,i,s,r,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,s,r){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Rh(t,e,yu.emptySet(e),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&W0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class tY{constructor(){this.queries=aR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const s=pt(e),r=s.queries;s.queries=aR(),r.forEach((o,a)=>{for(const l of a.wa)l.onError(i)})})(this,new Y($.ABORTED,"Firestore shutting down"))}}function aR(){return new Ac(n=>P3(n),W0)}async function eY(n,t){const e=pt(n);let i=3;const s=t.query;let r=e.queries.get(s);r?!r.Sa()&&t.ba()&&(i=2):(r=new ZX,i=t.ba()?0:1);try{switch(i){case 0:r.ya=await e.onListen(s,!0);break;case 1:r.ya=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(o){const a=DS(o,`Initialization of query '${jc(t.query)}' failed`);return void t.onError(a)}e.queries.set(s,r),r.wa.push(t),t.va(e.onlineState),r.ya&&t.Ca(r.ya)&&LS(e)}async function nY(n,t){const e=pt(n),i=t.query;let s=3;const r=e.queries.get(i);if(r){const o=r.wa.indexOf(t);o>=0&&(r.wa.splice(o,1),r.wa.length===0?s=t.ba()?0:1:!r.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function iY(n,t){const e=pt(n);let i=!1;for(const s of t){const r=s.query,o=e.queries.get(r);if(o){for(const a of o.wa)a.Ca(s)&&(i=!0);o.ya=s}}i&&LS(e)}function sY(n,t,e){const i=pt(n),s=i.queries.get(t);if(s)for(const r of s.wa)r.onError(e);i.queries.delete(t)}function LS(n){n.Da.forEach(t=>{t.next()})}var vA,lR;(lR=vA||(vA={})).Fa="default",lR.Cache="cache";class rY{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Rh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Rh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==vA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t){this.key=t}}class cN{constructor(t){this.key=t}}class oY{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=At(),this.mutatedKeys=At(),this.Xa=R3(t),this.eu=new yu(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new oR,s=e?e.eu:this.eu;let r=e?e.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,f)=>{const p=s.get(u),m=G0(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;p&&m?p.data.isEqual(m.data)?g!==_&&(i.track({type:3,doc:m}),A=!0):this.iu(p,m)||(i.track({type:2,doc:m}),A=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),A=!0):p&&!m&&(i.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(m?(o=o.add(m),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{eu:o,ru:i,Ds:a,mutatedKeys:r}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const r=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort((u,f)=>function(m,g){const _=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:A})}};return _(m)-_(g)}(u.type,f.type)||this.Xa(u.doc,f.doc)),this.su(i),s=s!=null&&s;const a=e&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new Rh(this.query,t.eu,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new oR,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=At(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new cN(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new lN(i))}),e}uu(t){this.Ha=t.qs,this.Za=At();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Rh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const MS="SyncEngine";class aY{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class lY{constructor(t){this.key=t,this.lu=!1}}class cY{constructor(t,e,i,s,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ac(a=>P3(a),W0),this.Tu=new Map,this.Iu=new Set,this.du=new he(rt.comparator),this.Eu=new Map,this.Au=new TS,this.Ru={},this.Vu=new Map,this.mu=Ph.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function uY(n,t,e=!0){const i=mN(n);let s;const r=i.Pu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.cu()):s=await uN(i,t,e,!0),s}async function hY(n,t){const e=mN(n);await uN(e,t,!0,!1)}async function uN(n,t,e,i){const s=await PX(n.localStore,Ys(t)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,e);let a;return i&&(a=await dY(n,t,r,o==="current",s.resumeToken)),n.isPrimaryClient&&e&&nN(n.remoteStore,s),a}async function dY(n,t,e,i,s){n.gu=(f,p,m)=>async function(_,A,v,w){let T=A.view.nu(v);T.Ds&&(T=await tR(_.localStore,A.query,!1).then(({documents:P})=>A.view.nu(P,T)));const D=w&&w.targetChanges.get(A.targetId),F=w&&w.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(T,_.isPrimaryClient,D,F);return uR(_,A.targetId,O._u),O.snapshot}(n,f,p,m);const r=await tR(n.localStore,t,!0),o=new oY(t,r.qs),a=o.nu(r.documents),l=zm.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);uR(n,e,c._u);const u=new aY(t,e,o);return n.Pu.set(t,u),n.Tu.has(e)?n.Tu.get(e).push(t):n.Tu.set(e,[t]),c.snapshot}async function fY(n,t,e){const i=pt(n),s=i.Pu.get(t),r=i.Tu.get(s.targetId);if(r.length>1)return i.Tu.set(s.targetId,r.filter(o=>!W0(o,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await gA(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&xS(i.remoteStore,s.targetId),_A(i,s.targetId)}).catch(Vh)):(_A(i,s.targetId),await gA(i.localStore,s.targetId,!0))}async function pY(n,t){const e=pt(n),i=e.Pu.get(t),s=e.Tu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),xS(e.remoteStore,i.targetId))}async function mY(n,t,e){const i=AY(n);try{const s=await function(o,a){const l=pt(o),c=Zt.now(),u=a.reduce((m,g)=>m.add(g.key),At());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=ro(),_=At();return l.Os.getEntries(m,u).next(A=>{g=A,g.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(A=>{f=A;const v=[];for(const w of a){const T=PK(w,f.get(w.key).overlayedDocument);T!=null&&v.push(new Ra(w.key,T,w3(T.value.mapValue),vs.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(A=>{p=A;const v=A.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,A.batchId,v)})}).then(()=>({batchId:p.batchId,changes:k3(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new he(yt)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(i,s.batchId,e),await Hm(i,s.changes),await J0(i.remoteStore)}catch(s){const r=DS(s,"Failed to persist write");e.reject(r)}}async function hN(n,t){const e=pt(n);try{const i=await bX(e.localStore,t);t.targetChanges.forEach((s,r)=>{const o=e.Eu.get(r);o&&(Nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Nt(o.lu,14607):s.removedDocuments.size>0&&(Nt(o.lu,42227),o.lu=!1))}),await Hm(e,i,t)}catch(i){await Vh(i)}}function cR(n,t,e){const i=pt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Pu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.wa)p.va(a)&&(c=!0)}),c&&LS(l)}(i.eventManager,t),s.length&&i.hu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function gY(n,t,e){const i=pt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Eu.get(t),r=s&&s.key;if(r){let o=new he(rt.comparator);o=o.insert(r,Rn.newNoDocument(r,ft.min()));const a=At().add(r),l=new X0(ft.min(),new Map,new he(yt),o,a);await hN(i,l),i.du=i.du.remove(r),i.Eu.delete(t),NS(i)}else await gA(i.localStore,t,!1).then(()=>_A(i,t,e)).catch(Vh)}async function yY(n,t){const e=pt(n),i=t.batch.batchId;try{const s=await SX(e.localStore,t);fN(e,i,null),dN(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Hm(e,s)}catch(s){await Vh(s)}}async function vY(n,t,e){const i=pt(n);try{const s=await function(o,a){const l=pt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Nt(f!==null,37113),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);fN(i,t,e),dN(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Hm(i,s)}catch(s){await Vh(s)}}function dN(n,t){(n.Vu.get(t)||[]).forEach(e=>{e.resolve()}),n.Vu.delete(t)}function fN(n,t,e){const i=pt(n);let s=i.Ru[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(e?r.reject(e):r.resolve(),s=s.remove(t)),i.Ru[i.currentUser.toKey()]=s}}function _A(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Tu.get(t))n.Pu.delete(i),e&&n.hu.pu(i,e);n.Tu.delete(t),n.isPrimaryClient&&n.Au.zr(t).forEach(i=>{n.Au.containsKey(i)||pN(n,i)})}function pN(n,t){n.Iu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(xS(n.remoteStore,e),n.du=n.du.remove(t),n.Eu.delete(e),NS(n))}function uR(n,t,e){for(const i of e)i instanceof lN?(n.Au.addReference(i.key,t),_Y(n,i)):i instanceof cN?(Q(MS,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,t),n.Au.containsKey(i.key)||pN(n,i.key)):lt(19791,{yu:i})}function _Y(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Iu.has(i)||(Q(MS,"New document in limbo: "+e),n.Iu.add(i),NS(n))}function NS(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Iu.values().next().value;n.Iu.delete(t);const e=new rt(Kt.fromString(t)),i=n.mu.next();n.Eu.set(i,new lY(e)),n.du=n.du.insert(e,i),nN(n.remoteStore,new Ko(Ys(yS(e.path)),i,"TargetPurposeLimboResolution",z0.ue))}}async function Hm(n,t,e){const i=pt(n),s=[],r=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,l)=>{o.push(i.gu(l,t,e).then(c=>{var u;if((c||e)&&i.isPrimaryClient){const f=c?!c.fromCache:(u=e==null?void 0:e.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=bS.Es(l.targetId,c);r.push(f)}}))}),await Promise.all(o),i.hu.J_(s),await async function(l,c){const u=pt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,p=>H.forEach(p.Is,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>H.forEach(p.ds,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!jh(f))throw f;Q(CS,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.Fs.get(p),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);u.Fs=u.Fs.insert(p,_)}}}(i.localStore,r))}async function wY(n,t){const e=pt(n);if(!e.currentUser.isEqual(t)){Q(MS,"User change. New user:",t.toKey());const i=await J3(e.localStore,t);e.currentUser=t,function(r,o){r.Vu.forEach(a=>{a.forEach(l=>{l.reject(new Y($.CANCELLED,o))})}),r.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Hm(e,i.Bs)}}function EY(n,t){const e=pt(n),i=e.Eu.get(t);if(i&&i.lu)return At().add(i.key);{let s=At();const r=e.Tu.get(t);if(!r)return s;for(const o of r){const a=e.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function mN(n){const t=pt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=hN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=EY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gY.bind(null,t),t.hu.J_=iY.bind(null,t.eventManager),t.hu.pu=sY.bind(null,t.eventManager),t}function AY(n){const t=pt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vY.bind(null,t),t}class Ov{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Y0(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return TX(this.persistence,new wX,t.initialUser,this.serializer)}Du(t){return new Q3(SS.Vi,this.serializer)}bu(t){return new IX}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ov.provider={build:()=>new Ov};class TY extends Ov{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Nt(this.persistence.referenceDelegate instanceof Nv,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rX(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Q3(i=>Nv.Vi(i,e),this.serializer)}}class wA{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wY.bind(null,this.syncEngine),await JX(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tY}()}createDatastore(t){const e=Y0(t.databaseInfo.databaseId),i=function(r){return new NX(r)}(t.databaseInfo);return function(r,o,a,l){return new jX(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,r,o,a){return new UX(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>cR(this.syncEngine,e,0),function(){return iR.C()?new iR:new kX}())}createSyncEngine(t,e){return function(s,r,o,a,l,c,u){const f=new cY(s,r,o,a,l,c);return u&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const r=pt(s);Q(uc,"RemoteStore shutting down."),r.Ia.add(5),await $m(r),r.Ea.shutdown(),r.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}wA.provider={build:()=>new wA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):so("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="FirestoreClient";class bY{constructor(t,e,i,s,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=xn.UNAUTHENTICATED,this.clientId=hS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{Q(wa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Q(wa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=DS(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function w1(n,t){n.asyncQueue.verifyOperationInProgress(),Q(wa,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await J3(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>{pa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{pa("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=t}async function hR(n,t){n.asyncQueue.verifyOperationInProgress();const e=await CY(n);Q(wa,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>rR(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>rR(t.remoteStore,s)),n._onlineComponents=t}async function CY(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(wa,"Using user provided OfflineComponentProvider");try{await w1(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;pa("Error using user provided cache. Falling back to memory cache: "+e),await w1(n,new Ov)}}else Q(wa,"Using default OfflineComponentProvider"),await w1(n,new TY(void 0));return n._offlineComponents}async function gN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(wa,"Using user provided OnlineComponentProvider"),await hR(n,n._uninitializedComponentsProvider._online)):(Q(wa,"Using default OnlineComponentProvider"),await hR(n,new wA))),n._onlineComponents}function xY(n){return gN(n).then(t=>t.syncEngine)}async function dR(n){const t=await gN(n),e=t.eventManager;return e.onListen=uY.bind(null,t.syncEngine),e.onUnlisten=fY.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=hY.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=pY.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="firestore.googleapis.com",pR=!0;class mR{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vN,this.ssl=pR}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:pR;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iX)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$q("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yN((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Z0{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mR(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Mq;switch(i.type){case"firstParty":return new Vq(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=fR.get(e);i&&(Q("ComponentProvider","Removing Datastore"),fR.delete(e),i.terminate())}(this),Promise.resolve()}}function PY(n,t,e,i={}){var s;n=aa(n,Z0);const r=lS(t),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${t}:${e}`;r&&(aG(`https://${l}`),hG("Firestore",!0)),o.host!==vN&&o.host!==l&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:r,emulatorOptions:i});if(!bv(c,a)&&(n._setSettings(c),i.mockUserToken)){let u,f;if(typeof i.mockUserToken=="string")u=i.mockUserToken,f=xn.MOCK_USER;else{u=lG(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Y($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new xn(p)}n._authCredentials=new Nq(new o3(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Sc(this.firestore,t,this._query)}}class De{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new De(this.firestore,t,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Bm(e,De._jsonSchema))return new De(t,i||null,new rt(Kt.fromString(e.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:ke("string",De._jsonSchemaVersion),referencePath:ke("string")};class la extends Sc{constructor(t,e,i){super(t,e,yS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new De(this.firestore,null,new rt(t))}withConverter(t){return new la(this.firestore,t,this._path)}}function gR(n,t,...e){if(n=ir(n),l3("collection","path",t),n instanceof Z0){const i=Kt.fromString(t,...e);return xP(i),new la(n,null,i)}{if(!(n instanceof De||n instanceof la))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(t,...e));return xP(i),new la(n.firestore,null,i)}}function Ly(n,t,...e){if(n=ir(n),arguments.length===1&&(t=hS.newId()),l3("doc","path",t),n instanceof Z0){const i=Kt.fromString(t,...e);return CP(i),new De(n,null,new rt(i))}{if(!(n instanceof De||n instanceof la))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(t,...e));return CP(i),new De(n.firestore,n instanceof la?n.converter:null,new rt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="AsyncQueue";class vR{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tN(this,"async_queue_retry"),this.oc=()=>{const i=_1();i&&Q(yR,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=_1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=_1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new Jl;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!jh(t))throw t;Q(yR,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,so("INTERNAL UNHANDLED ERROR: ",_R(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const s=kS.createAndSchedule(this,t,e,i,r=>this.lc(r));return this.ec.push(s),s}ac(){this.tc&&lt(47125,{hc:_R(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function _R(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(n,["next","error","complete"])}class Ih extends Z0{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new vR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vR(t),this._firestoreClient=void 0,await t}}}function RY(n,t){const e=typeof n=="object"?n:Eq(),i=typeof n=="string"?n:Rv,s=gq(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=rG("firestore");r&&PY(s,...r)}return s}function _N(n){if(n._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IY(n),n._firestoreClient}function IY(n){var t,e,i;const s=n._freezeSettings(),r=function(a,l,c,u){return new tK(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yN(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new bY(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bi(mn.fromBase64String(t))}catch(e){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Bi(mn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Bm(t,Bi._jsonSchema))return Bi.fromBase64String(t.bytes)}}Bi._jsonSchemaVersion="firestore/bytes/1.0",Bi._jsonSchema={type:ke("string",Bi._jsonSchemaVersion),bytes:ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return yt(this._lat,t._lat)||yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(t){if(Bm(t,Js._jsonSchema))return new Js(t.latitude,t.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:ke("string",Js._jsonSchemaVersion),latitude:ke("number"),longitude:ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Bm(t,Zs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Zs(t.vectorValues);throw new Y($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:ke("string",Zs._jsonSchemaVersion),vectorValues:ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=/^__.*__$/;class DY{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Ra(t,this.data,this.fieldMask,e,this.fieldTransforms):new Um(t,this.data,e,this.fieldTransforms)}}class wN{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ra(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function EN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}class OS{constructor(t,e,i,s,r,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new OS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.fc(t),s}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Vv(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(EN(this.Ec)&&kY.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class LY{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Y0(t)}Dc(t,e,i,s=!1){return new OS({Ec:t,methodName:e,bc:i,path:hn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function VS(n){const t=n._freezeSettings(),e=Y0(n._databaseId);return new LY(n._databaseId,!!t.ignoreUndefinedProperties,e)}function MY(n,t,e,i,s,r={}){const o=n.Dc(r.merge||r.mergeFields?2:0,t,e,s);jS("Data must be an object, but it was:",o,i);const a=AN(i,o);let l,c;if(r.merge)l=new Ai(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const f of r.mergeFields){const p=EA(t,f,e);if(!o.contains(p))throw new Y($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);SN(u,p)||u.push(p)}l=new Ai(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new DY(new Jn(a),l,c)}class e_ extends FS{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e_}}function NY(n,t,e,i){const s=n.Dc(1,t,e);jS("Data must be an object, but it was:",s,i);const r=[],o=Jn.empty();Pa(i,(l,c)=>{const u=BS(t,l,e);c=ir(c);const f=s.gc(u);if(c instanceof e_)r.push(u);else{const p=Wm(c,f);p!=null&&(r.push(u),o.set(u,p))}});const a=new Ai(r);return new wN(o,a,s.fieldTransforms)}function FY(n,t,e,i,s,r){const o=n.Dc(1,t,e),a=[EA(t,i,e)],l=[s];if(r.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(EA(t,r[p])),l.push(r[p+1]);const c=[],u=Jn.empty();for(let p=a.length-1;p>=0;--p)if(!SN(c,a[p])){const m=a[p];let g=l[p];g=ir(g);const _=o.gc(m);if(g instanceof e_)c.push(m);else{const A=Wm(g,_);A!=null&&(c.push(m),u.set(m,A))}}const f=new Ai(c);return new wN(u,f,o.fieldTransforms)}function OY(n,t,e,i=!1){return Wm(e,n.Dc(i?4:3,t))}function Wm(n,t){if(TN(n=ir(n)))return jS("Unsupported field value:",t,n),AN(n,t);if(n instanceof FS)return function(i,s){if(!EN(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=Wm(a,s.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(n,t)}return function(i,s){if((i=ir(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AK(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Zt.fromDate(i);return{timestampValue:Mv(s.serializer,r)}}if(i instanceof Zt){const r=new Zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mv(s.serializer,r)}}if(i instanceof Js)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bi)return{bytesValue:$3(s.serializer,i._byteString)};if(i instanceof De){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:AS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Zs)return function(o,a){return{mapValue:{fields:{[y3]:{stringValue:_3},[Iv]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return vS(a.serializer,c)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${U0(i)}`)}(n,t)}function AN(n,t){const e={};return h3(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pa(n,(i,s)=>{const r=Wm(s,t.Vc(i));r!=null&&(e[i]=r)}),{mapValue:{fields:e}}}function TN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof Js||n instanceof Bi||n instanceof De||n instanceof FS||n instanceof Zs)}function jS(n,t,e){if(!TN(e)||!c3(e)){const i=U0(e);throw i==="an object"?t.wc(n+" a custom object"):t.wc(n+" "+i)}}function EA(n,t,e){if((t=ir(t))instanceof t_)return t._internalPath;if(typeof t=="string")return BS(n,t);throw Vv("Field path arguments must be of type string or ",n,!1,void 0,e)}const VY=new RegExp("[~\\*/\\[\\]]");function BS(n,t,e){if(t.search(VY)>=0)throw Vv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new t_(...t.split("."))._internalPath}catch{throw Vv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Vv(n,t,e,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new Y($.INVALID_ARGUMENT,a+n+l)}function SN(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t,e,i,s,r){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(US("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class jY extends bN{data(){return super.data()}}function US(n,t){return typeof t=="string"?BS(n,t):t instanceof t_?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BY(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zS{}class CN extends zS{}function UY(n,t,...e){let i=[];t instanceof zS&&i.push(t),i=i.concat(e),function(r){const o=r.filter(l=>l instanceof HS).length,a=r.filter(l=>l instanceof $S).length;if(o>1||o>0&&a>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class $S extends CN{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new $S(t,e,i)}_apply(t){const e=this._parse(t);return xN(t._query,e),new Sc(t.firestore,t.converter,uA(t._query,e))}_parse(t){const e=VS(t.firestore);return function(r,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){AR(f,u);const g=[];for(const _ of f)g.push(ER(l,r,_));p={arrayValue:{values:g}}}else p=ER(l,r,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||AR(f,u),p=OY(a,o,f,u==="in"||u==="not-in");return Ie.create(c,u,p)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class HS extends zS{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new HS(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ws.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)xN(o,l),o=uA(o,l)}(t._query,e),new Sc(t.firestore,t.converter,uA(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class WS extends CN{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new WS(t,e)}_apply(t){const e=function(s,r,o){if(s.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $f(r,o)}(t._query,this._field,this._direction);return new Sc(t.firestore,t.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new Bh(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,e))}}function zY(n,t="asc"){const e=t,i=US("orderBy",n);return WS._create(i,e)}function ER(n,t,e){if(typeof(e=ir(e))=="string"){if(e==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x3(t)&&e.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Kt.fromString(e));if(!rt.isDocumentKey(i))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return NP(n,new rt(i))}if(e instanceof De)return NP(n,e._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U0(e)}.`)}function AR(n,t){if(!Array.isArray(n)||n.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function xN(n,t){const e=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class $Y{convertValue(t,e="none"){switch(va(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ya(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw lt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Pa(t,(s,r)=>{i[s]=this.convertValue(r,e)}),i}convertVectorValue(t){var e,i,s;const r=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[Iv].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new Zs(r)}convertGeoPoint(t){return new Js(Ae(t.latitude),Ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=H0(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Bf(t));default:return null}}convertTimestamp(t){const e=ga(t);return new Zt(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Kt.fromString(t);Nt(X3(i),9688,{name:t});const s=new Uf(i.get(1),i.get(3)),r=new rt(i.popFirst(5));return s.isEqual(e)||so(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class $d{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zl extends bN{constructor(t,e,i,s,r,o){super(t,e,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new My(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(US("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Zl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Zl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zl._jsonSchema={type:ke("string",Zl._jsonSchemaVersion),bundleSource:ke("string","DocumentSnapshot"),bundleName:ke("string"),bundle:ke("string")};class My extends Zl{data(t={}){return super.data(t)}}class vu{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new $d(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new My(this._firestore,this._userDataWriter,i.key,i,new $d(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new My(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $d(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new My(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $d(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:WY(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=vu._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=hS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(e.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}vu._jsonSchemaVersion="firestore/querySnapshot/1.0",vu._jsonSchema={type:ke("string",vu._jsonSchemaVersion),bundleSource:ke("string","QuerySnapshot"),bundleName:ke("string"),bundle:ke("string")};class PN extends $Y{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new De(this.firestore,null,e)}}function TR(n,t,e,...i){n=aa(n,De);const s=aa(n.firestore,Ih),r=VS(s);let o;return o=typeof(t=ir(t))=="string"||t instanceof t_?FY(r,"updateDoc",n._key,t,e,i):NY(r,"updateDoc",n._key,t),GS(s,[o.toMutation(n._key,vs.exists(!0))])}function GY(n){return GS(aa(n.firestore,Ih),[new _S(n._key,vs.none())])}function qY(n,t){const e=aa(n.firestore,Ih),i=Ly(n),s=HY(n.converter,t);return GS(e,[MY(VS(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,vs.exists(!1))]).then(()=>i)}function KY(n,...t){var e,i,s;n=ir(n);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||wR(t[o])||(r=t[o++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(wR(t[o])){const f=t[o];t[o]=(e=f.next)===null||e===void 0?void 0:e.bind(f),t[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),t[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(n instanceof De)c=aa(n.firestore,Ih),u=yS(n._key.path),l={next:f=>{t[o]&&t[o](XY(c,n,f))},error:t[o+1],complete:t[o+2]};else{const f=aa(n,Sc);c=aa(f.firestore,Ih),u=f._query;const p=new PN(c);l={next:m=>{t[o]&&t[o](new vu(c,p,f,m))},error:t[o+1],complete:t[o+2]},BY(n._query)}return function(p,m,g,_){const A=new SY(_),v=new rY(m,A,g);return p.asyncQueue.enqueueAndForget(async()=>eY(await dR(p),v)),()=>{A.Ou(),p.asyncQueue.enqueueAndForget(async()=>nY(await dR(p),v))}}(_N(c),u,a,l)}function GS(n,t){return function(i,s){const r=new Jl;return i.asyncQueue.enqueueAndForget(async()=>mY(await xY(i),s,r)),r.promise}(_N(n),t)}function XY(n,t,e){const i=e.docs.get(t._key),s=new PN(n);return new Zl(n,s,t._key,i,new $d(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){Oh=s})(wq),xv(new Of("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Ih(new Fq(i.getProvider("auth-internal")),new jq(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),gu(EP,AP,t),gu(EP,AP,"esm2017")})();const YY={apiKey:"AIzaSyCKwyI6wBLC2EFVpMzER1-T_DMQILF11_I",authDomain:"mahta-birth-month.firebaseapp.com",projectId:"mahta-birth-month",storageBucket:"mahta-birth-month.firebasestorage.app",messagingSenderId:"497480130554",appId:"1:497480130554:web:107a62116c513584818e43",measurementId:"G-8QT9RR24JQ"},QY=Y4(YY),gd=RY(QY),JY=()=>{const[n,t]=j.useState([]),[e,i]=j.useState(""),[s,r]=j.useState(!0);j.useEffect(()=>{const u=gR(gd,"birthMonthTasks"),f=UY(u,zY("createdAt","desc")),p=KY(f,m=>{const g=[];m.forEach(_=>{g.push({id:_.id,..._.data()})}),t(g),r(!1)},m=>{console.error("Error fetching tasks: ",m),r(!1)});return()=>p()},[]);const o=async u=>{if(u.preventDefault(),!!e.trim())try{await qY(gR(gd,"birthMonthTasks"),{text:e,completed:!1,date:"",createdAt:new Date}),i("")}catch(f){console.error("Error adding task: ",f)}},a=async u=>{try{const f=Ly(gd,"birthMonthTasks",u),p=n.find(m=>m.id===u);await TR(f,{completed:!p.completed})}catch(f){console.error("Error updating task: ",f)}},l=async(u,f)=>{try{const p=Ly(gd,"birthMonthTasks",u);await TR(p,{date:f})}catch(p){console.error("Error updating date: ",p)}},c=async u=>{try{const f=Ly(gd,"birthMonthTasks",u);await GY(f)}catch(f){console.error("Error deleting task: ",f)}};return N.jsxs("div",{className:xe.container,children:[N.jsxs(Ws.div,{className:xe.header,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[N.jsx(Vx,{className:xe.heartIcon}),N.jsx("h1",{children:"Mahta's Birth Month Festivities"}),N.jsx(Vx,{className:xe.heartIcon})]}),N.jsxs("form",{className:xe.addTaskForm,onSubmit:o,children:[N.jsx("input",{type:"text",value:e,onChange:u=>i(u.target.value),placeholder:"Add a new activity...",className:xe.taskInput}),N.jsx(Ws.button,{type:"submit",className:xe.addButton,whileHover:{scale:1.1},whileTap:{scale:.9},children:N.jsx(vj,{size:20})})]}),N.jsx("div",{className:xe.taskList,children:s?N.jsx("div",{className:xe.loadingState,children:N.jsx("p",{children:"Loading festivities..."})}):n.length===0?N.jsx("div",{className:xe.emptyState,children:N.jsx("p",{children:"No festivities added yet!"})}):n.map(u=>N.jsxs(Ws.div,{className:`${xe.taskItem} ${u.completed?xe.completed:""}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[N.jsxs("div",{className:xe.taskLeft,children:[N.jsx("input",{type:"checkbox",checked:u.completed,onChange:()=>a(u.id),className:xe.checkbox,id:`task-${u.id}`}),N.jsx("label",{htmlFor:`task-${u.id}`,className:xe.taskText,children:u.text})]}),N.jsxs("div",{className:xe.taskRight,children:[N.jsxs("div",{className:xe.dateContainer,children:[N.jsx(gj,{size:16,className:xe.calendarIcon}),N.jsx("input",{type:"date",value:u.date,onChange:f=>l(u.id,f.target.value),className:xe.dateInput})]}),N.jsx("button",{onClick:()=>c(u.id),className:xe.deleteButton,"aria-label":"Delete task",children:N.jsx(wj,{size:16})})]})]},u.id))})]})},ZY="_app_1drms_5",tQ="_content_1drms_14",eQ="_logo_1drms_22",nQ="_react_1drms_31",iQ="_cardContainer_1drms_54",sQ="_cardContainerWrapper_1drms_62",SR={app:ZY,content:tQ,logo:eQ,react:nQ,"logo-spin":"_logo-spin_1drms_1","read-the-docs":"_read-the-docs_1drms_50",cardContainer:iQ,cardContainerWrapper:sQ};function rQ(){const n=j.useRef(null),t=j.useRef(null);return N.jsx(CO,{children:N.jsxs(_O,{children:[N.jsx(Ed,{path:"/advent",element:N.jsx("div",{style:{margin:0,padding:0,overflow:"hidden",height:"100vh",background:"#1a1a1a"},children:N.jsx(mW,{})})}),N.jsx(Ed,{path:"/birth-month",element:N.jsxs("div",{className:SR.app,children:[N.jsx(jx,{homeRef:n,projectsRef:t}),N.jsx(JY,{}),N.jsx(lP,{})]})}),N.jsx(Ed,{path:"/",element:N.jsxs("div",{className:SR.app,children:[N.jsx(jx,{homeRef:n,projectsRef:t}),N.jsxs("div",{ref:n,children:[N.jsx(Yj,{}),N.jsx(n7,{}),N.jsx(xW,{})]}),N.jsx("div",{ref:t,children:N.jsx(K7,{})}),N.jsx(iW,{}),N.jsx(lP,{})]})}),N.jsx(Ed,{path:"*",element:N.jsx(sW,{})})]})})}E1.createRoot(document.getElementById("root")).render(N.jsx(Hr.StrictMode,{children:N.jsx(rQ,{})}));
